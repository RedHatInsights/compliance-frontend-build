(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1440:function(e,t,n){var r=n(325),i=n(953),o=n(1441),s=n(1444);e.exports=function(e,t){if(null==e)return{};var n=r(s(e),(function(e){return[e]}));return t=i(t),o(e,n,(function(e,n){return t(e,n[0])}))}},1441:function(e,t,n){var r=n(956),i=n(1442),o=n(958);e.exports=function(e,t,n){for(var s=-1,a=t.length,c={};++s<a;){var l=t[s],u=r(e,l);n(u,l)&&i(c,o(l,e),u)}return c}},1442:function(e,t,n){var r=n(949),i=n(958),o=n(1443),s=n(307),a=n(315);e.exports=function(e,t,n,c){if(!s(e))return e;for(var l=-1,u=(t=i(t,e)).length,p=u-1,f=e;null!=f&&++l<u;){var d=a(t[l]),y=n;if(l!=p){var m=f[d];void 0===(y=c?c(m,d,f):void 0)&&(y=s(m)?m:o(t[l+1])?[]:{})}r(f,d,y),f=f[d]}return e}},1443:function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},1444:function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},1445:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(156);var i=n(301),o=n(299),s=r(n(1)),a=r(n(12)),c=n(300),l=864e5,u=function(e,t){return"".concat(e," ").concat(e>1?"".concat(t,"s"):t," ago")},p=[{rightBound:1/0,description:function(e){return u(Math.round(e/31536e6),"year")}},{rightBound:31536e6,description:function(e){return u(Math.round(e/2592e6),"month")}},{rightBound:2592e6,description:function(e){return u(Math.round(e/l),"day")}},{rightBound:l,description:function(e){return u(Math.round(e/36e5),"hour")}},{rightBound:36e5,description:function(e){return u(Math.round(e/6e4),"minute")}},{rightBound:6e4,description:function(){return"Just now"}}],f=function(e){return e.toUTCString().split(",")[1].slice(0,-7).trim()},d=function(e){return{exact:function(e){return f(e)+" UTC"},onlyDate:function(e){return f(e).slice(0,-6)},relative:function(e){return p.reduce((function(t,n){return n.rightBound>Date.now()-e?n.description(Date.now()-e):t}),f(e))},invalid:function(){return"Invalid date"}}[e]},y=function(e,t,n){return{exact:function(t){return d(e)(t)},onlyDate:function(t){return d(e)(t)},relative:function(r){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return s.createElement(c.Tooltip,i._extends({},n,{content:s.createElement("div",null,r,e)}),t)}(d("exact")(r),s.createElement("span",null,d(e)(r)),t,n)},invalid:function(){return"Invalid date"}}[e]};function m(e){var t=e.date,n=e.type,r=void 0===n?"relative":n,i=e.extraTitle,o=e.tooltipProps,a=void 0===o?{}:o,c=t instanceof Date?t:new Date(t),l=null==t||"Invalid Date"===c.toString()?"invalid":r;return s.createElement(s.Fragment,null,y(l,a,i)(c))}m.propTypes={date:a.oneOfType([a.instanceOf(Date),a.string,a.number]),type:a.oneOf(["exact","onlyDate","relative"]),extraTitle:a.string,tooltipProps:a.shape(o._defineProperty({},a.string,a.oneOfType([a.number,a.string])))},t.DateFormat=m},1446:function(e,t,n){!function(e,t){"use strict";var n=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},r=function(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.compose;i(this,e);var a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s;this.store=t.createStore((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return e}),n,a(t.applyMiddleware.apply(void 0,r(o)))),this.reducers={}}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getStore",value:function(){return this.store}},{key:"register",value:function(e){this.reducers=c({},this.reducers,{},e),this.store.replaceReducer(t.combineReducers(c({},this.reducers)))}}]),e}(),u=new l;e.ReducerRegistry=l,e.applyReducerHash=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(e,r.type)?e[r.type](n,r):n}},e.default=l,e.dispatchActionsToStore=function(e,t){return Object.keys(e).reduce((function(n,r){return c({},n,s({},r,(function(){return t&&t.dispatch(e[r].apply(e,arguments))})))}),{})},e.reduxRegistry=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(157))},619:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(156);var i=n(301),o=n(299),s=n(302),a=r(n(1)),c=r(n(12)),l=r(n(594)),u={xs:"xs",sm:"sm",md:"md",lg:"lg"},p=function(e){var t=e.size,n=e.isDark,r=e.className,c=s._objectWithoutProperties(e,["size","isDark","className"]),u=l("ins-c-skeleton","ins-c-skeleton__".concat(t),o._defineProperty({},"ins-m-dark",n),r);return a.createElement("div",i._extends({className:u},c),"Â ")};p.propTypes={className:c.string,size:c.oneOf(Object.values(u)),isDark:c.bool},p.defaultProps={size:u.md,isDark:!1},t.Skeleton=p,t.SkeletonSize=u},661:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(156);var i=n(301),o=n(299),s=n(302),a=r(n(1)),c=r(n(12)),l=r(n(594)),u=function(e){var t=e.centered,n=e.className,r=s._objectWithoutProperties(e,["centered","className"]),c=l("ins-c-spinner",o._defineProperty({},"ins-m-center",t),n);return a.createElement("div",i._extends({role:"status",className:c},r),a.createElement("span",{className:"pf-u-screen-reader"},"Loading..."))};u.propTypes={centered:c.bool,className:c.string},t.Spinner=u},710:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pe}));var r=n(94),i=n.n(r),o=n(166),s=n.n(o),a=n(225),c=n.n(a),l=n(655),u=n.n(l),p=n(202),f=n.n(p),d=n(195),y=n.n(d),m=n(304),h=n.n(m),v=n(203),b=n.n(v),g=n(204),S=n.n(g),O=n(160),E=n.n(O),w=n(191),_=n.n(w),j=n(616),P=n.n(j),I=n(595),T=n.n(I),R=n(1440),C=n.n(R),D=n(1),x=n.n(D),A=n(12),F=n.n(A),k=n(128),N=n(196),M=n(268),z=n(306),V=n(604),B=n(617),L=n(129),$=n(967),W=n(591),q=n.n(W),U=n(790),Y=n(603),J=n(244),H=n.n(J),Q=n(590),X="@@COMPLIANCE/EXPORT";function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=function(e){return e.flatMap((function(e){return e.rules&&e.rules.filter((function(e){return!e.compliant}))}))},Z=function(e){return e.flatMap((function(e){return e.rules&&e.rules.filter((function(e){return e.compliant}))}))},ee=function(e){return e.profiles?G(e.profiles):[]},te=function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ruleObjectsFailed:ee(e)},e)}))},ne=n(1446),re=n(1445),ie=n(330),oe=n.n(ie),se=function(e,t){return t.split(".").reduce((function(e,t){return e&&"undefined"!==e[t]?e[t]:void 0}),e)},ae=function(e,t){var n=se(e,t);return n.exportValue&&(n=n.exportValue),"object"===oe()(n)&&(n=se(e,t+"_text")),"string"==typeof n&&n.includes(",")&&(n='"'+n+'"'),n},ce=function(e,t){var n;"csv"===t?n=function(e){var t=e.rows,n=e.columns,r=e.selectedEntities;if(t){var i=[n.map((function(e){return e.title})).join(",")];return i=i.concat((r||t).map((function(t){return e.columns.map((function(e){return ae(t,e.key)})).join(",")}))),encodeURI("data:text/csv;charset=utf-8,"+i.join("\n"))}}(e):"json"===t&&(n=function(e){var t,n=e.rows,r=e.columns,i=e.selectedEntities;if(n)return t=(i||n).map((function(e){var t={};return r.forEach((function(n){var r=n.key.split("."),i=r[r.length-1];t[i]=ae(e,n.key)})),t})),encodeURI("data:application/json;charset=utf-8,"+JSON.stringify(t))}(e)),function(e,t){if(e){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}}(n,function(e){return"compliance-export-"+(new Date).toISOString()+"."+e}(t))},le=n(300),ue=n(586),pe=n(589),fe=n(678);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(e){if(e.testResultProfiles&&e.testResultProfiles.length>0)return{title:x.a.createElement(k.Link,{to:{pathname:"/systems/".concat(e.id)}},"View report")}},he=function(e){return void 0!==e.osMajorVersion&&void 0!==e.osMinorVersion&&null!==e.osMajorVersion&&null!==e.osMinorVersion&&!(0===e.osMajorVersion&&0===e.osMinorVersion)},ve=function(e,t){return{title:x.a.createElement(pe.TextContent,null,t.name?x.a.createElement(k.Link,{to:{pathname:"/systems/".concat(t.id)}},t.name):e.display_name,he(t)&&x.a.createElement(ue.Text,{component:ue.TextVariants.small},"RHEL ",t.osMajorVersion,".",t.osMinorVersion)),exportValue:e.display_name||t.name}},be=function(e,t){return!!(t||[]).find((function(t){return t.id===e}))},ge=function(e,t,n,r){return t.map((function(t){void 0===t.facts&&(t.facts={});var i,o,s,a,c,l,u,p,f,d,y,m,h=e.map((function(e){return e.node})).find((function(e){return t.id===e.id}));if(void 0===h){if(!n)return;h={testResultProfiles:[],policies:[]}}return h.policyNames=function(e){if(e==={})return"";var t=e.policies.map((function(e){return e.name})),n=e.testResultProfiles.filter((function(e){return!e.policy})).map((function(e){var t=e.name;return"(External) ".concat(t)}));return[].concat(P()(t),P()(n)).join(", ")}(h),h.rulesPassed=Z(h.testResultProfiles).length,h.rulesFailed=G(h.testResultProfiles).length,h.lastScanned=(i=h.testResultProfiles,o=(void 0===i?[]:i).map((function(e){return new Date(e.lastScanned)})),(s=new Date(Math.max.apply(null,o.filter((function(e){return isFinite(e)})))))instanceof Date&&isFinite(s)?s:"Never"),h.compliant=(void 0===(a=h.testResultProfiles)?[]:a).every((function(e){return"Never"===e.lastScanned||!0===e.compliant})),h.score=(c=h.testResultProfiles,u=(l=void 0===c?[]:c).reduce((function(e,t){return e+t.score}),0),(p=l.reduce((function(e,t){return Z([t]).length+G([t]).length>0?e+1:e}),0))?u/p:0),h.supported=(void 0===(f=h.testResultProfiles)?[]:f).reduce((function(e,t){return e&&t.supported}),!0),{id:t.id,selected:be(t.id,r),account:t.account,bios_uuid:t.bios_uuid,created:t.created,display_name:t.display_name||h.name,fqdn:t.fqdn,insights_id:t.insights_id,ip_addresses:t.ip_addresses,mac_addresses:t.mac_addresses,rhel_machine_id:t.rhel_machine_id,satellite_id:t.satellite_id,subscription_manager_id:t.subscription_manager_id,tags:t.tags,updated:t.updated,facts:{inventory:{hostname:void 0!==t.facts.inventory?t.facts.inventory.hostname:t.facts.hostname,machine_id:void 0!==t.facts.inventory?t.facts.inventory.machine_id:t.facts.machine_id,release:void 0!==t.facts.inventory?t.facts.inventory.release:t.facts.release},compliance:{display_name:ve(t,h),policies:(m=h,{title:m.policyNames?x.a.createElement(le.Tooltip,{content:m.policyNames},x.a.createElement(fe.default,{lines:2,width:540},m.policyNames)):x.a.createElement(ue.Text,{className:"grey-icon"},"No policies"),exportValue:m.policyNames}),details_link:me(h),rules_passed:h.rulesPassed,rules_failed:{title:x.a.createElement(k.Link,{to:{pathname:"/systems/".concat(h.id),query:{hidePassed:!0}}},h.rulesFailed)},rules_failed_text:h.rulesFailed,compliance_score:Object(Q.c)(h),compliance_score_text:Object(Q.F)(h),last_scanned:h.lastScanned instanceof Date?{title:x.a.createElement(re.DateFormat,{date:Date.parse(h.lastScanned),type:"relative"})}:h.lastScanned,last_scanned_text:h.lastScanned,ssg_version:(d=h,y=d.testResultProfiles,(void 0===y?[]:y).map((function(e){return e.ssgVersion})).filter((function(e){return!!e})).join(", ")),supported:h.supported}}}})).filter((function(e){return!!e}))},Se=function(e,t){var n=e.rows.filter((function(n){return t.includes(n.id)&&!(e.selectedEntities||[]).map((function(e){return e.id})).includes(n.id)}));return ye(ye({},e),{},{selectedEntities:(e.selectedEntities||[]).concat(n)})},Oe=function(e,t){return ye(ye({},e),{},{selectedEntities:(e.selectedEntities||[]).filter((function(e){return!t.includes(e.id)}))})},Ee=function(e,t,n){var r;return Object(ne.applyReducerHash)((r={},_()(r,"UPDATE_SYSTEMS",(function(e,t){var n=t.systems,r=t.systemsCount;return ye(ye({},e),{},{systems:n,systemsCount:r})})),_()(r,"UPDATE_ROWS",(function(e){return ye(ye({},e),{},{loaded:!0,rows:ge(e.systems||[],e.rows||[],n,e.selectedEntities)})})),_()(r,e.LOAD_ENTITIES_FULFILLED,(function(e){return ye(ye({},e),{},{rows:ge(e.systems||[],e.rows,n,e.selectedEntities),total:n?e.total:e.systemsCount,columns:e.total>0?t:[{title:""}]})})),_()(r,X,(function(e,t){var n=t.payload.format;return ce(e,n),e})),_()(r,"SELECT_ENTITY",(function(e,t){var n,r=t.payload,i=r.id,o=r.selected,s=r.clearAll;return(0===(n=0===i?o?function(e){return Se(e,e.rows.map((function(e){return e.id})))}(e):function(e){return Oe(e,e.rows.map((function(e){return e.id})))}(e):o?function(e,t){return Se(e,[t])}(e,i):function(e,t){return Oe(e,[t])}(e,i)).selectedEntities.length||s)&&(n.selectedEntities=void 0),n})),_()(r,"SELECT_ENTITIES",(function(e,t){return{selectedEntities:t.payload.ids}})),r))},we=n(226),_e=function(e){var t=e.profile;return t.supported&&t.ssg_version||x.a.createElement(Q.C,null,t.ssg_version)};_e.propTypes={profile:F.a.object};var je,Pe={SSGVersion:_e};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){_()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S()(this,n)}}function Ce(){var e=T()(["\nquery getSystems($filter: String!, $policyId: ID, $perPage: Int, $page: Int) {\n    systems(search: $filter, limit: $perPage, offset: $page) {\n        totalCount\n        edges {\n            node {\n                id\n                name\n                osMajorVersion\n                osMinorVersion\n                testResultProfiles(policyId: $policyId) {\n                    id\n                    name\n                    lastScanned\n                    external\n                    compliant\n                    score\n                    supported\n                    ssgVersion\n                    policy {\n                        id\n                    }\n                }\n                policies(policyId: $policyId) {\n                    id\n                    name\n                }\n            }\n        }\n    }\n}\n"]);return Ce=function(){return e},e}function De(){var e=T()(["\nquery getSystems($filter: String!, $policyId: ID, $perPage: Int, $page: Int) {\n    systems(search: $filter, limit: $perPage, offset: $page) {\n        totalCount\n        edges {\n            node {\n                id\n                name\n                osMajorVersion\n                osMinorVersion\n                testResultProfiles(policyId: $policyId) {\n                    id\n                    name\n                    refId\n                    lastScanned\n                    compliant\n                    external\n                    score\n                    supported\n                    ssgVersion\n                    rules {\n                        refId\n                        title\n                        compliant\n                        remediationAvailable\n                    }\n                }\n                policies(policyId: $policyId) {\n                    id\n                    name\n                }\n            }\n        }\n    }\n}\n"]);return De=function(){return e},e}var xe=q()(De()),Ae=q()(Ce()),Fe=function(e){return C()(e.initialDefaultState(),(function(e){return!!e}))},ke={page:1},Ne=function(e,t){return[].concat(P()(Object(we.f)(e)),P()(t?Object(we.e)(e):[]))},Me=H()()(je=function(e){b()(r,e);var t,n=Re(r);function r(){var e;f()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),_()(h()(e),"inventory",x.a.createRef()),_()(h()(e),"filterConfig",new Y.FilterConfigBuilder([].concat(P()(we.c),P()(e.props.compliantFilter?we.b:[]),P()(e.props.policies&&e.props.policies.length>0?Ne(e.props.policies,e.props.showOsFilter):[])))),_()(h()(e),"chipBuilder",e.filterConfig.getChipBuilder()),_()(h()(e),"filterBuilder",e.filterConfig.getFilterBuilder()),_()(h()(e),"state",Te(Te({},ke),{},{InventoryCmp:null,policyId:e.props.policyId,perPage:50,totalCount:0,activeFilters:Fe(e.filterConfig)})),_()(h()(e),"componentDidMount",(function(){var t=e.props,n=t.clearAll,r=t.selectedEntities;r&&r.length>0&&n(),(e.props.preselectedSystems?Promise.resolve(e.props.selectEntities(e.props.preselectedSystems)):Promise.resolve()).then((function(){e.updateSystems().then((function(){return e.fetchInventory()}))}))})),_()(h()(e),"componentDidUpdate",(function(t){t.complianceThreshold!==e.props.complianceThreshold&&e.updateSystems()})),_()(h()(e),"onRefresh",(function(t){var n=t.page,r=t.per_page,i=u()(t,["page","per_page"]);e.props.showAllSystems&&e.inventory&&e.inventory.current?e.setState({page:n,perPage:r},(function(){e.inventory.current.onRefreshData(Te(Te({page:n,perPage:r},i),{},{per_page:r}))})):e.setState({page:n,perPage:r},(function(){return e.updateSystems().then((function(){e.inventory&&e.inventory.current&&e.inventory.current.onRefreshData(Te(Te({page:n,perPage:r},i),{},{per_page:r}))}))}))})),_()(h()(e),"fetchSystems",(function(){var t=e.props,n=t.client,r=t.showOnlySystemsWithTestResults,i=t.remediationsEnabled,o=e.state,s=o.policyId,a=o.perPage,c=o.page,l=o.activeFilters,u=e.filterBuilder.buildFilterString(l);r&&(u="has_test_results = true ".concat(u.length>0?"and ".concat(u):""));var p={filter:u,perPage:a,page:c};return s&&(u="policy_id = ".concat(s," and ").concat(u),p=Te(Te({},p),{},{filter:u,policyId:s})),n.query({query:i?xe:Ae,fetchResults:!0,fetchPolicy:"no-cache",variables:p})})),_()(h()(e),"updateSystems",(function(){var t=e.props.systems.map((function(e){return e.node.id})).sort();return e.fetchSystems().then((function(t){return e.props.updateSystems({systems:t.data.systems.edges,systemsCount:t.data.systems.totalCount})})).then((function(){var n=e.props.systems.map((function(e){return e.node.id})).sort();JSON.stringify(n)===JSON.stringify(t)&&e.props.updateRows()})).catch((function(t){e.setState((function(e){return Te(Te({},e),{},{error:t})}))}))})),_()(h()(e),"onExportSelect",(function(t,n){return e.props.exportFromState(n)})),_()(h()(e),"onFilterUpdate",(function(t,n){e.props.updateSystems({systems:[],systemsCount:0}),e.setState(Te(Te({},ke),{},{activeFilters:Te(Te({},e.state.activeFilters),{},_()({},t,n))}),e.updateSystems)})),_()(h()(e),"deleteFilter",(function(t){var n=e.filterConfig.removeFilterWithChip(t,e.state.activeFilters);e.setState(Te(Te({},ke),{},{activeFilters:n}),e.updateSystems)})),_()(h()(e),"clearAllFilter",(function(){e.setState(Te(Te({},ke),{},{activeFilters:Fe(e.filterConfig)}),e.updateSystems)})),_()(h()(e),"onFilterDelete",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r?e.clearAllFilter():e.deleteFilter(n[0])})),_()(h()(e),"onBulkSelect",(function(){var t=e.props,n=t.selectedEntities,r=t.selectAll,i=t.clearSelection,o=t.allSelectedOnPage;0===n.length||n.length>0&&!o?r():i()})),_()(h()(e),"isExportDisabled",(function(){var t=e.props,n=t.total,r=t.selectedEntities;return 0===(n||0)&&0===r.length})),e}return y()(r,[{key:"fetchInventory",value:(t=c()(s.a.mark((function e(){var t,n,r,i,o,a,c,l,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.columns,r=t.showAllSystems,i=t.clearInventoryFilter,e.next=3,insights.loadInventory({ReactRedux:L,react:x.a,reactRouterDom:k,pfReact:N,reactIcons:z,pfReactTable:V});case 3:o=e.sent,a=o.inventoryConnector,c=o.INVENTORY_ACTION_TYPES,l=o.mergeWithEntities,i(),this.getRegistry().register(Te({},l(Ee(c,n,r)))),this.setState((function(){return{InventoryCmp:a(u.props.store).InventoryTable}}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.props,n=t.remediationsEnabled,r=t.compact,i=t.enableExport,o=t.showAllSystems,s=t.showActions,a=t.showComplianceSystemsInfo,c=t.selectedEntities,l=t.selectedEntitiesIds,u=t.systems,p=t.total,f=t.policyId,d=t.systemProps,y=this.state,m=y.page,h=y.perPage,v=y.InventoryCmp,b=y.activeFilters,g=y.error,S=this.filterConfig.buildConfiguration(this.onFilterUpdate,b,{hideLabel:!0}),O=this.chipBuilder.chipsFor(this.state.activeFilters),E=i?{isDisabled:this.isExportDisabled(),onSelect:this.onExportSelect}:{},w=Te(Te({},d),{},{onRefresh:this.onRefresh,ref:this.inventory,page:m,perPage:h,exportConfig:E,tableProps:{canSelectAll:!1},bulkSelect:{checked:c.length>0&&(!!this.props.allSelectedOnPage||null),onSelect:this.onBulkSelect,count:c.length,label:c.length>0?"".concat(c.length," Selected"):void 0}});return s&&(w.actions=[{title:"View in inventory",onClick:function(e,t,n){var r=n.id,i="beta"===window.location.pathname.split("/")[1];window.location.href="".concat(window.location.origin).concat(i?"/beta":"","/insights/inventory/").concat(r)}}]),o||(w.total=p,w.items=u.map((function(e){return e.node.id})),w.filterConfig=S,w.activeFiltersConfig={filters:O,onDelete:this.onFilterDelete}),r&&(w.variant=B.f.compact),void 0===g&&(e=!0),f&&0===p&&0===Object.keys(b).length&&(w.tableProps.rows=[{cells:[{title:x.a.createElement(Q.i,null)}]}],w.tableProps.columns=[],w.hasItems=!1,w.hasCheckbox=!1),!o&&n&&(w.dedicatedAction=x.a.createElement(Y.ComplianceRemediationButton,{allSystems:te(u.filter((function(e){return l.includes(e.node.id)})).map((function(e){return e.node}))),selectedRules:[]})),x.a.createElement(Q.y,{stateValues:{error:g,noError:e}},x.a.createElement(Q.z,{stateKey:"error"},x.a.createElement(Q.e,{error:g})),x.a.createElement(Q.z,{stateKey:"noError"},a&&x.a.createElement(M.a,{isInline:!0,variant:"info",title:"The list of systems in this view is different than those that appear in the Inventory. Only systems previously or currently associated with compliance policies are displayed."}),v?x.a.createElement(v,w):x.a.createElement(U.SkeletonTable,{colSize:2,rowSize:15})))}}]),r}(x.a.Component))||je;Me.propTypes={allSelectedOnPage:F.a.bool,clearAll:F.a.func,clearInventoryFilter:F.a.func,clearSelection:F.a.func,client:F.a.object,columns:F.a.array,compact:F.a.bool,complianceThreshold:F.a.number,compliantFilter:F.a.bool,enableExport:F.a.bool,error:F.a.object,exportFromState:F.a.func,policies:F.a.array,policyId:F.a.string,preselectedSystems:F.a.array,remediationsEnabled:F.a.bool,selectAll:F.a.func,selectEntities:F.a.func,selectedEntities:F.a.array,selectedEntitiesIds:F.a.array,showActions:F.a.bool,showAllSystems:F.a.bool,showOnlySystemsWithTestResults:F.a.bool,showOsFilter:F.a.bool,store:F.a.object,systems:F.a.array,total:F.a.number,updateRows:F.a.func,updateSystems:F.a.func,systemProps:F.a.shape({isFullView:F.a.bool}),showComplianceSystemsInfo:F.a.bool},Me.defaultProps={remediationsEnabled:!0,compact:!1,enableExport:!0,showAllSystems:!1,complianceThreshold:0,showOnlySystemsWithTestResults:!1,showActions:!0,compliantFilter:!1,selectedEntities:[],selectedEntitiesIds:[],systems:[],clearAll:function(){return{}},exportFromState:function(){return{}},systemProps:{},showComplianceSystemsInfo:!1};var ze=Object($.a)((function(e){return x.a.createElement(Me,i()({},e,{store:L.useStore()}))}));t.b=Object(L.connect)((function(e){return void 0===e.entities||void 0===e.entities.rows?{selectedEntities:[],systems:[]}:{allSelectedOnPage:0===e.entities.rows.filter((function(t){return!(e.entities.selectedEntities||[]).map((function(e){return e.id})).includes(t.id)})).length,selectedEntities:e.entities.selectedEntities,selectedEntitiesIds:(e.entities.selectedEntities||[]).map((function(e){return e.id})),systems:e.entities.systems,total:e.entities.total}}),(function(e){return{clearInventoryFilter:function(){return e({type:"CLEAR_FILTERS"})},exportFromState:function(t){return e(function(e){return{type:X,payload:{format:e}}}(t))},updateSystems:function(t){e(Te({type:"UPDATE_SYSTEMS"},t))},updateRows:function(){return e({type:"UPDATE_ROWS"})},selectAll:function(){return e({type:"SELECT_ENTITY",payload:{id:0,selected:!0}})},clearSelection:function(){return e({type:"SELECT_ENTITY",payload:{id:0,selected:!1}})},clearAll:function(){return e({type:"SELECT_ENTITY",payload:{clearAll:!0}})},selectEntities:function(t){return e({type:"SELECT_ENTITIES",payload:{ids:t}})}}}))(ze)},790:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(156),n(301);var i=n(299);n(302);var o=r(n(1)),s=r(n(12));n(594);var a=n(305),c=n(303),l=n(604),u=n(619);function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){c._inherits(n,e);var t=function(e){return function(){var t,n=c._getPrototypeOf(e);if(p()){var r=c._getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c._possibleConstructorReturn(this,t)}}(n);function n(){var e;c._classCallCheck(this,n);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),i._defineProperty(c._assertThisInitialized(e),"createColumns",(function(){var t=e.props.colSize;return a._toConsumableArray(Array(t)).map((function(){return{title:o.createElement(u.Skeleton,{size:u.SkeletonSize.sm})}}))})),i._defineProperty(c._assertThisInitialized(e),"getColumns",(function(){var t=e.props,n=t.paddingColumnSize,r=t.columns;return e.newArray(n).map((function(){return""})).concat(r||e.createColumns())})),i._defineProperty(c._assertThisInitialized(e),"createRows",(function(){var t=e.props,n=t.colSize,r=t.rowSize,i=t.columns,s=t.paddingColumnSize,a=i?i.length:n;return e.newArray(r).map((function(){return{cells:e.newArray(s).map((function(){return""})).concat(e.newArray(a).map((function(){return{title:o.createElement(u.Skeleton,{size:u.SkeletonSize.md})}})))}}))})),i._defineProperty(c._assertThisInitialized(e),"newArray",(function(e){return a._toConsumableArray(Array(e))})),e}return c._createClass(n,[{key:"render",value:function(){return o.createElement(l.Table,{cells:this.getColumns(),rows:this.createRows(),sortBy:this.props.sortBy,"aria-label":"Loading"},o.createElement(l.TableHeader,null),o.createElement(l.TableBody,null))}}]),n}(o.Component);f.propTypes={colSize:s.number,rowSize:s.number,columns:s.array,paddingColumnSize:s.number,sortBy:s.shape({index:s.number,direction:s.oneOf(["asc","desc"])})},f.defaultProps={rowSize:0,paddingColumnSize:0},t.SkeletonTable=f},958:function(e,t,n){var r=n(163);e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return r(e)?e:[e]}},967:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(576),i=n(3),o=n(1),s=n.n(o),a=n(96),c=n.n(a),l=n(577),u=n(12),p=n.n(u);function f(e){var t=e.children,n=e.query,r=Object(i.__rest)(e,["children","query"]),o=Object(l.useQuery)(n,r);return t&&o?t(o):null}function d(e){var t=Object(l.useMutation)(e.mutation,e),n=t[0],r=t[1];return e.children?e.children(n,r):null}function y(e){var t=Object(l.useSubscription)(e.subscription,e);return e.children&&t?e.children(t):null}(f||(f={})).propTypes={client:p.a.object,children:p.a.func.isRequired,fetchPolicy:p.a.string,notifyOnNetworkStatusChange:p.a.bool,onCompleted:p.a.func,onError:p.a.func,pollInterval:p.a.number,query:p.a.object.isRequired,variables:p.a.object,ssr:p.a.bool,partialRefetch:p.a.bool,returnPartialData:p.a.bool},(d||(d={})).propTypes={mutation:p.a.object.isRequired,variables:p.a.object,optimisticResponse:p.a.oneOfType([p.a.object,p.a.func]),refetchQueries:p.a.oneOfType([p.a.arrayOf(p.a.oneOfType([p.a.string,p.a.object])),p.a.func]),awaitRefetchQueries:p.a.bool,update:p.a.func,children:p.a.func.isRequired,onCompleted:p.a.func,onError:p.a.func,fetchPolicy:p.a.string},(y||(y={})).propTypes={subscription:p.a.object.isRequired,variables:p.a.object,children:p.a.func,onSubscriptionData:p.a.func,onSubscriptionComplete:p.a.func,shouldResubscribe:p.a.oneOfType([p.a.func,p.a.bool])};var m=n(10);!function(e){function t(t){var n=e.call(this,t)||this;return n.withRef=!1,n.setWrappedInstance=n.setWrappedInstance.bind(n),n}Object(i.__extends)(t,e),t.prototype.getWrappedInstance=function(){return Object(m.b)(this.withRef,2),this.wrappedInstance},t.prototype.setWrappedInstance=function(e){this.wrappedInstance=e}}(s.a.Component);function h(e,t){void 0===t&&(t={});var n="withApollo("+function(e){return e.displayName||e.name||"Component"}(e)+")",o=function(o){function a(e){var t=o.call(this,e)||this;return t.setWrappedInstance=t.setWrappedInstance.bind(t),t}return Object(i.__extends)(a,o),a.prototype.getWrappedInstance=function(){return Object(m.b)(t.withRef,1),this.wrappedInstance},a.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},a.prototype.render=function(){var n=this;return s.a.createElement(r.a,null,(function(r){var o=Object.assign({},n.props,{client:r,ref:t.withRef?n.setWrappedInstance:void 0});return s.a.createElement(e,Object(i.__assign)({},o))}))},a.displayName=n,a.WrappedComponent=e,a}(s.a.Component);return c()(o,e,{})}}}]);
//# sourceMappingURL=../sourcemaps/EditPolicy~PolicyDetails~ReportDetails~SystemDetails-4c0121c48adb14b62ec3d3cd95439347.js.map