(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{223:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(249),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=0;t.a=function(e){var t=[e.xOffset||0,e.yOffset||0,e.width,e.height].join(" "),n=e.transform,r=function(r){function u(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=n=c(this,(e=u.__proto__||Object.getPrototypeOf(u)).call.apply(e,[this].concat(a))),n.id="icon-title-"+s++,c(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,a.a.Component),l(u,[{key:"render",value:function(){var r=this.props,l=r.size,c=r.color,s=r.title,u=(r.noStyle,r.noVerticalAlign),p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(r,["size","color","title","noStyle","noVerticalAlign"]),f=Boolean(s),h=Object(i.c)(l),m=-.125*Number.parseFloat(h),d=u?null:{verticalAlign:m+"em"};return a.a.createElement("svg",o({style:d,fill:c,height:h,width:h,viewBox:t,"aria-labelledby":f?this.id:null,"aria-hidden":!f||null,role:"img"},p),f&&a.a.createElement("title",{id:this.id},s),a.a.createElement("path",{d:e.svgPath,transform:n}))}}]),u}();return r.displayName=e.name,r.propTypes=i.d,r.defaultProps=i.b,r}},236:function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},238:function(e,t,n){var r=n(36).parse;function a(e){return e.replace(/[\s,]+/g," ").trim()}var i={},o={};function l(e){return a(e.source.body.substring(e.start,e.end))}var c=!0;var s=!1;function u(e){var t=a(e);if(i[t])return i[t];var n=r(e,{experimentalFragmentVariables:s});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=function e(t,n){var r=Object.prototype.toString.call(t);if("[object Array]"===r)return t.map(function(t){return e(t,n)});if("[object Object]"!==r)throw new Error("Unexpected input.");n&&t.loc&&delete t.loc,t.loc&&(delete t.loc.startToken,delete t.loc.endToken);var a,i,o,l=Object.keys(t);for(a in l)l.hasOwnProperty(a)&&(i=t[l[a]],"[object Object]"!==(o=Object.prototype.toString.call(i))&&"[object Array]"!==o||(t[l[a]]=e(i,!0)));return t}(n=function(e){for(var t={},n=[],r=0;r<e.definitions.length;r++){var a=e.definitions[r];if("FragmentDefinition"===a.kind){var i=a.name.value,s=l(a.loc);o.hasOwnProperty(i)&&!o[i][s]?(c&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),o[i][s]=!0):o.hasOwnProperty(i)||(o[i]={},o[i][s]=!0),t[s]||(t[s]=!0,n.push(a))}else n.push(a)}return e.definitions=n,e}(n),!1),i[t]=n,n}function p(){for(var e=Array.prototype.slice.call(arguments),t=e[0],n="string"==typeof t?t:t[0],r=1;r<e.length;r++)e[r]&&e[r].kind&&"Document"===e[r].kind?n+=e[r].loc.source.body:n+=e[r],n+=t[r];return u(n)}p.default=p,p.resetCaches=function(){i={},o={}},p.disableFragmentWarnings=function(){c=!1},p.enableExperimentalFragmentVariables=function(){s=!0},p.disableExperimentalFragmentVariables=function(){s=!1},e.exports=p},249:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return c});var r=n(0),a=n.n(r),i={sm:"sm",md:"md",lg:"lg",xl:"xl"},o={color:a.a.string,size:a.a.oneOf(Object.keys(i)),title:a.a.string},l={color:"currentColor",size:i.sm,title:null},c=function(e){switch(e){case i.sm:return"1em";case i.md:return"1.5em";case i.lg:return"2em";case i.xl:return"3em";default:return"1em"}}},292:function(e,t,n){"use strict";var r=n(87),a=n.n(r),i=n(88),o=n.n(i),l=n(89),c=n.n(l),s=n(90),u=n.n(s),p=n(91),f=n.n(p),h=n(1),m=n(0),d=n.n(m),y=function(e){function t(e){return a()(this,t),c()(this,u()(t).call(this,e))}return f()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.error;return 401===e.networkError.statusCode&&window.insights.chrome.auth.logout(),"Oops! There was an error loading Compliance data. If you need to contact Red Hat Support about this, this is the exact error: "+e.networkError.statusCode+" "+e}}]),t}(h.Component);y.propTypes={error:d.a.object},t.a=y},293:function(e,t,n){"use strict";var r=n(87),a=n.n(r),i=n(88),o=n.n(i),l=n(89),c=n.n(l),s=n(90),u=n.n(s),p=n(91),f=n.n(p),h=n(171),m=n.n(h),d=n(118),y=n(0),v=n.n(y),g=n(1),b=n.n(g),E=n(123),w=n(158),x=n(134),O=n(294),j=n.n(O),T=function(e){function t(e){var n;return a()(this,t),(n=c()(this,u()(t).call(this,e))).tabPaths={0:E.b.compliancePolicies,1:E.b.complianceSystems},n.redirect=n.redirect.bind(m()(m()(n))),n}return f()(t,e),o()(t,[{key:"redirect",value:function(e,t){this.props.history.push(this.tabPaths[t])}},{key:"render",value:function(){var e=this.props.match.path,t=Number(j()(this.tabPaths)[e]);return b.a.createElement(b.a.Fragment,null,b.a.createElement(w.a,{activeKey:t,onSelect:this.redirect,"aria-label":"Compliance Tabs"},b.a.createElement(x.a,{title:"Policies",eventKey:0}),b.a.createElement(x.a,{title:"Systems",eventKey:1})))}}]),t}(g.Component);T.propTypes={history:v.a.object,match:v.a.object},t.a=Object(d.routerParams)(T)},294:function(e,t,n){var r=n(295),a=n(296),i=n(232),o=Object.prototype.toString,l=a(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=o.call(t)),e[t]=n},r(i));e.exports=l},295:function(e,t){e.exports=function(e){return function(){return e}}},296:function(e,t,n){var r=n(297);e.exports=function(e,t){return function(n,a){return r(n,e,t(a),{})}}},297:function(e,t,n){var r=n(298);e.exports=function(e,t,n,a){return r(e,function(e,r,i){t(a,n(e),r,i)}),a}},298:function(e,t,n){var r=n(299),a=n(233);e.exports=function(e,t){return e&&r(e,t,a)}},299:function(e,t,n){var r=n(300)();e.exports=r},300:function(e,t){e.exports=function(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(!1===n(i[c],c,i))break}return t}}},522:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(236),o=n.n(i),l=n(137),c=n(46),s=n(128),u=n(130),p=n(78),f=n(129),h=n(135),m=n(71),d=n(47),y=n(136),v=n(76),g=n(118),b=n(87),E=n.n(b),w=n(88),x=n.n(w),O=n(89),j=n.n(O),T=n(90),k=n.n(T),P=n(91),C=n.n(P),W=n(73),_=n(0),z=n.n(_),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var L=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return i.state={},i.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},i.elements={},i.onResize=i.onResize.bind(i),i.onTruncate=i.onTruncate.bind(i),i.calcTargetWidth=i.calcTargetWidth.bind(i),i.measureWidth=i.measureWidth.bind(i),i.getLines=i.getLines.bind(i),i.renderLine=i.renderLine.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),M(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,n=this.onResize,r=document.createElement("canvas");this.canvasContext=r.getContext("2d"),t(function(){e&&e.parentNode.removeChild(e)}),window.addEventListener("resize",n)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,n=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(n)}},{key:"innerText",value:function(e){var t=document.createElement("div"),n="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var r=t[n],a=document.createElement("div");return a.innerHTML="foo<br/>bar","foo\nbar"!==a[n].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),r=t[n]),r}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"==typeof t&&(this.timeout=window.requestAnimationFrame(function(){t(e)}))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,n=this.calcTargetWidth,r=this.canvasContext,a=this.props.width;if(t){var i=a||Math.floor(t.parentNode.getBoundingClientRect().width);if(!i)return window.requestAnimationFrame(function(){return n(e)});var o=window.getComputedStyle(t),l=[o["font-weight"],o["font-style"],o["font-size"],o["font-family"]].join(" ");r.font=l,this.setState({targetWidth:i},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,n=t.lines,r=t.ellipsis,i=t.trimWhitespace,o=this.state.targetWidth,l=this.innerText,c=this.measureWidth,s=this.onTruncate,u=this.trimRight,p=[],f=l(e.text).split("\n").map(function(e){return e.split(" ")}),h=!0,m=this.ellipsisWidth(this.elements.ellipsis),d=1;d<=n;d++){var y=f[0];if(0!==y.length){var v=y.join(" ");if(c(v)<=o&&1===f.length){h=!1,p.push(v);break}if(d===n){for(var g=y.join(" "),b=0,E=g.length-1;b<=E;){var w=Math.floor((b+E)/2);c(g.slice(0,w+1))+m<=o?b=w+1:E=w-1}var x=g.slice(0,b);if(i)for(x=u(x);!x.length&&p.length;){x=u(p.pop())}v=a.a.createElement("span",null,x,r)}else{for(var O=0,j=y.length-1;O<=j;){var T=Math.floor((O+j)/2);c(y.slice(0,T+1).join(" "))<=o?O=T+1:j=T-1}if(0===O){d=n-1;continue}v=y.slice(0,O).join(" "),f[0].splice(0,O)}p.push(v)}else p.push(),f.shift(),d--}return s(h),p}},{key:"renderLine",value:function(e,t,n){if(t===n.length-1)return a.a.createElement("span",{key:t},e);var r=a.a.createElement("br",{key:t+"br"});return e?[a.a.createElement("span",{key:t},e),r]:r}},{key:"render",value:function(){var e=this,t=this.elements.target,n=this.props,r=n.children,i=n.ellipsis,o=n.lines,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["children","ellipsis","lines"]),c=this.state.targetWidth,s=this.getLines,u=this.renderLine,p=this.onTruncate,f=void 0;return"undefined"!=typeof window&&!(!t||!c)&&(o>0?f=s().map(u):(f=r,p(!1))),delete l.onTruncate,delete l.trimWhitespace,a.a.createElement("span",S({},l,{ref:function(t){e.elements.target=t}}),a.a.createElement("span",null,f),a.a.createElement("span",{ref:function(t){e.elements.text=t}},r),a.a.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},i))}}]),t}();L.propTypes={children:z.a.node,ellipsis:z.a.node,lines:z.a.oneOfType([z.a.oneOf([!1]),z.a.number]),trimWhitespace:z.a.bool,width:z.a.number,onTruncate:z.a.func},L.defaultProps={children:"",ellipsis:"…",lines:1,trimWhitespace:!1,width:0};var A=L,N=n(108),F=n(109),R=n(521),H=n(518),q=n(156),V=(n(315),function(e){function t(e){var n;return E()(this,t),(n=j()(this,k()(t).call(this,e))).onMouseover=function(){n.setState({cardTitle:n.policy.name})},n.onMouseout=function(){n.setState({cardTitle:a.a.createElement(A,{lines:1},n.policy.name)})},n.policy=e.policy,n.state={cardTitle:a.a.createElement(A,{lines:1},n.policy.name)},n}return C()(t,e),x()(t,[{key:"render",value:function(){var e=this.policy.compliant_host_count,t=this.policy.total_host_count,n=[{x:"Compliant",y:e},{x:"Non-compliant",y:t-e}],r=Math.floor(n[0].y/(n[0].y+n[1].y)*100)+"%",i=a.a.createElement("svg",{className:"chart-label",height:300,width:300},a.a.createElement(R.a,{style:{fontSize:26},text:r,textAnchor:"middle",verticalAnchor:"middle",x:150,y:135}),a.a.createElement(R.a,{style:{fill:"var(--pf-global--Color--200)"},text:"Systems above threshold",textAnchor:"middle",verticalAnchor:"middle",x:150,y:165}));return a.a.createElement(N.a,{"widget-id":this.policy.ref_id},a.a.createElement(F.a,null,a.a.createElement(m.b,{style:{fontWeight:"500",color:"var(--pf-global--Color--200)"},component:m.a.small},"External Policy"),a.a.createElement(h.a,null,a.a.createElement(m.b,{onMouseEnter:this.onMouseover.bind(this),onMouseLeave:this.onMouseout.bind(this),style:{fontWeight:"500"},component:m.a.h4},this.state.cardTitle)),a.a.createElement(h.a,{className:"chart-title"},a.a.createElement(y.a,null,a.a.createElement(l.a,{style:{display:"inline-flex"},span:12},a.a.createElement(h.a,null,a.a.createElement("span",{style:{fontSize:"30px",fontWeight:"500"}},e),a.a.createElement("span",{style:{fontWeight:"500",color:"var(--pf-global--Color--200)"}}," ","of"," "),a.a.createElement("span",{style:{fontSize:"30px",fontWeight:"500"}},t))),a.a.createElement(l.a,{span:8},a.a.createElement(m.b,{style:{fontWeight:"500",color:"var(--pf-global--Color--200)"},component:m.a.small},"Systems above compliance threshold"))))),a.a.createElement("hr",null),a.a.createElement(F.a,null,a.a.createElement(y.a,null,a.a.createElement(l.a,{style:{textAlign:"center"},span:12},a.a.createElement("div",{className:"chart-inline"},a.a.createElement("div",{className:"card-chart-container"},i,a.a.createElement(H.a,{data:n,identifier:this.policy.name.replace(/ /g,""),theme:q.a.light.blue,height:205,width:205}))))),a.a.createElement(h.a,{style:{textAlign:"right"}},a.a.createElement(m.b,{component:m.a.small,style:{fontSize:"16px"}},a.a.createElement(W.a,{to:"/policies/"+this.policy.id},"More details")))))}}]),t}(a.a.Component)),D=n(119),U=n(238),B=n.n(U),K=n(292);function G(){var e=o()(["\n{\n    allProfiles {\n        id\n        name\n        ref_id\n        description\n        total_host_count\n        compliant_host_count\n    }\n}\n"]);return G=function(){return e},e}var I=B()(G()),J=Object(g.routerParams)(function(){return a.a.createElement(D.Query,{query:I},function(e){var t=e.data,n=e.error,r=e.loading;if(n)return a.a.createElement(K.a,{error:n});if(r)return"Loading Policies...";var i=t.allProfiles,o=[];return o=i.length?i.map(function(e,t){return a.a.createElement(l.a,{sm:12,md:12,lg:6,xl:4,key:t},a.a.createElement(V,{key:t,policy:e}))}):a.a.createElement(c.a,null,a.a.createElement(s.a,null,a.a.createElement(u.a,{size:"xl",title:"Compliance",icon:v.a}),a.a.createElement("br",null),a.a.createElement(p.a,{size:"lg"},"Welcome to Compliance"),a.a.createElement(f.a,null,a.a.createElement(h.a,null,"You have not uploaded any reports yet. Please generate a report using OpenSCAP:",a.a.createElement(m.b,{component:m.a.blockquote},"oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_standard --results scan.xml /usr/share/xml/scap/ssg/content/ssg-rhel7-ds.xml"),"and upload it using the following command:",a.a.createElement(m.b,{component:m.a.blockquote},"sudo insights-client --verbose --payload scan.xml --content-type application/vnd.redhat.compliance.something+tgz"))),a.a.createElement(d.c,{variant:"primary",component:"a",target:"_blank",href:"https://www.open-scap.org/getting-started/"},"Get started with OpenSCAP"))),a.a.createElement("div",{className:"policies-donuts"},a.a.createElement(y.a,{gutter:"md"},o))})}),Q=n(293);t.default=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.PageHeader,null,a.a.createElement(g.PageHeaderTitle,{title:"Compliance"}),a.a.createElement(Q.a,null)),a.a.createElement(g.Main,null,a.a.createElement(J,null)))}},76:function(e,t,n){"use strict";var r=n(223),a=Object(r.a)({name:"ClipboardCheckIcon",height:512,width:384,svgPath:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm121.2 231.8l-143 141.8c-4.7 4.7-12.3 4.6-17-.1l-82.6-83.3c-4.7-4.7-4.6-12.3.1-17L99.1 285c4.7-4.7 12.3-4.6 17 .1l46 46.4 106-105.2c4.7-4.7 12.3-4.6 17 .1l28.2 28.4c4.7 4.8 4.6 12.3-.1 17z",yOffset:"",xOffset:"",transform:""});t.a=a}}]);
//# sourceMappingURL=../sourcemaps/CompliancePolicies.js.map