(self.webpackChunkcompliance_frontend=self.webpackChunkcompliance_frontend||[]).push([[2072],{82648:(e,t,n)=>{(t=n(23645)(!1)).push([e.id,".threshold-tooltip{margin-bottom:var(--pf-global--spacer--md)}.grey-icon{color:var(--pf-global--Color--200)}.policy-details{padding-top:10px}.report-details-button{text-align:right}\n",""]),e.exports=t},44641:(e,t,n)=>{"use strict";n.r(t),n.d(t,{QUERY:()=>D,ReportDetails:()=>R,default:()=>N});var r=n(59713),a=n.n(r),l=n(319),o=n.n(l),i=n(28655),c=n.n(i),s=n(77865),p=n.n(s),m=n(91346),u=n(55490),d=n(34925),y=n(45697),f=n.n(y),E=n(47194),h=n(46829),g=n(44119),v=n.n(g),b=n(73581),O=n(52067),w=n(98627),k=n(35115),_=n(85974),C=n(42564),P=n(37311),S=n(21157),j=n(52998),I=n(93188),G=(n(94816),n(19223),n(55186)),H=n(49690);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=c()(["\nquery Profile($policyId: String!){\n    profile(id: $policyId) {\n        id\n        name\n        refId\n        testResultHostCount\n        compliantHostCount\n        unsupportedHostCount\n        complianceThreshold\n        majorOsVersion\n        lastScanned\n        policyType\n        policy {\n            id\n            name\n        }\n        benchmark {\n            id\n            version\n        }\n        businessObjective {\n            id\n            title\n        }\n    }\n}\n"]);return T=function(){return e},e}var D=v()(T()),R=function(e){var t,n,r,a,l,i,c=e.route,s=(0,C.Z)("showSsgVersions"),y=(0,C.Z)("newInventory"),f=(0,E.useParams)().report_id,g=(0,h.useQuery)(D,{variables:{policyId:f}}),v=g.data,x=g.error,T=g.loading,R=[],N="loading-donut",V={};if(!T&&v){var Z;r=(V=v.profile).policy?V.policy.name:V.name,t=!(null===(Z=V)||void 0===Z||!Z.policy)&&s,i="Report: ".concat(r);var M=V.compliantHostCount,B=V.testResultHostCount;N=V.name.replace(/ /g,""),R=[{x:"Compliant",y:B?M:"0"},{x:"Non-compliant",y:B-M}],n=0===B&&[m.Z.value]||[d.Z.value,u.Z.value],a=[{name:R[0].y+" "+(0,_._6)(R[0].y,"system")+" compliant"},{name:R[1].y+" "+(0,_._6)(R[1].y,"system")+" non-compliant"}],l=B?(0,_.P0)(Math.floor(R[0].y/(R[0].y+R[1].y)*100)):0}var K=[F({key:"facts.compliance.display_name",title:"Name",props:{width:30}},y&&{key:"display_name",renderFunc:H.B3})].concat(o()(t?[{key:"facts.compliance",title:"SSG version",props:{width:5},renderFunc:function(e){return e&&p().createElement(S.n1.SSGVersion,{supported:e.supported,ssgVersion:e.ssg_version})}}]:[]),[F({key:"facts.compliance.rules_failed",title:"Failed rules",props:{width:5}},y&&{key:"rulesFailed",renderFunc:function(e,t){return p().createElement(E.Link,{to:{pathname:"/systems/".concat(t)}}," ",e," ")}}),F({key:"facts.compliance.compliance_score",title:"Compliance score",props:{width:5}},y&&{key:"score",renderFunc:function(e,t,n){return(0,P.OF)(n)}}),F({key:"facts.compliance.last_scanned",title:"Last scanned",props:{width:10}},y&&{key:"lastScanned",renderFunc:function(e){return e instanceof Date?p().createElement(k.DateFormat,{date:Date.parse(e),type:"relative"}):e}})]),q=y?I.e_:I.r0;return(0,j.a)(c,r),p().createElement(P.tC,{stateValues:{error:x,data:v,loading:T}},p().createElement(P.K7,{stateKey:"loading"},p().createElement(k.PageHeader,null,p().createElement(P.Tq,null)),p().createElement(k.Main,null,p().createElement(k.EmptyTable,null,p().createElement(k.Spinner,null)))),p().createElement(P.K7,{stateKey:"data"},p().createElement(k.PageHeader,null,p().createElement(w.Breadcrumb,null,p().createElement(P.MU,{to:"/"},"Compliance"),p().createElement(P.MU,{to:"/reports"},"Reports"),p().createElement(w.BreadcrumbItem,{isActive:!0},i)),p().createElement(w.Grid,{hasGutter:!0},p().createElement(w.GridItem,{sm:9,md:9,lg:9,xl:9},p().createElement(k.PageHeaderTitle,{title:i}),p().createElement(P.Zr,null,V.policyType)),p().createElement(w.GridItem,{className:"report-details-button",sm:3,md:3,lg:3,xl:3},p().createElement(P.mR,{state:{profile:V},to:"/reports/".concat(V.id,"/delete")},p().createElement(w.Button,{variant:"link",isInline:!0},"Delete report")))),p().createElement(w.Grid,{hasGutter:!0},p().createElement(w.GridItem,{sm:12,md:12,lg:12,xl:6},p().createElement("div",{className:"chart-inline"},p().createElement("div",{className:"chart-container"},p().createElement(b.HS,{data:R,identifier:N,title:l,subTitle:"Compliant",themeVariant:O.py.light,colorScale:n,style:{fontSize:20},innerRadius:88,width:462,legendPosition:"right",legendData:a,legendOrientation:"vertical",padding:{bottom:20,left:0,right:250,top:20}}))),V.unsupportedHostCount>0&&p().createElement(w.Text,null,p().createElement(P.cT,{showHelpIcon:!0},p().createElement("strong",{className:"ins-c-warning-text"},V.unsupportedHostCount," systems not supported")))),p().createElement(w.GridItem,{sm:12,md:12,lg:12,xl:6},p().createElement(P.vu,{profile:V})))),p().createElement(k.Main,null,p().createElement(w.Grid,{hasGutter:!0},p().createElement(w.GridItem,{span:12},p().createElement(q,{query:G.Ep,showOnlySystemsWithTestResults:!0,compliantFilter:!0,defaultFilter:"with_results_for_policy_id = ".concat(V.id),policyId:V.id,columns:K}))))))};R.propTypes={route:f().object};const N=R},19223:(e,t,n)=>{"use strict";var r=n(93379),a=n.n(r),l=n(82648),o=n.n(l),i=a()(o(),{insert:"head",singleton:!1});if(!o().locals||e.hot.invalidate){var c=o().locals;e.hot.accept(82648,(t=>{l=n(82648),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if(e[r]!==t[r])return!1;for(r in t)if(!e[r])return!1;return!0}(c,(o=n.n(l))().locals)?(c=o().locals,i(o())):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),o().locals}}]);
//# sourceMappingURL=ReportDetails.ea4fa5c68e54c853f912.js.map