(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1205:function(e,t,n){var a=n(1206);"string"==typeof a&&(a=[[e.i,a,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};n(7)(a,l);a.locals&&(e.exports=a.locals)},1206:function(e,t,n){(t=n(6)(!1)).push([e.i,".threshold-tooltip{margin-bottom:var(--pf-global--spacer--md)}.grey-icon{color:var(--pf-global--Color--200)}.policy-details{padding-top:10px}.report-details-button{text-align:right}\n",""]),e.exports=t},1225:function(e,t,n){"use strict";n.r(t);var a=n(566),l=n.n(a),o=n(520),r=n.n(o),i=n(1),c=n.n(i),s=n(500),m=n(683),p=n(684),d=n(0),u=n.n(d),f=n(569),y=n(537),g=n(525),b=n(529),E=n.n(b),h=n(68),v=n(1222),O=n(1210),C=n(760),j=n(761),w=n(688),k=n(515),I=n.n(k),x=(n(614),n(1205),n(752)),D=n(691),S=n(579),R=n(76),H=n(639),T=function(e){var t=e.policyId,n=e.isModalOpen,a=e.onClose,o=e.onDelete,r=Object(i.useState)(n),m=l()(r,2),p=m[0],d=m[1],u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d(!1),a(e)},f=Object(s.a)(S.f,{onCompleted:function(){Object(H.a)(Object(R.addNotification)({variant:"success",title:"Removed report"})),o(),u(!0)},onError:function(e){Object(H.a)(Object(R.addNotification)({variant:"danger",title:"Error removing report",description:e.message})),u()}}),y=l()(f,1)[0];return Object(i.useEffect)((function(){d(n)}),[n]),c.a.createElement(x.a,{isSmall:!0,title:"Delete report",isOpen:p,isFooterLeftAligned:!0,onClose:u,actions:[c.a.createElement(w.a,{key:"destroy","aria-label":"delete",variant:"danger",onClick:function(){return y({variables:{input:{profileId:t}}})}},"Delete report"),c.a.createElement(w.a,{key:"cancel",variant:"secondary",onClick:function(){return u()}},"Cancel")]},c.a.createElement(D.a,null,"Deleting a report is permanent and cannot be undone."))};T.propTypes={onClose:u.a.func,isModalOpen:u.a.bool,onDelete:u.a.func,policyId:u.a.string},T.defaultProps={onDelete:function(){},onClose:function(){}};var M=T;function N(){var e=r()(["\nquery Profile($policyId: String!){\n    profile(id: $policyId) {\n        id\n        name\n        refId\n        totalHostCount\n        compliantHostCount\n        complianceThreshold\n        majorOsVersion\n        lastScanned\n        policy {\n            id\n        }\n        benchmark {\n            version\n        }\n        businessObjective {\n            id\n            title\n        }\n    }\n}\n"]);return N=function(){return e},e}n.d(t,"QUERY",(function(){return P})),n.d(t,"ReportDetails",(function(){return _}));var P=I()(N()),_=function(e){var t,n,a=e.match,o=e.history,r=Object(s.b)(P,{variables:{policyId:a.params.report_id}}),d=r.data,u=r.error,b=r.loading,E=Object(i.useState)(!1),k=l()(E,2),I=k[0],x=k[1],D=window.insights.chrome.isBeta(),S=[],R="loading-donut",H={};if(!b&&d){var T=(H=d.profile).compliantHostCount,N=H.totalHostCount;R=H.name.replace(/ /g,""),t=[{name:(S=[{x:"Compliant",y:T},{x:"Non-compliant",y:N-T}])[0].y+" "+Object(y.b)(S[0].y,"system")+" compliant"},{name:S[1].y+" "+Object(y.b)(S[1].y,"system")+" non-compliant"}],n=Object(y.a)(Math.floor(S[0].y/(S[0].y+S[1].y)*100))}return c.a.createElement(g.r,{stateValues:{error:u,data:d,loading:b}},c.a.createElement(g.q,{stateKey:"loading"},c.a.createElement(h.PageHeader,null,c.a.createElement(g.m,null)),c.a.createElement(h.Main,null,c.a.createElement(h.EmptyTable,null,c.a.createElement(h.Spinner,null)))),c.a.createElement(g.q,{stateKey:"data"},c.a.createElement(h.PageHeader,null,c.a.createElement(C.a,null,c.a.createElement(j.a,{to:"".concat(D?"/beta/insights":"/rhel","/compliance/reports")},"Reports"),c.a.createElement(j.a,{isActive:!0},H.name)),c.a.createElement(m.a,{gutter:"lg"},c.a.createElement(p.a,{xl:8},c.a.createElement(h.PageHeaderTitle,{title:H.name+" report"})),c.a.createElement(p.a,{className:"report-details-button",xl:4},c.a.createElement(w.a,{isInline:!0,variant:"link",onClick:function(){return x(!0)}},"Delete Report"))),c.a.createElement(m.a,{gutter:"md"},c.a.createElement(p.a,{sm:12,md:12,lg:12,xl:6},c.a.createElement("div",{className:"chart-inline"},c.a.createElement("div",{className:"chart-container"},c.a.createElement(v.a,{data:S,identifier:R,title:n,subTitle:"Compliant",themeColor:O.q.blue,themeVariant:O.r.light,style:{fontSize:20},innerRadius:88,width:462,legendPosition:"right",legendData:t,legendOrientation:"vertical",padding:{bottom:20,left:0,right:250,top:20}})))),c.a.createElement(p.a,{sm:12,md:12,lg:12,xl:6},c.a.createElement(g.n,{profile:H})))),c.a.createElement(h.Main,null,c.a.createElement(m.a,{gutter:"md"},c.a.createElement(p.a,{span:12},c.a.createElement(f.b,{showOnlySystemsWithTestResults:!0,policyId:H.id,columns:[{key:"facts.compliance.display_name",title:"System name",props:{width:30}},{key:"facts.compliance.rules_failed",title:"Rules failed",props:{width:5}},{key:"facts.compliance.compliance_score",title:"Compliance score",props:{width:5}},{key:"facts.compliance.last_scanned",title:"Last scanned",props:{width:10}}]})))),c.a.createElement(M,{isModalOpen:I,policyId:H.id,onClose:function(e){x(!1),e&&o.push("".concat(D?"/beta/insights":"/rhel","/compliance/reports"))}})))};_.propTypes={match:u.a.object,history:u.a.object};t.default=E()(_)}}]);
//# sourceMappingURL=../sourcemaps/ReportDetails.js.map