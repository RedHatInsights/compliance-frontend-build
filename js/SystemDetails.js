(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{645:function(e,t,n){"use strict";function a(e,t){this.props.history.push(t)}n.d(t,"a",function(){return a})},750:function(e,t,n){var a=n(751),r=n(752),s=n(753);e.exports=function(e){return a(e)||r(e)||s()}},751:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},752:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},753:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},766:function(e,t,n){"use strict";n.r(t);var a,r=n(125),s=n.n(r),i=n(126),l=n.n(i),o=n(127),c=n.n(o),u=n(128),m=n.n(u),p=n(129),d=n.n(p),y=n(315),h=n.n(y),f=n(614),v=n.n(f),E=n(2),g=n.n(E),b=n(0),P=n.n(b),w=n(213),I=n(645),k=n(200),S=n.n(k),R=n(644),x=n.n(R),C=n(223),_=n.n(C),O=n(130),N=n(604),j=n(316),T=Object(w.registry)()(a=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this,e))).state={InventoryCmp:function(){return g.a.createElement("div",null,"Loading...")}},n.fetchInventory=n.fetchInventory.bind(h()(h()(n))),n.fetchInventory(),n}return d()(t,e),l()(t,[{key:"fetchInventory",value:function(){var e=_()(S.a.mark(function e(){var t,n,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:g.a,reactRouterDom:O,reactCore:N,reactIcons:j});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithDetail,this.getRegistry().register(x()({},a())),this.setState({InventoryCmp:n().InventoryDetail});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.InventoryCmp;return g.a.createElement(g.a.Fragment,null,g.a.createElement(e,{hideBack:!0}))}}]),t}(g.a.Component))||a;T.propTypes={entity:P.a.object};var A=T,$=n(667),D=n(665),F=n(652),L=n(655),B=n(663),J=n(664),q=n(697),z=n(636),H=n(687),M=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this))).policy=e.policy,n}return d()(t,e),l()(t,[{key:"complianceIcon",value:function(e){return e?g.a.createElement("div",{style:{fontSize:"large",color:"#92d400"},id:"policy_compliant"},g.a.createElement(F.a,null)," Compliant"):g.a.createElement("div",{style:{fontSize:"large",color:"#a30000"},id:"policy_compliant"},g.a.createElement(L.a,null)," Noncompliant")}},{key:"render",value:function(){var e=this.policy.rules_passed+this.policy.rules_failed;return g.a.createElement(B.a,null,g.a.createElement(J.a,null,g.a.createElement(q.a,null,g.a.createElement(z.b,{style:{marginBottom:"0px"},component:z.a.small},"External Policy"),g.a.createElement(z.b,{style:{marginTop:"0px"},component:z.a.h4},this.policy.name)),g.a.createElement(q.a,null,this.complianceIcon(this.policy.compliant),g.a.createElement(z.b,{component:z.a.small},this.policy.rules_passed," of ",e," passed"),g.a.createElement(z.b,{component:z.a.medium},"Profile ",g.a.createElement("br",null),this.policy.ref_id))),g.a.createElement(H.a,null,g.a.createElement(q.a,null,g.a.createElement(z.b,{component:z.a.small},"Last scanned: ",this.policy.last_scanned))))}}]),t}(g.a.Component),Q=function(e){function t(e){return s()(this,t),c()(this,m()(t).call(this,e))}return d()(t,e),l()(t,[{key:"systemPolicyCards",value:function(){return this.props.policies.map(function(e,t){return g.a.createElement($.a,{span:4,key:t},g.a.createElement(M,{policy:e}))})}},{key:"render",value:function(){return void 0===this.props.policies?"Loading policy information...":g.a.createElement("div",{id:"system_policy_cards"},g.a.createElement(D.a,{gutter:"md"},this.systemPolicyCards()))}}]),t}(g.a.Component);Q.propTypes={policies:P.a.array};var U=Object(w.routerParams)(Q),W=n(750),G=n.n(W),K=n(686),V=n(656),X=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this,e))).state={openNodes:[],page:1,itemsPerPage:10,rows:n.rulesToRows(n.props.profileRules),currentRows:[]},n.currentRows(1,10).then(function(e){n.state.currentRows=e}),n.onExpandClick=n.onExpandClick.bind(h()(h()(n))),n.setPage=n.setPage.bind(h()(h()(n))),n.setPerPage=n.setPerPage.bind(h()(h()(n))),n.onItemSelect=n.onItemSelect.bind(h()(h()(n))),n}return d()(t,e),l()(t,[{key:"setPage",value:function(e){var t=this;this.currentRows(e,this.state.itemsPerPage).then(function(n){t.setState(function(){return{page:e,currentRows:n}})})}},{key:"setPerPage",value:function(e){var t=this;this.currentRows(this.state.page,e).then(function(n){t.setState(function(){return{itemsPerPage:e,currentRows:n}})})}},{key:"currentRows",value:function(e,t){var n=this.state.rows.slice((e-1)*t*2,e*t*2),a=n.map(function(e){if(5===e.cells.length)return e.cells[1]}).filter(function(e){return e}).map(function(e){return"compliance:"+e});return window.insights.chrome.auth.getUser().then(function(){return fetch("/r/insights/platform/remediations/v1/resolutions",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({issues:a})}).then(function(e){return e.ok?e.json():{}})}).then(function(e){return n=n.map(function(t){return 5===t.cells.length&&(e["compliance:"+t.cells[1]]?t.cells.push(g.a.createElement(w.Ansible,null)):t.cells.push(g.a.createElement(w.Ansible,{unsupported:!0}))),t})})}},{key:"onItemSelect",value:function(e,t,n){var a=this.state,r=a.rows;r[(a.page-1)*a.itemsPerPage*2+Number(t)].selected=n,this.setState({rows:r})}},{key:"rulesToRows",value:function(e){var t=[];return e.forEach(function(e){return e.rules.forEach(function(n,a){t.push({children:[2*a+1],cells:[g.a.createElement(z.b,{key:a,component:z.a.a},n.title),n.ref_id,e.profile,n.severity,n.compliant?g.a.createElement(F.a,{style:{color:"#92d400"}}):g.a.createElement(L.a,{style:{color:"#a30000"}})]}),t.push({isOpen:!1,cells:[{title:g.a.createElement(g.a.Fragment,{key:a},g.a.createElement("div",{id:"rule-description"},g.a.createElement("b",null,"Description"),g.a.createElement("br",null),g.a.createElement("p",null,n.description)),g.a.createElement("br",null),g.a.createElement("div",{id:"rule-rationale"},g.a.createElement("b",null,"Rationale"),g.a.createElement("br",null),g.a.createElement("p",null,n.rationale))),colSpan:5}]})})}),t}},{key:"onExpandClick",value:function(e,t,n){var a=(this.state.page-1)*this.state.itemsPerPage*2+Number(n),r=this.state.rows[a],s=!r.active,i=this.state.openNodes;r.active=s,s?i=G()(i).concat(G()(t.children)):r.children.forEach(function(e){i.splice(i.indexOf(e),1)}),this.setState({openNodes:i,rows:this.state.rows})}},{key:"selectedRules",value:function(){return this.state.rows.filter(function(e){return e.selected}).map(function(e){return e.cells[1]})}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement(D.a,{gutter:"sm"},g.a.createElement($.a,{span:10},g.a.createElement(w.Input,{id:"search",type:"text",style:{width:"200px"}})," ",g.a.createElement(V.a,{style:{paddingTop:"4px"}})),g.a.createElement($.a,{span:2},g.a.createElement(K.a,{selectedRules:this.selectedRules()})),g.a.createElement($.a,{span:12},g.a.createElement(w.Table,{variant:"large",header:["Rule","Reference ID","Policy","Severity","Passed","Remediation"],hasCheckbox:!0,onItemSelect:this.onItemSelect,rows:this.state.currentRows.map(function(t,n){if(!t.hasOwnProperty("isOpen"))return t;var a=(e.state.page-1)*e.state.itemsPerPage*2+Number(n);return t.isOpen=-1!==e.state.openNodes.indexOf(a),t}),expandable:!0,onExpandClick:this.onExpandClick,footer:g.a.createElement(w.Pagination,{numberOfItems:this.state.rows.length,onPerPageSelect:this.setPerPage,page:this.state.page,onSetPage:this.setPage,itemsPerPage:this.state.itemsPerPage})}))))}}]),t}(g.a.Component);X.propTypes={profileRules:P.a.array};var Y=Object(w.routerParams)(X),Z=n(214),ee=n(619);function te(){var e=v()(["\nquery System($systemId: String!){\n    system(id: $systemId) {\n        id\n        name\n        profiles {\n            name\n            ref_id\n            compliant(system_id: $systemId)\n            rules_failed(system_id: $systemId)\n            rules_passed(system_id: $systemId)\n            last_scanned(system_id: $systemId)\n            rules {\n                title\n                severity\n                rationale\n                ref_id\n                description\n                compliant(system_id: $systemId)\n            }\n        }\n\t}\n}\n"]);return te=function(){return e},e}var ne=n.n(ee)()(te()),ae=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this,e))).onNavigate=I.a.bind(h()(h()(n))),n}return d()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.inventoryId;return g.a.createElement(Z.Query,{query:ne,variables:{systemId:t}},function(t){var n=t.data,a=t.error,r=t.loading,s={};return a?"Oops! Error loading System data: "+a:r?g.a.createElement(w.PageHeader,null,"Loading System details..."):(s=n.system.profiles.map(function(e){return{profile:e.name,rules:e.rules}}),g.a.createElement(g.a.Fragment,null,g.a.createElement(w.PageHeader,null,g.a.createElement(w.Breadcrumbs,{style:{padding:"0px"},items:[{title:"Systems",navigate:"/systems"}],current:n.system.name,onNavigate:e.onNavigate}),g.a.createElement(A,null),g.a.createElement("br",null)),g.a.createElement(w.Main,null,g.a.createElement(U,{policies:n.system.profiles}),g.a.createElement("br",null),g.a.createElement(B.a,null,g.a.createElement(J.a,null,g.a.createElement(Y,{profileRules:s}))))))})}}]),t}(g.a.Component);ae.propTypes={match:P.a.object};t.default=Object(w.routerParams)(ae)}}]);
//# sourceMappingURL=../sourcemaps/SystemDetails.js.map