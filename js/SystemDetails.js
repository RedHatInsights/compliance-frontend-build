(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{680:function(e,t,n){"use strict";function a(e,t){this.props.history.push(t)}n.d(t,"a",function(){return a})},751:function(e,t,n){"use strict";n.r(t);var a,r=n(115),s=n.n(r),l=n(116),i=n.n(l),o=n(117),c=n.n(o),u=n(118),m=n.n(u),p=n(119),d=n.n(p),y=n(305),h=n.n(y),f=n(654),E=n.n(f),v=n(2),g=n.n(v),P=n(0),b=n.n(P),w=n(183),I=n(680),k=n(157),R=n.n(k),S=n(188),_=n.n(S),C=n(189),x=n.n(C),O=n(120),N=n(645),T=n(184),$=Object(w.registry)()(a=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this,e))).state={InventoryCmp:function(){return g.a.createElement("div",null,"Loading...")}},n.fetchInventory=n.fetchInventory.bind(h()(h()(n))),n.fetchInventory(),n}return d()(t,e),i()(t,[{key:"fetchInventory",value:function(){var e=x()(R.a.mark(function e(){var t,n,a;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:g.a,reactRouterDom:O,reactCore:N,reactIcons:T});case 2:t=e.sent,n=t.inventoryConnector,a=t.mergeWithDetail,this.getRegistry().register(_()({},a())),this.setState({InventoryCmp:n().InventoryDetail});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.InventoryCmp;return g.a.createElement(g.a.Fragment,null,g.a.createElement(e,null))}}]),t}(g.a.Component))||a;$.propTypes={entity:b.a.object};var j=$,D=n(333),F=n(332),L=n(208),q=n(210),z=n(330),B=n(331),H=n(347),J=n(147),M=n(336),Q=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this))).policy=e.policy,n}return d()(t,e),i()(t,[{key:"complianceIcon",value:function(e){return e?g.a.createElement("div",{style:{fontSize:"large",color:"#92d400"},id:"policy_compliant"},g.a.createElement(L.a,null)," Compliant"):g.a.createElement("div",{style:{fontSize:"large",color:"#a30000"},id:"policy_compliant"},g.a.createElement(q.a,null)," Noncompliant")}},{key:"render",value:function(){var e=this.policy.rules_passed+this.policy.rules_failed;return g.a.createElement(z.a,null,g.a.createElement(B.a,null,g.a.createElement(H.a,null,g.a.createElement(J.b,{style:{marginBottom:"0px"},component:J.a.small},"External Policy"),g.a.createElement(J.b,{style:{marginTop:"0px"},component:J.a.h4},this.policy.name)),g.a.createElement(H.a,null,this.complianceIcon(this.policy.compliant),g.a.createElement(J.b,{component:J.a.small},this.policy.rules_passed," of ",e," passed"),g.a.createElement(J.b,{component:J.a.medium},"Profile ",g.a.createElement("br",null),this.policy.ref_id))),g.a.createElement(M.a,null,g.a.createElement(H.a,null,g.a.createElement(J.b,{component:J.a.small},"Last scanned: ",this.policy.last_scanned))))}}]),t}(g.a.Component),W=function(e){function t(e){return s()(this,t),c()(this,m()(t).call(this,e))}return d()(t,e),i()(t,[{key:"systemPolicyCards",value:function(){return this.props.policies.map(function(e,t){return g.a.createElement(D.a,{span:4,key:t},g.a.createElement(Q,{policy:e}))})}},{key:"render",value:function(){return void 0===this.props.policies?"Loading policy information...":g.a.createElement("div",{id:"system_policy_cards"},g.a.createElement(F.a,{gutter:"md"},this.systemPolicyCards()))}}]),t}(g.a.Component);W.propTypes={policies:b.a.array};var A=Object(w.routerParams)(W),G=n(300),K=n.n(G),U=n(679),V=n(211),X=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this,e))).state={openNodes:[],page:1,itemsPerPage:10,rows:n.rulesToRows(n.props.profileRules),currentRows:[]},n.state.currentRows=n.currentRows(1,10),n.onExpandClick=n.onExpandClick.bind(h()(h()(n))),n.setPage=n.setPage.bind(h()(h()(n))),n.setPerPage=n.setPerPage.bind(h()(h()(n))),n.onItemSelect=n.onItemSelect.bind(h()(h()(n))),n}return d()(t,e),i()(t,[{key:"setPage",value:function(e){var t=this;this.setState(function(){return{page:e,currentRows:t.currentRows(e,t.state.itemsPerPage)}})}},{key:"setPerPage",value:function(e){var t=this;this.setState(function(){return{itemsPerPage:e,currentRows:t.currentRows(t.state.page,e)}})}},{key:"currentRows",value:function(e,t){return this.state.rows.slice((e-1)*t*2,e*t*2)}},{key:"onItemSelect",value:function(e,t,n){var a=this.state,r=a.rows,s=a.page,l=a.itemsPerPage;r[(1===s?0:s*l-l)+Number(t)].selected=n,this.setState({rows:r})}},{key:"rulesToRows",value:function(e){var t=[];return e.forEach(function(e){return e.rules.forEach(function(n,a){t.push({children:[2*a+1],cells:[g.a.createElement(J.b,{key:a,component:J.a.a},n.title),n.ref_id,e.profile,n.severity,n.compliant?g.a.createElement(L.a,{style:{color:"#92d400"}}):g.a.createElement(q.a,{style:{color:"#a30000"}})]}),t.push({isOpen:!1,cells:[{title:g.a.createElement(g.a.Fragment,{key:a},g.a.createElement("div",{id:"rule-description"},g.a.createElement("b",null,"Description"),g.a.createElement("br",null),g.a.createElement("p",null,n.description)),g.a.createElement("br",null),g.a.createElement("div",{id:"rule-rationale"},g.a.createElement("b",null,"Rationale"),g.a.createElement("br",null),g.a.createElement("p",null,n.rationale))),colSpan:5}]})})}),t}},{key:"onExpandClick",value:function(e,t,n){var a=this.state.rows[n],r=!a.active,s=this.state.openNodes;a.active=r,r?s=K()(s).concat(K()(t.children)):a.children.forEach(function(e){s.splice(s.indexOf(e),1)}),this.setState({openNodes:s,rows:this.state.rows})}},{key:"selectedRules",value:function(){return this.state.rows.filter(function(e){return e.selected}).map(function(e){return e.cells[1]})}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement(F.a,{gutter:"sm"},g.a.createElement(D.a,{span:10},g.a.createElement(w.Input,{id:"search",type:"text",style:{width:"200px"}})," ",g.a.createElement(V.a,{style:{paddingTop:"4px"}})),g.a.createElement(D.a,{span:2},g.a.createElement(U.a,{selectedRules:this.selectedRules()})),g.a.createElement(D.a,{span:12},g.a.createElement(w.Table,{variant:"large",header:["Rule","Reference ID","Policy","Severity","Passed"],hasCheckbox:!0,onItemSelect:this.onItemSelect,rows:this.state.currentRows.map(function(t,n){return t.hasOwnProperty("isOpen")?(t.isOpen=-1!==e.state.openNodes.indexOf(n),t):t}),expandable:!0,onExpandClick:this.onExpandClick,footer:g.a.createElement(w.Pagination,{numberOfItems:this.state.rows.length,onPerPageSelect:this.setPerPage,page:this.state.page,onSetPage:this.setPage,itemsPerPage:this.state.itemsPerPage})}))))}}]),t}(g.a.Component);X.propTypes={profileRules:b.a.array};var Y=Object(w.routerParams)(X),Z=n(185),ee=n(659);function te(){var e=E()(["\nquery System($systemId: String!){\n    system(id: $systemId) {\n        id\n        name\n        profiles {\n            name\n            ref_id\n            compliant(system_id: $systemId)\n            rules_failed(system_id: $systemId)\n            rules_passed(system_id: $systemId)\n            last_scanned(system_id: $systemId)\n            rules {\n                title\n                severity\n                rationale\n                ref_id\n                description\n                compliant(system_id: $systemId)\n            }\n        }\n\t}\n}\n"]);return te=function(){return e},e}var ne=n.n(ee)()(te()),ae=function(e){function t(e){var n;return s()(this,t),(n=c()(this,m()(t).call(this,e))).onNavigate=I.a.bind(h()(h()(n))),n}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.inventoryId;return g.a.createElement(Z.Query,{query:ne,variables:{systemId:t}},function(t){var n=t.data,a=t.error,r=t.loading,s={};return a?"Oops! Error loading System data: "+a:r?g.a.createElement(w.PageHeader,null,"Loading System details..."):(s=n.system.profiles.map(function(e){return{profile:e.name,rules:e.rules}}),g.a.createElement(g.a.Fragment,null,g.a.createElement(w.PageHeader,null,g.a.createElement(w.Breadcrumbs,{style:{padding:"0px"},items:[{title:"Systems",navigate:"/systems"}],current:n.system.name,onNavigate:e.onNavigate}),g.a.createElement(j,null)),g.a.createElement(w.Main,null,g.a.createElement(A,{policies:n.system.profiles}),g.a.createElement("br",null),g.a.createElement(z.a,null,g.a.createElement(B.a,null,g.a.createElement(Y,{profileRules:s}))))))})}}]),t}(g.a.Component);ae.propTypes={match:b.a.object};t.default=Object(w.routerParams)(ae)}}]);
//# sourceMappingURL=../sourcemaps/SystemDetails.js.map