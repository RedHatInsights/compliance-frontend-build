(self.webpackChunkcompliance_frontend=self.webpackChunkcompliance_frontend||[]).push([[322],{78190:(e,n,t)=>{"use strict";t.r(n),t.d(n,{Reports:()=>T,default:()=>k});var r=t(28655),o=t.n(r),a=t(77865),l=t.n(a),i=t(45697),s=t.n(i),c=t(47194),u=t(46829),m=t(44119),p=t.n(m),d=t(98627),f=t(68433),h=t(44510),v=t(73323),E=t(37311),b=t(42564);function w(){var e=o()(["\nquery Profiles($filter: String!) {\n    profiles(search: $filter, limit: 1000){\n        edges {\n            node {\n                id\n                name\n                refId\n                description\n                policyType\n                totalHostCount\n                testResultHostCount\n                compliantHostCount\n                unsupportedHostCount\n                majorOsVersion\n                ssgVersion\n                complianceThreshold\n                businessObjective {\n                    id\n                    title\n                }\n                policy {\n                    id\n                    name\n                    benchmark {\n                        id\n                        version\n                    }\n                }\n                benchmark {\n                    id\n                    version\n                }\n            }\n        }\n\n    }\n}\n"]);return w=function(){return e},e}var y=p()(w()),C=function(e){return e.showTableView?l().createElement(v.c,{colSize:3,rowSize:10}):l().createElement(E.iP,null)};C.propTypes={showTableView:s().bool};var g=function(){return l().createElement(f.m,null,l().createElement(f.B,{title:"Reports",className:"pad-bottom"}),l().createElement(d.Alert,{variant:"info",isInline:!0,title:"Support for external reports has been removed.",actionLinks:l().createElement("a",{href:"https://access.redhat.com/solutions/5249481"},"Learn more")},l().createElement(d.Text,{variant:"p"},"Support for SCAP policies not defined within Compliance has been removed. The associated reports for these policies have also been removed from Insights as of Jan 11th, 2021. Create a policy within the Compliance service for compliance reporting.")))},T=function(){var e=[],n=!1,t=(0,c.useLocation)(),r=(0,b.Z)("reportsTableView"),o=r?E.Ek:E.n0,i=(0,u.useQuery)(y,{variables:{filter:"(has_policy_test_results = true AND external = false)\n                    OR (has_policy = false AND has_test_results = true)"}}),s=i.data,m=i.error,p=i.loading,d=i.refetch;return(0,a.useEffect)((function(){d()}),[t]),s&&(m=void 0,p=void 0,n=(e=function(e){var n;return((null==e||null===(n=e.profiles)||void 0===n?void 0:n.edges)||[]).map((function(e){return e.node}))}(s))&&e.length>0),l().createElement(E.tC,{stateValues:{error:m,data:s,loading:p}},l().createElement(E.K7,{stateKey:"loading"},l().createElement(g,null),l().createElement(h.o,null,l().createElement(C,{showTableView:r}))),l().createElement(E.K7,{stateKey:"data"},l().createElement(g,null),l().createElement(h.o,null,n?l().createElement(o,{profiles:e}):l().createElement(E.vm,null))))};const k=T}}]);
//# sourceMappingURL=Reports.cb2e28138d1072d11dc5.js.map