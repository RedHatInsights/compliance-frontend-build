"use strict";(self.webpackChunkcompliance=self.webpackChunkcompliance||[]).push([[164],{89671:(e,n,i)=>{i.r(n),i.d(n,{default:()=>h});var o=i(70885),r=i(92950),l=i.n(r),t=i(45697),a=i.n(t),c=i(62012),s=i(61770),d=i(65115),p=i(98773),u=i(4992),f=i(83215),y=i(44468),v=i(65811),m=i(79315),b=function(){var e=(0,r.useState)(!1),n=(0,o.Z)(e,2),i=n[0],t=n[1],a=(0,p.Z)(),b=(0,c.useParams)().policy_id,h=(0,m.Z)({policyId:b,minimal:!0}),P=h.data,g=h.error,I=h.loading,k=(P||{profile:{}}).profile,O=k.name,C=k.id,j=function(){a("/scappolicies")},D=(0,s.D)(u._v,{onCompleted:function(){(0,v.C)((0,f.wN)({variant:"success",title:'Deleted "'.concat(O,'" and its associated reports')})),j()},onError:function(e){(0,v.C)((0,f.wN)({variant:"danger",title:"Error removing policy",description:e.message})),j()}}),w=(0,o.Z)(D,1)[0];return l().createElement(y.C,{variant:d.ModalVariant.small,title:"Delete policy?",titleIconVariant:"warning",ouiaId:"DeletePolicyModal",isOpen:!0,onClose:j,actions:[l().createElement(d.Button,{key:"destroy",ouiaId:"DeletePolicyButton","aria-label":"delete",isDisabled:!i,variant:"danger",onClick:function(){return w({variables:{input:{id:C}}})}},"Delete policy and associated reports"),l().createElement(d.Button,{key:"cancel",ouiaId:"DeletePolicyCancelButton",variant:"secondary",onClick:j},"Cancel")]},l().createElement(y.tC,{stateValues:{error:g,data:P,loading:I}},l().createElement(y.K7,{stateKey:"loading"},l().createElement(d.Spinner,null)),l().createElement(y.K7,{stateKey:"data"},l().createElement(d.Text,{className:"policy-delete-body-text"},"Deleting the policy ",l().createElement("b",null,O)," will also delete its associated reports."),l().createElement(d.Checkbox,{label:"I understand this will delete the policy and all associated reports",id:"deleting-policy-check-".concat(C),isChecked:i,onChange:t}))))};b.propTypes={policy:a().object};const h=b},79315:(e,n,i)=>{i.d(n,{Z:()=>P});var o,r,l,t,a=i(92950),c=i(90570),s=i(79886),d=i(30168),p=i(67521),u=(0,p.ZP)(o||(o=(0,d.Z)(["\n  query PQ_ProfileMinimal($policyId: String!) {\n    profile(id: $policyId) {\n      id\n      name\n      refId\n      external\n      description\n      totalHostCount\n      compliantHostCount\n      complianceThreshold\n      osMajorVersion\n      supportedOsVersions\n      lastScanned\n      policyType\n      businessObjective {\n        id\n        title\n      }\n    }\n  }\n"]))),f=(0,p.ZP)(r||(r=(0,d.Z)(["\n  query PQ_Profile($policyId: String!) {\n    profile(id: $policyId) {\n      id\n      name\n      refId\n      external\n      description\n      totalHostCount\n      compliantHostCount\n      complianceThreshold\n      osMajorVersion\n      supportedOsVersions\n      lastScanned\n      policyType\n      policy {\n        id\n        name\n        refId\n        profiles {\n          id\n          name\n          refId\n          osMinorVersion\n          osMajorVersion\n          parentProfileId\n          benchmark {\n            id\n            title\n            latestSupportedOsMinorVersions\n            osMajorVersion\n            version\n            profiles {\n              id\n              refId\n              ssgVersion\n            }\n          }\n          rules {\n            id\n            title\n            severity\n            rationale\n            refId\n            description\n            remediationAvailable\n            references\n            identifier\n            precedence\n            values\n          }\n        }\n      }\n      businessObjective {\n        id\n        title\n      }\n      hosts {\n        id\n        osMinorVersion\n        osMajorVersion\n      }\n    }\n  }\n"]))),y=(0,p.ZP)(l||(l=(0,d.Z)(["\n  query PQ_Profile($policyId: String!) {\n    profile(id: $policyId) {\n      policy {\n        profiles {\n          id\n          benchmark {\n            ruleTree\n          }\n        }\n      }\n    }\n  }\n"]))),v=(0,p.ZP)(t||(t=(0,d.Z)(["\n  query PQ_Profile($policyId: String!) {\n    profile(id: $policyId) {\n      policy {\n        profiles {\n          id\n          values\n          benchmark {\n            valueDefinitions {\n              id\n              refId\n              title\n              valueType\n              defaultValue\n              description\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),m=i(4942);function b(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,o)}return i}function h(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?b(Object(i),!0).forEach((function(n){(0,m.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const P=function(e){var n=e.policyId,i=e.skip,o=e.minimal,r="new"===n||i,l=(0,c.a)(o?u:f,{variables:{policyId:n},skip:r,fetchPolicy:"no-cache"}),t=l.data,d=l.error,p=l.loading,m=l.refetch,b=(0,c.a)(y,{variables:{policyId:n},skip:o||r,fetchPolicy:"no-cache"}),P=b.data,g=b.error,I=b.loading,k=b.refetch,O=(0,c.a)(v,{variables:{policyId:n},skip:o||r,fetchPolicy:"no-cache"}),C=O.data,j=O.error,D=O.loading,w=O.refetch,V=(0,a.useMemo)((function(){return function(e,n,i){var o,r;return e&&{profile:h(h({},e.profile),{},{policy:h(h({},(null==e||null===(o=e.profile)||void 0===o?void 0:o.policy)||{}),{},{profiles:(null==e||null===(r=e.profile)||void 0===r||null===(r=r.policy)||void 0===r||null===(r=r.profiles)||void 0===r?void 0:r.map((function(e){var o,r,l,t=(null==n||null===(o=n.profile)||void 0===o||null===(o=o.policy)||void 0===o||null===(o=o.profiles)||void 0===o||null===(o=o.find((function(n){return n.id===e.id})))||void 0===o?void 0:o.benchmark.ruleTree)||{},a=(null==i||null===(r=i.profile)||void 0===r||null===(r=r.policy)||void 0===r||null===(r=r.profiles)||void 0===r||null===(r=r.find((function(n){return n.id===e.id})))||void 0===r?void 0:r.benchmark.valueDefinitions)||[],c=null==i||null===(l=i.profile)||void 0===l||null===(l=l.policy)||void 0===l||null===(l=l.profiles)||void 0===l||null===(l=l.find((function(n){return n.id===e.id})))||void 0===l?void 0:l.values;return h(h({},e),{},{values:c,benchmark:h(h({},e.benchmark),{},{ruleTree:t,valueDefinitions:a})})})))||[]})})}}(t,P,C)}),[t,P,C]),E=(0,a.useMemo)((function(){return(0,s.Uv)(d,g,j)}),[d,g,j]),Z=p||I||D,M=(0,a.useCallback)((function(){r||(m(),k(),w())}),[m,k,w]);return"new"===n?{data:!0,refetch:function(){}}:{data:V,error:E,loading:Z,refetch:M}}}}]);
//# sourceMappingURL=../sourcemaps/DeletePolicy.ac615ad72fe8c027628b82aacdd77cc8.js.map