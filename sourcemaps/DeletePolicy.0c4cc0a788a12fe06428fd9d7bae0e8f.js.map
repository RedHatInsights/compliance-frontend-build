{"version":3,"file":"js/DeletePolicy.ec38968478b339d0fb59.js","mappings":"oRAWMA,EAAe,WACnB,IAAAC,GAA0CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlDI,EAAaF,EAAA,GAAEG,EAAgBH,EAAA,GAChCI,GAAWC,EAAAA,EAAAA,eACXC,GAAWC,EAAAA,EAAAA,KAEjBC,EAAqBJ,EAASK,MAAMC,OAA5BC,EAAIH,EAAJG,KAAMC,EAAEJ,EAAFI,GACRC,EAAU,WACdP,EAAS,gBACX,EAEAQ,GAAuBC,EAAAA,EAAAA,GAAYC,EAAAA,GAAgB,CACjDC,YAAa,YACXC,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,UACTC,MAAO,YAAFC,OAAcX,EAAI,mCAG3BE,GACF,EACAU,QAAS,SAACC,IACRN,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,SACTC,MAAO,wBACPI,YAAaD,EAAME,WAGvBb,GACF,IAnBKc,GAoBL1B,EAAAA,EAAAA,GAAAa,EAAA,GApBiB,GAsBnB,OACEc,IAAAA,cAACC,EAAAA,EAAe,CACdT,QAASU,EAAAA,aAAaC,MACtBV,MAAM,iBACNW,iBAAiB,UACjBC,OAAO,oBACPC,QAAM,EACNrB,QAASA,EACTsB,QAAS,CACPP,IAAAA,cAACQ,EAAAA,OAAM,CACLC,IAAI,UACJJ,OAAO,qBACP,aAAW,SACXK,YAAapC,EACbkB,QAAQ,SACRmB,QAAS,kBAAMZ,EAAa,CAAEa,UAAW,CAAEC,MAAO,CAAE7B,GAAAA,KAAS,GAC9D,wCAGDgB,IAAAA,cAACQ,EAAAA,OAAM,CACLC,IAAI,SACJJ,OAAO,2BACPb,QAAQ,YACRmB,QAAS1B,GACV,YAKHe,IAAAA,cAACc,EAAAA,KAAI,CAACC,UAAU,2BAA0B,uBACpBf,IAAAA,cAAA,SAAIjB,GAAS,6CAGnCiB,IAAAA,cAACgB,EAAAA,SAAQ,CACPC,MAAM,sEACNjC,GAAE,yBAAAU,OAA2BV,GAC7BkC,UAAW5C,EACX6C,SAAU5C,IAIlB,EAEAN,EAAamD,UAAY,CACvBtC,OAAQsC,IAAAA,QAGV,S","sources":["webpack:///./src/SmartComponents/DeletePolicy/DeletePolicy.js"],"sourcesContent":["import { Button, Checkbox, ModalVariant, Text } from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport useNavigate from '@redhat-cloud-services/frontend-components-utilities/useInsightsNavigate';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_PROFILE } from 'Mutations';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { ComplianceModal } from 'PresentationalComponents';\nimport { dispatchAction } from 'Utilities/Dispatcher';\n\nconst DeletePolicy = () => {\n  const [deleteEnabled, setDeleteEnabled] = useState(false);\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const { name, id } = location.state.policy;\n  const onClose = () => {\n    navigate('/scappolicies');\n  };\n\n  const [deletePolicy] = useMutation(DELETE_PROFILE, {\n    onCompleted: () => {\n      dispatchAction(\n        addNotification({\n          variant: 'success',\n          title: `Deleted \"${name}\" and its associated reports`,\n        })\n      );\n      onClose();\n    },\n    onError: (error) => {\n      dispatchAction(\n        addNotification({\n          variant: 'danger',\n          title: 'Error removing policy',\n          description: error.message,\n        })\n      );\n      onClose();\n    },\n  });\n\n  return (\n    <ComplianceModal\n      variant={ModalVariant.small}\n      title=\"Delete policy?\"\n      titleIconVariant=\"warning\"\n      ouiaId=\"DeletePolicyModal\"\n      isOpen\n      onClose={onClose}\n      actions={[\n        <Button\n          key=\"destroy\"\n          ouiaId=\"DeletePolicyButton\"\n          aria-label=\"delete\"\n          isDisabled={!deleteEnabled}\n          variant=\"danger\"\n          onClick={() => deletePolicy({ variables: { input: { id } } })}\n        >\n          Delete policy and associated reports\n        </Button>,\n        <Button\n          key=\"cancel\"\n          ouiaId=\"DeletePolicyCancelButton\"\n          variant=\"secondary\"\n          onClick={onClose}\n        >\n          Cancel\n        </Button>,\n      ]}\n    >\n      <Text className=\"policy-delete-body-text\">\n        Deleting the policy <b>{name}</b> will also delete its associated\n        reports.\n      </Text>\n      <Checkbox\n        label=\"I understand this will delete the policy and all associated reports\"\n        id={`deleting-policy-check-${id}`}\n        isChecked={deleteEnabled}\n        onChange={setDeleteEnabled}\n      />\n    </ComplianceModal>\n  );\n};\n\nDeletePolicy.propTypes = {\n  policy: propTypes.object,\n};\n\nexport default DeletePolicy;\n"],"names":["DeletePolicy","_useState","useState","_useState2","_slicedToArray","deleteEnabled","setDeleteEnabled","location","useLocation","navigate","useNavigate","_location$state$polic","state","policy","name","id","onClose","_useMutation","useMutation","DELETE_PROFILE","onCompleted","dispatchAction","addNotification","variant","title","concat","onError","error","description","message","deletePolicy","React","ComplianceModal","ModalVariant","small","titleIconVariant","ouiaId","isOpen","actions","Button","key","isDisabled","onClick","variables","input","Text","className","Checkbox","label","isChecked","onChange","propTypes"],"sourceRoot":""}