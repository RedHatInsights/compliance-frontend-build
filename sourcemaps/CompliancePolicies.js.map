{"version":3,"sources":["webpack:///./src/SmartComponents/CompliancePolicies/CompliancePolicies.js"],"names":["QUERY","gql","routerParams","useQuery","data","error","loading","Fragment","title","className","gutter","pageHeader","policies","allProfiles","filter","profile","totalHostCount","policyCards","length","map","policy","i","sm","md","lg","xl","key","style","paddingBottom"],"mappings":"ofAiBA,IAAMA,EAAQC,IAAH,KA4EIC,eA3DY,WAAM,MACIC,YAASH,GAAlCI,EADqB,EACrBA,KAAMC,EADe,EACfA,MAAOC,EADQ,EACRA,QAErB,GAAID,EAAS,OAAO,kBAAC,IAAD,CAAWA,MAAOA,IAEtC,GAAIC,EACA,OACI,kBAAC,IAAMC,SAAP,KACI,kBAAC,aAAD,KACI,kBAAC,kBAAD,CAAiBC,MAAM,gBAE3B,kBAAC,OAAD,KACI,yBAAKC,UAAU,mBACX,kBAAC,IAAD,CAAMC,OAAO,MACT,kBAAC,IAAD,UAQxB,IAGIC,EAHEC,EAAWR,EAAKS,YAAYC,QAAO,SAACC,GAAD,OAAaA,EAAQC,eAAiB,KAE3EC,EAAc,GAqBlB,OAnBIL,EAASM,QACTP,EAAa,kBAAC,aAAD,KACT,kBAAC,kBAAD,CAAiBH,MAAM,eACvB,kBAAC,IAAD,OAEJS,EAAcL,EAASO,KACnB,SAACC,EAAQC,GAAT,OACI,kBAAC,IAAD,CAAUC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,IAAKL,GACzC,kBAAC,IAAD,CACIK,IAAKL,EACLD,OAAQA,UAKxBT,EAAa,kBAAC,aAAD,CAAYgB,MAAO,CAAEC,cAAe,KAAM,kBAAC,kBAAD,CAAiBpB,MAAM,gBAC9ES,EAAc,kBAAC,IAAD,OAId,kBAAC,IAAMV,SAAP,KACMI,EACF,kBAAC,OAAD,KACI,yBAAKF,UAAU,mBACX,kBAAC,IAAD,CAAMC,OAAO,MACRO","file":"js/CompliancePolicies.js","sourcesContent":["import React from 'react';\nimport {\n    ComplianceTabs,\n    LoadingComplianceCards,\n    CompliancePolicyCard,\n    CompliancePoliciesEmptyState,\n    ErrorPage\n} from 'PresentationalComponents';\nimport { PageHeader, PageHeaderTitle, Main } from '@redhat-cloud-services/frontend-components';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport {\n    Grid,\n    GridItem\n} from '@patternfly/react-core';\n\nconst QUERY = gql`\n{\n    allProfiles {\n        id\n        name\n        refId\n        description\n        totalHostCount\n        compliantHostCount\n        businessObjective {\n            id\n            title\n        }\n    }\n}\n`;\n\nconst CompliancePolicies = () => {\n    const { data, error, loading } = useQuery(QUERY);\n\n    if (error) { return <ErrorPage error={error}/>; }\n\n    if (loading) {\n        return (\n            <React.Fragment>\n                <PageHeader>\n                    <PageHeaderTitle title=\"Compliance\" />\n                </PageHeader>\n                <Main>\n                    <div className=\"policies-donuts\">\n                        <Grid gutter='md'>\n                            <LoadingComplianceCards/>\n                        </Grid>\n                    </div>\n                </Main>\n            </React.Fragment>\n        );\n    }\n\n    const policies = data.allProfiles.filter((profile) => profile.totalHostCount > 0);\n\n    let policyCards = [];\n    let pageHeader;\n    if (policies.length) {\n        pageHeader = <PageHeader>\n            <PageHeaderTitle title=\"Compliance\" />\n            <ComplianceTabs/>\n        </PageHeader>;\n        policyCards = policies.map(\n            (policy, i) =>\n                <GridItem sm={12} md={12} lg={6} xl={4} key={i}>\n                    <CompliancePolicyCard\n                        key={i}\n                        policy={policy}\n                    />\n                </GridItem>\n        );\n    } else {\n        pageHeader = <PageHeader style={{ paddingBottom: 22 }}><PageHeaderTitle title=\"Compliance\" /></PageHeader>;\n        policyCards = <CompliancePoliciesEmptyState />;\n    }\n\n    return (\n        <React.Fragment>\n            { pageHeader }\n            <Main>\n                <div className=\"policies-donuts\">\n                    <Grid gutter='md'>\n                        {policyCards}\n                    </Grid>\n                </div>\n            </Main>\n        </React.Fragment>\n    );\n};\n\nexport default routerParams(CompliancePolicies);\n"],"sourceRoot":""}