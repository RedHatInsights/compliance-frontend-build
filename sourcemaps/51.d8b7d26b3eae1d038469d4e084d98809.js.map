{"version":3,"sources":["webpack:///./src/Utilities/Router.js","webpack:///./src/Utilities/hooks/useDocumentTitle.js","webpack:///./src/constants.js"],"names":["Route","route","Component","component","modal","path","props","title","location","useLocation","setTitle","useDocumentTitle","isCurrent","matchPath","pathname","exact","requiresTitleEntity","includes","routeProps","key","replace","componentProps","useEffect","propTypes","Router","routes","background","state","fullPageRoutes","filter","modalRoutes","paths","map","Suspense","fallback","Fragment","Switch","render","some","p","Redirect","to","useLinkToBackground","fallbackRoute","history","useHistory","args","push","hash","undefined","useAnchor","defaultAnchor","length","useTitleEntity","entityTitle","defaultTitle","document","DEFAULT_TITLE_SUFFIX","defaultTitleSuffixed","DEFAULT_TITLE","COMPLIANCE_API_ROOT","supportedConfigsLink","SEVERITY_LEVELS","DEFAULT_SYSTEMS_FILTER_CONFIGURATION","type","conditionalFilterType","label","filterString","value","systemsPolicyFilterConfiguration","policies","items","policy","name","id","majorOsVersionsFromProfiles","Array","from","Set","profile","majorOsVersion","systemsOsFilterConfiguration","osVersion","systemsOsMinorFilterConfiguration","osMajorVersions","osVersions","Object","keys","majorVersion","groupSelectable","minorVersion","flatMap","v","join","COMPLIANT_SYSTEMS_FILTER_CONFIGURATION","scoreRange","split","features","tags","pdfReport"],"mappings":"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","file":"js/51.487c56a6c820d7169b04.js","sourcesContent":["import React, { useEffect, Suspense, Fragment } from 'react';\nimport propTypes from 'prop-types';\nimport {\n  Route as ReactRoute,\n  Switch,\n  Redirect,\n  useHistory,\n  useLocation,\n  matchPath,\n} from 'react-router-dom';\nimport useDocumentTitle from 'Utilities/hooks/useDocumentTitle';\n\nconst Route = (route) => {\n  const { component: Component, modal, path, props = {}, title } = route;\n  const location = useLocation();\n  const setTitle = useDocumentTitle();\n  const isCurrent = !!matchPath(location.pathname, { path, exact: true });\n  const requiresTitleEntity = title.includes('$entityTitle');\n  const routeProps = {\n    exact: true,\n    key: `${!modal ? 'fullpage' : 'modal'}-route-${path.replace('/', '-')}`,\n    path,\n  };\n  const componentProps = {\n    ...props,\n    route: { ...route, isCurrent, setTitle },\n  };\n\n  useEffect(() => {\n    isCurrent && !requiresTitleEntity && setTitle(title);\n  });\n\n  return (\n    <ReactRoute {...routeProps}>\n      <Component {...componentProps} />\n    </ReactRoute>\n  );\n};\n\nRoute.propTypes = {\n  component: propTypes.node,\n  modal: propTypes.bool,\n  path: propTypes.string,\n  props: propTypes.object,\n  title: propTypes.string,\n};\n\nconst Router = ({ routes }) => {\n  const location = useLocation();\n  const background = location?.state?.background;\n  const path = location.pathname;\n  const fullPageRoutes = routes.filter((route) => !route.modal);\n  const modalRoutes = routes.filter((route) => route.modal);\n  const paths = routes.map((route) => route.path);\n  const defaultRedirectRender = () =>\n    paths.some((p) => p === path) ? null : <Redirect to=\"/reports\" />;\n\n  return (\n    <Suspense fallback={Fragment}>\n      <Switch location={background || location}>\n        {fullPageRoutes.map(Route)}\n        <ReactRoute render={defaultRedirectRender} />\n      </Switch>\n\n      {modalRoutes.map(Route)}\n    </Suspense>\n  );\n};\n\nRouter.propTypes = {\n  routes: propTypes.array,\n};\n\nexport const useLinkToBackground = (fallbackRoute) => {\n  const location = useLocation();\n  const history = useHistory();\n\n  return (args) => {\n    const background = location?.state?.background;\n\n    history.push({\n      pathname: background ? background.pathname : fallbackRoute,\n      hash: background ? background.hash : undefined,\n      ...args,\n    });\n  };\n};\n\nexport const useAnchor = (defaultAnchor = '') => {\n  const location = useLocation();\n  const hash =\n    location.hash && location.hash.length > 0 ? location.hash : undefined;\n  return (hash || defaultAnchor).replace('#', '');\n};\n\nexport default Router;\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { DEFAULT_TITLE, DEFAULT_TITLE_SUFFIX } from '@/constants';\n\nconst defaultTitleSuffixed = (title) => `${title}${DEFAULT_TITLE_SUFFIX}`;\n\nexport const useTitleEntity = (route, entityTitle) => {\n  const location = useLocation();\n\n  useEffect(() => {\n    const title = entityTitle\n      ? route.title.replace('$entityTitle', entityTitle)\n      : route.defaultTitle;\n    route.setTitle(title);\n  }, [entityTitle, location, route]);\n};\n\nconst useDocumentTitle = () => (title) => {\n  document.title = defaultTitleSuffixed(title || DEFAULT_TITLE);\n};\n\nexport default useDocumentTitle;\n","/* eslint max-len: 0 */\nimport { version } from './../package.json';\nimport { conditionalFilterType } from '@redhat-cloud-services/frontend-components/ConditionalFilter';\n\nexport const DEFAULT_TITLE = 'Compliance | Red Hat Insights';\nexport const DEFAULT_TITLE_SUFFIX = ` - ${DEFAULT_TITLE}`;\n\nexport const COMPLIANCE_API_ROOT = '/api/compliance';\nexport const COMPLIANCE_UI_ROOT = '/rhel/compliance';\nexport const INVENTORY_API_ROOT = '/api/inventory/v1';\n\nexport const API_HEADERS = {\n  'X-Insights-Compliance': version,\n  'Content-Type': 'application/json',\n  Accept: 'application/json',\n};\n\nexport const supportedConfigsLink =\n  'https://access.redhat.com/documentation/en-us/red_hat_insights/2021/html/assessing_and_monitoring_security_policy_compliance_of_rhel_systems/con-compl-assess-overview_compl-assess-overview#con-compl-assess-supported-configurations_compl-assess-overview';\n\nimport React from 'react';\nimport {\n  ExclamationCircleIcon,\n  ExclamationTriangleIcon,\n  QuestionCircleIcon,\n} from '@patternfly/react-icons';\n\nexport const REMEDIATIONS_COLUMN = 4;\nexport const COMPLIANT_COLUMN = 3;\nexport const SEVERITY_COLUMN = 2;\nexport const POLICY_COLUMN = 1;\nexport const TITLE_COLUMN = 0;\n\nconst LowSeverityIcon = (\n  <svg\n    width=\"1em\"\n    height=\"1em\"\n    viewBox=\"0 0 18 18\"\n    role=\"img\"\n    style={{ verticalAlign: '-0.125em' }}\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M2 0h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm6.67 10.46a1.67 1.67 0 1 0 0 3.338 1.67 1.67 0 0 0 0-3.338zm-1.586-6l.27 4.935a.435.435 0 0 0 .434.411H9.55c.232 0 .422-.18.435-.411l.27-4.936A.435.435 0 0 0 9.818 4h-2.3c-.25 0-.448.21-.435.46z\"\n      fill=\"#3A9CA6\"\n      fillRule=\"evenodd\"\n    />\n  </svg>\n);\n\nexport const HIGH_SEVERITY = (\n  <React.Fragment>\n    <ExclamationCircleIcon className=\"ins-u-failed\" /> High\n  </React.Fragment>\n);\nexport const MEDIUM_SEVERITY = (\n  <React.Fragment>\n    <ExclamationTriangleIcon className=\"ins-u-warning\" /> Medium\n  </React.Fragment>\n);\nexport const LOW_SEVERITY = (\n  <React.Fragment>{LowSeverityIcon} Low</React.Fragment>\n);\nexport const UNKNOWN_SEVERITY = (\n  <React.Fragment>\n    <QuestionCircleIcon /> Unknown\n  </React.Fragment>\n);\n\nexport const SEVERITY_LEVELS = ['high', 'medium', 'low', 'unknown'];\n\nexport const DEFAULT_SYSTEMS_FILTER_CONFIGURATION = [\n  {\n    type: conditionalFilterType.text,\n    label: 'Name',\n    filterString: (value) => `name ~ ${value}`,\n  },\n];\n\nexport const systemsPolicyFilterConfiguration = (policies) => [\n  {\n    type: conditionalFilterType.checkbox,\n    label: 'Policy',\n    filterString: (value) => `policy_id = ${value}`,\n    items: policies.map((policy) => ({\n      label: policy.name,\n      value: policy.id,\n    })),\n  },\n];\n\nconst majorOsVersionsFromProfiles = (policies) =>\n  Array.from(new Set(policies.map((profile) => profile.majorOsVersion)));\n\nexport const systemsOsFilterConfiguration = (policies) => [\n  {\n    type: conditionalFilterType.checkbox,\n    label: 'Operating system',\n    filterString: (value) => `os_major_version = ${value}`,\n    items: majorOsVersionsFromProfiles(policies).map((osVersion) => ({\n      label: `RHEL ${osVersion}`,\n      value: osVersion,\n    })),\n  },\n];\n\nconst toSystemsOsMinorFilterConfigurationItem =\n  (osVersions) => (majorVersion) => ({\n    label: `RHEL ${majorVersion}`,\n    value: majorVersion,\n    groupSelectable: true,\n    items: osVersions[majorVersion].map((minorVersion) => ({\n      label: `RHEL ${majorVersion}.${minorVersion}`,\n      value: minorVersion,\n    })),\n  });\n\nexport const systemsOsMinorFilterConfiguration = (osMajorVersions) => {\n  const filterString = (value) => [\n    Object.keys(value)\n      .flatMap((majorVersion) =>\n        Object.keys(value[majorVersion]).map(\n          (minorVersion) =>\n            value[majorVersion][minorVersion] &&\n            `(os_major_version = ${majorVersion} AND os_minor_version = ${minorVersion})`\n        )\n      )\n      .filter((v) => !!v)\n      .join(' OR '),\n  ];\n  const items = Object.keys(osMajorVersions).map(\n    toSystemsOsMinorFilterConfigurationItem(osMajorVersions)\n  );\n\n  return [\n    {\n      type: conditionalFilterType.group,\n      label: 'Operating system',\n      filterString,\n      items,\n    },\n  ];\n};\n\nexport const COMPLIANT_SYSTEMS_FILTER_CONFIGURATION = [\n  {\n    type: conditionalFilterType.checkbox,\n    label: 'Compliant',\n    filterString: (value) => `compliant = ${value}`,\n    items: [\n      { label: 'Compliant', value: 'true' },\n      { label: 'Non-compliant', value: 'false' },\n    ],\n  },\n  {\n    type: conditionalFilterType.checkbox,\n    label: 'Compliance score',\n    filterString: (value) => {\n      const scoreRange = value.split('-');\n      return `(compliance_score >= ${scoreRange[0]} and compliance_score < ${scoreRange[1]})`;\n    },\n    items: [\n      { label: '90 - 100%', value: '90-101' },\n      { label: '70 - 89%', value: '70-90' },\n      { label: '50 - 69%', value: '50-70' },\n      { label: 'Less than 50%', value: '0-50' },\n    ],\n  },\n];\n\nexport const features = {\n  tags: false,\n  pdfReport: false,\n};\n"],"sourceRoot":""}