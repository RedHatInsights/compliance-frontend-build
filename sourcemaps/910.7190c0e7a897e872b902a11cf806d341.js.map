{"version":3,"sources":["webpack:///./src/Routes.js","webpack:///./src/App.js","webpack:///./src/Utilities/hooks/useFeature.js","webpack:///./src/store/index.js"],"names":["defaultReportTitle","reportsRoutes","path","title","component","lazy","defaultTitle","modal","defaultPoliciesTitle","policiesRoutes","defaultSystemsTitle","systemsRoutes","routes","Routes","props","Router","appNavClick","reports","redirect","insights","chrome","id","scappolicies","systems","App","useSetFlagsFromUrl","useEffect","init","hideGlobalFilter","identifyApp","baseComponentUrl","location","pathname","split","unregister","on","event","domEvent","history","push","navId","childProps","propTypes","PropTypes","routerParams","LOCAL_STORE_FEATURE_PREFIX","setFeatureFlag","featureValue","feature","value","console","log","localStorage","setItem","removeItem","useLocation","search","pathName","useHistory","URLSearchParams","forEach","featureEnabled","defaultValue","features","getItem","getFlagValue","registry","middleware","getRegistry","promiseMiddleware","filter","item","register","form","notifications","notificationsReducer","getStore"],"mappings":"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","file":"js/910.addb4ca2475ebc80e7e9.js","sourcesContent":["import React, { lazy } from 'react';\nimport Router from './Utilities/Router';\n\nconst defaultReportTitle = 'Reports';\nconst reportsRoutes = [\n  {\n    path: '/reports',\n    title: defaultReportTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"Reports\" */ './SmartComponents/Reports/Reports'\n      )\n    ),\n  },\n  {\n    path: '/reports/:report_id',\n    title: `Report: $entityTitle - ${defaultReportTitle}`,\n    defaultTitle: defaultReportTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"ReportDetails\" */ 'SmartComponents/ReportDetails/ReportDetails'\n      )\n    ),\n  },\n  {\n    path: '/reports/:report_id/delete',\n    title: `Delete report - ${defaultReportTitle}`,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"DeleteReport\" */ 'SmartComponents/DeleteReport/DeleteReport'\n      )\n    ),\n    modal: true,\n  },\n\n  {\n    path: '/reports/:report_id/pdf',\n    title: `Export report - ${defaultReportTitle}`,\n    defaultTitle: defaultReportTitle,\n    modal: true,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"ReportDetails\" */ 'SmartComponents/ReportDownload/ReportDownload'\n      )\n    ),\n  },\n];\n\nconst defaultPoliciesTitle = 'SCAP policies';\nconst policiesRoutes = [\n  {\n    path: '/scappolicies',\n    title: defaultPoliciesTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"CompliancePolicies\" */ 'SmartComponents/CompliancePolicies/CompliancePolicies'\n      )\n    ),\n  },\n  {\n    path: '/scappolicies/new',\n    title: defaultPoliciesTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"CreatePolicy\" */ 'SmartComponents/CreatePolicy/CreatePolicy'\n      )\n    ),\n    modal: true,\n  },\n  {\n    path: '/scappolicies/:policy_id',\n    title: `$entityTitle - ${defaultPoliciesTitle}`,\n    defaultTitle: defaultPoliciesTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"PolicyDetails\" */ 'SmartComponents/PolicyDetails/PolicyDetails'\n      )\n    ),\n  },\n  {\n    path: '/scappolicies/:policy_id/edit',\n    title: `$entityTitle - ${defaultPoliciesTitle}`,\n    defaultTitle: defaultPoliciesTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"EditPolicy\" */ 'SmartComponents/EditPolicy/EditPolicy'\n      )\n    ),\n    modal: true,\n  },\n  {\n    path: '/scappolicies/:policy_id/delete',\n    title: `Delete policy - ${defaultPoliciesTitle}`,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"DeletePolicy\" */ 'SmartComponents/DeletePolicy/DeletePolicy'\n      )\n    ),\n    modal: true,\n  },\n];\n\nconst defaultSystemsTitle = 'Systems';\nconst systemsRoutes = [\n  {\n    path: '/systems',\n    title: defaultSystemsTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"ComplianceSystems\" */ 'SmartComponents/ComplianceSystems/ComplianceSystems'\n      )\n    ),\n  },\n  {\n    path: '/systems/:inventoryId',\n    title: `$entityTitle - ${defaultSystemsTitle}`,\n    defaultTitle: defaultSystemsTitle,\n    component: lazy(() =>\n      import(\n        /* webpackChunkName: \"SystemDetails\" */ 'SmartComponents/SystemDetails/SystemDetails'\n      )\n    ),\n  },\n];\n\nexport const routes = [...policiesRoutes, ...reportsRoutes, ...systemsRoutes];\n\nexport const Routes = (...props) => <Router {...props} routes={routes} />;\n","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\nimport { Routes } from './Routes';\nimport NotificationsPortal from '@redhat-cloud-services/frontend-components-notifications/NotificationPortal';\nimport './App.scss';\nimport { useSetFlagsFromUrl } from 'Utilities/hooks/useFeature';\n\nconst appNavClick = {\n  reports(redirect) {\n    insights.chrome.appNavClick({ id: 'reports', redirect });\n  },\n  scappolicies(redirect) {\n    insights.chrome.appNavClick({ id: 'scappolicies', redirect });\n  },\n  systems(redirect) {\n    insights.chrome.appNavClick({ id: 'systems', redirect });\n  },\n};\n\nconst App = (props) => {\n  useSetFlagsFromUrl();\n  useEffect(() => {\n    insights.chrome.init();\n    insights.chrome?.hideGlobalFilter?.();\n    insights.chrome.identifyApp('compliance');\n    const baseComponentUrl = props.location.pathname.split('/')[1] || 'reports';\n    const unregister = insights.chrome.on('APP_NAVIGATION', (event) => {\n      if (event.domEvent) {\n        props.history.push(`/${event.navId}`);\n        appNavClick[baseComponentUrl](true);\n      }\n    });\n\n    return () => unregister();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <NotificationsPortal />\n      <Routes childProps={props} />\n    </React.Fragment>\n  );\n};\n\nApp.propTypes = {\n  location: PropTypes.object,\n  history: PropTypes.object,\n};\n\nexport default routerParams(App);\n","import { features } from '@/constants';\nimport { useLocation, useHistory } from 'react-router-dom';\nexport const LOCAL_STORE_FEATURE_PREFIX = 'insights:compliance';\n\nconst setFeatureFlag = (featureValue, feature) => {\n  const value = featureValue === 'enable';\n\n  if (!value) {\n    console.log(`Removing feature setting of ${feature}`);\n    localStorage.removeItem(`${LOCAL_STORE_FEATURE_PREFIX}:${feature}`);\n  } else {\n    console.log(`Setting feature value for ${feature} to ${value}`);\n    localStorage.setItem(`${LOCAL_STORE_FEATURE_PREFIX}:${feature}`, value);\n  }\n};\n\n// Allows setting feature flag values via ?feature|(enable/disable)\nexport const useSetFlagsFromUrl = () => {\n  const { search, pathName: path } = useLocation();\n  const history = useHistory();\n  if (!search) {\n    return;\n  }\n\n  const urlParams = new URLSearchParams(search);\n  urlParams.forEach(setFeatureFlag);\n\n  history.push(path);\n};\n\nconst getFlagValue = (feature) => {\n  const defaultValue = features[feature];\n  const storedValue = !!localStorage.getItem(\n    `${LOCAL_STORE_FEATURE_PREFIX}:${feature}`\n  );\n\n  return storedValue || defaultValue;\n};\n\n// A hook to query feature values\nconst useFeature = (feature) => {\n  if (!feature) {\n    return;\n  }\n\n  const featureEnabled = getFlagValue(feature);\n\n  console.log(`Feature ${feature} is set to ${featureEnabled}`);\n  return featureEnabled;\n};\n\nexport default useFeature;\n","import { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/Registry';\nimport { notificationsReducer } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport promiseMiddleware from 'redux-promise-middleware';\nimport { reducer as form } from 'redux-form';\n\nlet registry;\n\nexport function init(...middleware) {\n  registry = getRegistry({}, [\n    promiseMiddleware,\n    ...middleware.filter((item) => typeof item !== 'undefined'),\n  ]);\n\n  registry.register({ form, notifications: notificationsReducer });\n  return registry;\n}\n\nexport function getStore() {\n  return registry.getStore();\n}\n\nexport function register(...args) {\n  return registry.register(...args);\n}\n"],"sourceRoot":""}