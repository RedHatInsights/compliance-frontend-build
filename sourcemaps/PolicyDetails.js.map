{"version":3,"sources":["webpack:///./src/SmartComponents/PolicyDetails/PolicyDetails.scss?5e66","webpack:///./src/SmartComponents/PolicyDetails/PolicyDetails.scss","webpack:///./src/SmartComponents/EditPolicy/UpdateProfileButton.js","webpack:///./src/SmartComponents/EditPolicy/EditPolicy.js","webpack:///./src/SmartComponents/PolicyDetails/PolicyRulesTab.js","webpack:///./src/SmartComponents/PolicyDetails/PolicySystemsTab.js","webpack:///./src/SmartComponents/PolicyDetails/PolicyDetails.js","webpack:///./src/Utilities/Breadcrumbs.js"],"names":["content","module","i","options","transform","undefined","locals","exports","push","UpdateProfileButton","handleBusinessObjective","props","businessObjective","editPolicyBusinessObjective","mutate","Promise","resolve","id","create","value","mutation","CREATE_BUSINESS_OBJECTIVE","variables","input","title","label","then","result","data","createBusinessObjective","onClick","policyId","threshold","businessObjectiveId","complianceThreshold","parseFloat","UPDATE_PROFILE","Button","type","variant","this","React","Component","propTypes","string","isRequired","object","func","number","graphql","EditPolicy","handleModalToggle","isModalOpen","state","insights","chrome","appAction","setState","onClose","onToggle","isOpen","onSelect","previousThreshold","dispatch","dropdownItems","DropdownItem","key","component","Fragment","Dropdown","className","position","DropdownPosition","right","toggle","DropdownToggle","Modal","isSmall","isFooterLeftAligned","actions","round","Form","selector","formValueSelector","connect","PolicyRulesTab","loading","policy","Alert","isInline","remediationsEnabled","columns","transforms","sortable","ANSIBLE_ICON","original","profileRules","profile","refId","name","rules","bool","shape","array","PolicySystemsTab","systemsTableRef","composed","width","ref","QUERY","gql","PolicyDetailsQuery","onNavigateWithProps","useQuery","error","refetch","systemsTable","useRef","useState","activeTab","setActiveTab","networkError","statusCode","window","auth","logout","Breadcrumb","BreadcrumbItem","to","event","isActive","Grid","GridItem","span","current","getWrappedInstance","systemFetch","forceUpdate","currentTab","PolicyDetails","onNavigate","bind","match","params","policy_id","routerParams","history","preventDefault","path","target","pathname","replace","COMPLIANCE_UI_ROOT"],"mappings":"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","file":"js/PolicyDetails.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./PolicyDetails.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./PolicyDetails.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js??ref--5-2!./PolicyDetails.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".threshold-tooltip{margin-bottom:var(--pf-global--spacer--md)}.grey-icon{color:var(--pf-global--Color--200)}.policy-description{padding-top:10px}\\n\", \"\"]);\n\n// exports\n","import React from 'react';\nimport { graphql } from 'react-apollo';\nimport { Button } from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport { CREATE_BUSINESS_OBJECTIVE, UPDATE_PROFILE } from '../../Utilities/graphql/mutations';\n\nexport class UpdateProfileButton extends React.Component {\n    handleBusinessObjective = () => {\n        const { businessObjective, editPolicyBusinessObjective, mutate } = this.props;\n\n        if (editPolicyBusinessObjective === undefined) {\n            return Promise.resolve(businessObjective ? businessObjective.id : null);\n        }\n\n        if (editPolicyBusinessObjective && !editPolicyBusinessObjective.create && businessObjective\n            && (editPolicyBusinessObjective.value !== businessObjective.id)) {\n            return Promise.resolve(editPolicyBusinessObjective.value);\n        }\n\n        if (editPolicyBusinessObjective && !editPolicyBusinessObjective.create\n            && businessObjective === null) {\n            return Promise.resolve(editPolicyBusinessObjective.value);\n        }\n\n        if (editPolicyBusinessObjective === null) {\n            return Promise.resolve(null);\n        }\n\n        if (editPolicyBusinessObjective.create) {\n            return mutate({\n                mutation: CREATE_BUSINESS_OBJECTIVE,\n                variables: { input: { title: editPolicyBusinessObjective.label } }\n            }).then((result) => {\n                return result.data.createBusinessObjective.businessObjective.id;\n            });\n        }\n    }\n\n    onClick = () => {\n        const { mutate, policyId, threshold, onClick } = this.props;\n\n        return this.handleBusinessObjective().then((businessObjectiveId) => {\n            let input = {\n                id: policyId,\n                complianceThreshold: parseFloat(threshold)\n            };\n\n            if (businessObjectiveId) {\n                input.businessObjectiveId = businessObjectiveId;\n            }\n\n            return mutate({\n                mutation: UPDATE_PROFILE,\n                variables: { input }\n            });\n        }).then(() => {\n            onClick();\n        });\n    }\n\n    render() {\n        return (<Button type='submit' variant='primary'\n            onClick={this.onClick}>Save</Button>\n        );\n    }\n}\n\nUpdateProfileButton.propTypes = {\n    policyId: propTypes.string.isRequired,\n    businessObjective: propTypes.object,\n    editPolicyBusinessObjective: propTypes.object,\n    mutate: propTypes.func.isRequired,\n    threshold: propTypes.number,\n    onClick: propTypes.func.isRequired\n};\n\nexport default graphql(UPDATE_PROFILE)(UpdateProfileButton);\n","import {\n    Dropdown,\n    DropdownPosition,\n    DropdownToggle,\n    DropdownItem,\n    Modal,\n    Form,\n    Button\n} from '@patternfly/react-core';\nimport React, { Component } from 'react';\nimport propTypes from 'prop-types';\nimport UpdateProfileButton from './UpdateProfileButton';\nimport {\n    ProfileThresholdField,\n    BusinessObjectiveField\n} from 'SmartComponents';\nimport { formValueSelector } from 'redux-form';\nimport { connect } from 'react-redux';\nimport round from 'lodash/round';\n\nexport class EditPolicy extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isOpen: false,\n            isModalOpen: false,\n            policyId: props.policyId,\n            businessObjective: props.businessObjective\n        };\n    }\n\n    handleModalToggle = () => {\n        const { isModalOpen } = this.state;\n        insights.chrome.appAction(!isModalOpen ? 'edit-business-objective' : '');\n        this.setState(() => ({\n            isModalOpen: !isModalOpen,\n            businessObjective: this.props.businessObjective\n        }));\n        this.props.onClose();\n    };\n\n    onToggle = isOpen => {\n        this.setState({\n            isOpen\n        });\n    };\n\n    onSelect = () => {\n        this.setState({\n            isOpen: !this.state.isOpen\n        });\n    };\n\n    render() {\n        const { policyId, isOpen, isModalOpen, businessObjective } = this.state;\n        const { previousThreshold, editPolicyBusinessObjective, complianceThreshold, dispatch } = this.props;\n        const dropdownItems = [\n            <DropdownItem key=\"action\" onClick={this.handleModalToggle} component=\"button\">\n                Edit policy\n            </DropdownItem>\n        ];\n\n        return (\n            <React.Fragment>\n                <Dropdown\n                    onSelect={this.onSelect}\n                    className='policy-details-dropdown'\n                    position={DropdownPosition.right}\n                    toggle={<DropdownToggle onToggle={this.onToggle}>Actions</DropdownToggle>}\n                    isOpen={isOpen}\n                    dropdownItems={dropdownItems}\n                />\n                <Modal\n                    isSmall\n                    title=\"Edit policy details\"\n                    isOpen={isModalOpen}\n                    onClose={this.handleModalToggle}\n                    isFooterLeftAligned\n                    actions={[\n                        <Button key=\"cancel\" variant=\"secondary\" onClick={this.handleModalToggle}>\n                            Cancel\n                        </Button>,\n                        <UpdateProfileButton\n                            key='confirm'\n                            policyId={policyId}\n                            threshold={ round(parseFloat(complianceThreshold || previousThreshold), 1) }\n                            businessObjective={businessObjective}\n                            editPolicyBusinessObjective={editPolicyBusinessObjective}\n                            onClick={this.handleModalToggle}\n                        />\n                    ]}\n                >\n                    <Form>\n                        <BusinessObjectiveField\n                            businessObjective={businessObjective}\n                            policyId={policyId}\n                            dispatch={dispatch}\n                        />\n                        <ProfileThresholdField previousThreshold={previousThreshold} />\n                    </Form>\n                </Modal>\n            </React.Fragment>\n        );\n    }\n}\n\nEditPolicy.propTypes = {\n    policyId: propTypes.string,\n    previousThreshold: propTypes.number,\n    businessObjective: propTypes.object,\n    editPolicyBusinessObjective: propTypes.object,\n    complianceThreshold: propTypes.string,\n    onClose: propTypes.func,\n    dispatch: propTypes.func\n};\n\nconst selector = formValueSelector('policyForm');\nexport default connect(\n    state => ({\n        complianceThreshold: selector(state, 'complianceThreshold'),\n        editPolicyBusinessObjective: selector(state, 'businessObjective')\n    })\n)(EditPolicy);\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport { Alert } from '@patternfly/react-core';\nimport { SystemRulesTable, ANSIBLE_ICON } from '@redhat-cloud-services/frontend-components-inventory-compliance';\nimport { sortable } from '@patternfly/react-table';\n\nconst PolicyRulesTab = ({ loading, policy }) => (<React.Fragment>\n    <Alert variant=\"info\" isInline title=\"Rule editing coming soon\" />\n    <SystemRulesTable\n        remediationsEnabled={false}\n        columns={[\n            { title: 'Rule', transforms: [sortable] },\n            { title: 'Severity', transforms: [sortable] },\n            { title: <React.Fragment>{ ANSIBLE_ICON } Ansible</React.Fragment>, transforms: [sortable], original: 'Ansible' }\n        ]}\n        loading={loading}\n        profileRules={ !loading && [{\n            profile: { refId: policy.refId, name: policy.name },\n            rules: policy.rules\n        }]}\n    />\n</React.Fragment>);\n\nPolicyRulesTab.propTypes = {\n    loading: propTypes.bool,\n    policy: propTypes.shape({\n        name: propTypes.string,\n        refId: propTypes.string,\n        rules: propTypes.array\n    })\n};\n\nexport default PolicyRulesTab;\n","import { SystemsTable } from 'SmartComponents';\nimport React from 'react';\nimport propTypes from 'prop-types';\n\nconst PolicySystemsTab = ({ policy, systemsTableRef }) => (\n    <SystemsTable policyId={policy.id}\n        columns={[{\n            composed: ['facts.os_release', 'display_name'],\n            key: 'display_name',\n            title: 'System name',\n            props: {\n                width: 40\n            }\n        }, {\n            key: 'facts.compliance.compliance_score',\n            title: 'Compliance score',\n            props: {\n                width: 10\n            }\n        }, {\n            key: 'facts.compliance.last_scanned',\n            title: 'Last scanned',\n            props: {\n                width: 10\n            }\n        }]}\n        ref={systemsTableRef}\n    />\n);\n\nPolicySystemsTab.propTypes = {\n    policy: propTypes.shape({\n        id: propTypes.string.isRequired\n    }),\n    systemsTableRef: propTypes.object\n};\n\nexport default PolicySystemsTab;\n","import React, { useState, useRef } from 'react';\nimport propTypes from 'prop-types';\nimport { useQuery } from '@apollo/react-hooks';\nimport { onNavigate } from '../../Utilities/Breadcrumbs';\nimport {\n    PolicyDetailsDescription,\n    PolicyDetailsContentLoader,\n    PolicyTabs\n} from 'PresentationalComponents';\nimport EditPolicy from '../EditPolicy/EditPolicy';\nimport PolicyRulesTab from './PolicyRulesTab';\nimport PolicySystemsTab from './PolicySystemsTab';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport {\n    PageHeader,\n    PageHeaderTitle,\n    Main,\n    Spinner\n} from '@redhat-cloud-services/frontend-components';\nimport gql from 'graphql-tag';\nimport '../../Charts.scss';\nimport './PolicyDetails.scss';\nimport {\n    Breadcrumb,\n    BreadcrumbItem,\n    Button,\n    Grid,\n    GridItem\n} from '@patternfly/react-core';\nimport {\n    Link\n} from 'react-router-dom';\n\nexport const QUERY = gql`\nquery Profile($policyId: String!){\n    profile(id: $policyId) {\n        id\n        name\n        refId\n        description\n        totalHostCount\n        compliantHostCount\n        complianceThreshold\n        majorOsVersion\n        lastScanned\n        businessObjective {\n            id\n            title\n        }\n        rules {\n            title\n            severity\n            rationale\n            refId\n            description\n            remediationAvailable\n            identifier\n        }\n    }\n}\n`;\n\nexport const PolicyDetailsQuery = ({ policyId, onNavigateWithProps }) => {\n    const { data, error, loading, refetch } = useQuery(QUERY, {\n        variables: { policyId }\n    });\n    let systemsTable = useRef();\n\n    const forceUpdate = () => {\n        refetch();\n        systemsTable.current.getWrappedInstance().systemFetch();\n        systemsTable.current.getWrappedInstance().forceUpdate();\n    };\n\n    const [activeTab, setActiveTab] = useState(0);\n    let policy = {};\n\n    const currentTab = (activeTab) => {\n        switch (activeTab) {\n            case 0:\n                return <PolicyDetailsDescription policy={policy} />;\n            case 1:\n                return <PolicyRulesTab policy={policy} loading={loading} />;\n            case 2:\n                return <PolicySystemsTab policy={policy} systemsTableRef={systemsTable} />;\n        }\n    };\n\n    if (error) {\n        if (error.networkError.statusCode === 401) {\n            window.insights.chrome.auth.logout();\n        }\n\n        return 'Oops! Error loading Policy data: ' + error;\n    }\n\n    if (loading) {\n        return (\n            <React.Fragment>\n                <PageHeader><PolicyDetailsContentLoader/></PageHeader>\n                <Main><Spinner/></Main>\n            </React.Fragment>\n        );\n    } else {\n        policy = data.profile;\n    }\n\n    return (\n        <React.Fragment>\n            <PageHeader className={ 'beta-page-header'} >\n                <Breadcrumb>\n                    <BreadcrumbItem to='/rhel/compliance/policies' onClick={ (event) => onNavigateWithProps(event) }>\n                      Policies\n                    </BreadcrumbItem>\n                    <BreadcrumbItem isActive>{policy.name}</BreadcrumbItem>\n                </Breadcrumb>\n                <Grid>\n                    <GridItem span={10}>\n                        <PageHeaderTitle title={policy.name} />\n                    </GridItem>\n                    <GridItem span={1}>\n                        <Link to={'/reports/' + policy.id} >\n                            <Button variant='primary'>\n                                View reports\n                            </Button>\n                        </Link>\n                    </GridItem>\n                    <GridItem span={1}>\n                        <EditPolicy policyId={policy.id}\n                            previousThreshold={policy.complianceThreshold}\n                            businessObjective={policy.businessObjective}\n                            onClose={ () => {\n                                forceUpdate();\n                            }}\n                        />\n                    </GridItem>\n                </Grid>\n                <PolicyTabs activeTab={activeTab} setActiveTab={setActiveTab} />\n            </PageHeader>\n            <Main>\n                { currentTab(activeTab) }\n            </Main>\n        </React.Fragment>\n    );\n};\n\nPolicyDetailsQuery.propTypes = {\n    policyId: propTypes.string,\n    onNavigateWithProps: propTypes.func\n};\n\nexport class PolicyDetails extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onNavigate = onNavigate.bind(this);\n    }\n\n    render() {\n        return (\n            <PolicyDetailsQuery policyId={this.props.match.params.policy_id} onNavigateWithProps={this.onNavigate} />\n        );\n    }\n}\n\nPolicyDetails.propTypes = {\n    match: propTypes.object\n};\n\nexport default routerParams(PolicyDetails);\n","import { COMPLIANCE_UI_ROOT } from '../constants';\n\nexport function onNavigate(event, history) {\n    event.preventDefault();\n    const path = event.target.pathname.replace(COMPLIANCE_UI_ROOT, '');\n    (history ? history : this.props.history).push(path);\n}\n"],"sourceRoot":""}