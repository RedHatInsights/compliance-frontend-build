{"version":3,"file":"js/EditPolicy.b9288b82c16a53211279.js","mappings":"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","sources":["webpack:///./src/SmartComponents/ComplianceSystems/ComplianceSystems.js","webpack:///./src/SmartComponents/CreatePolicy/CreateSCAPPolicy.js","webpack:///./src/SmartComponents/CreatePolicy/EditPolicyProfilesRules.js","webpack:///./src/SmartComponents/CreatePolicy/EditPolicySystems.js","webpack:///./src/SmartComponents/CreatePolicy/EditPolicyDetails.js","webpack:///./src/SmartComponents/CreatePolicy/ReviewCreatedPolicy.js","webpack:///./src/SmartComponents/CreatePolicy/FinishedCreatePolicy.js","webpack:///./src/SmartComponents/CreatePolicy/CreatePolicy.js","webpack:///./src/SmartComponents/EditPolicy/EditPolicyDetailsTab.js","webpack:///./src/SmartComponents/EditPolicy/EditPolicyRulesTab.js","webpack:///./src/SmartComponents/EditPolicy/EditPolicySystemsTab.js","webpack:///./src/SmartComponents/EditPolicy/EditPolicyForm.js","webpack:///./src/SmartComponents/EditPolicy/hooks.js","webpack:///./src/SmartComponents/EditPolicy/EditPolicy.js","webpack:///./src/SmartComponents/SystemsTable/Cells.js","webpack:///./src/SmartComponents/SystemsTable/Columns.js","webpack:///./src/SmartComponents/SystemsTable/constants.js","webpack:///./src/SmartComponents/InventoryDetails/InventoryDetails.js","webpack:///./src/Utilities/hooks/useTableTools/useExport.js","webpack:///./src/SmartComponents/SystemsTable/hooks.js","webpack:///./src/SmartComponents/SystemsTable/InventoryTable.js","webpack:///./src/Utilities/hooks/api/utils/ApiClient.js","webpack:///./src/Utilities/hooks/api/useApi.js","webpack:///./src/Utilities/hooks/api/useCollection.js","webpack:///./src/store/Reducers/SystemStore.js"],"sourcesContent":["/* eslint-disable react/display-name */\nimport React from 'react';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/client';\nimport PageHeader, {\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport { StateViewPart, StateViewWithError } from 'PresentationalComponents';\nimport { InventoryTable } from 'SmartComponents';\nimport { GET_SYSTEMS } from '../SystemsTable/constants';\nimport * as Columns from '../SystemsTable/Columns';\n\nconst QUERY = gql`\n  {\n    profiles(search: \"external = false and canonical = false\") {\n      edges {\n        node {\n          id\n          name\n          refId\n          majorOsVersion\n        }\n      }\n    }\n  }\n`;\n\nconst DEFAULT_FILTER = 'has_test_results = true or has_policy = true';\n\nexport const ComplianceSystems = () => {\n  const { data, error, loading } = useQuery(QUERY);\n  const policies = data?.profiles?.edges.map(({ node }) => node);\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"page-header\">\n        <PageHeaderTitle title=\"Systems\" />\n      </PageHeader>\n      <Main>\n        <StateViewWithError stateValues={{ error, data, loading }}>\n          <StateViewPart stateKey=\"data\">\n            {policies && (\n              <InventoryTable\n                columns={[\n                  Columns.customName({\n                    showLink: true,\n                    showOsInfo: true,\n                  }),\n                  Columns.inventoryColumn('tags'),\n                  Columns.Policies,\n                  Columns.inventoryColumn('updated', { isStatic: true }),\n                ]}\n                query={GET_SYSTEMS}\n                defaultFilter={DEFAULT_FILTER}\n                systemProps={{\n                  isFullView: true,\n                }}\n                showOsMinorVersionFilter={policies.map(\n                  (policy) => policy.majorOsVersion\n                )}\n                showComplianceSystemsInfo\n                enableEditPolicy={false}\n                remediationsEnabled={false}\n                policies={policies}\n              />\n            )}\n          </StateViewPart>\n        </StateViewWithError>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nexport default ComplianceSystems;\n","import React from 'react';\nimport { OutlinedQuestionCircleIcon } from '@patternfly/react-icons';\nimport {\n  Form,\n  FormGroup,\n  Text,\n  TextContent,\n  TextVariants,\n  Tile,\n  Tooltip,\n} from '@patternfly/react-core';\nimport { ProfileTypeSelect } from 'PresentationalComponents';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/client';\nimport Spinner from '@redhat-cloud-services/frontend-components/Spinner';\nimport {\n  propTypes as reduxFormPropTypes,\n  formValueSelector,\n  reduxForm,\n} from 'redux-form';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport propTypes from 'prop-types';\n\nconst BENCHMARKS_AND_PROFILES = gql`\n  query benchmarksAndProfiles {\n    latestBenchmarks {\n      id\n      title\n      refId\n      version\n      osMajorVersion\n      profiles {\n        id\n        name\n        refId\n        description\n        complianceThreshold\n      }\n    }\n    profiles(search: \"external = false and canonical = false\") {\n      edges {\n        node {\n          id\n          refId\n          benchmark {\n            refId\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst PolicyTooltip = () => (\n  <Tooltip\n    position=\"right\"\n    content=\"Policy types are OpenSCAP policies that are supported by RHEL.\n        For each major version of RHEL, users can create one policy of each type.\"\n  >\n    <OutlinedQuestionCircleIcon className=\"grey-icon\" />\n  </Tooltip>\n);\n\nexport const CreateSCAPPolicy = ({\n  change,\n  selectedBenchmarkId,\n  selectedProfile,\n}) => {\n  const { data, error, loading } = useQuery(BENCHMARKS_AND_PROFILES, {\n    fetchPolicy: 'no-cache',\n  });\n\n  const inUseProfileRefIds = (profiles, benchmark) =>\n    profiles\n      .filter((profile) => benchmark.refId === profile.node.benchmark.refId)\n      .map((profile) => profile.node.refId);\n\n  if (error) {\n    return error;\n  }\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  const benchmarks = data.latestBenchmarks;\n  let selectedBenchmark;\n  let validProfiles;\n  if (selectedBenchmarkId) {\n    selectedBenchmark = benchmarks.find(\n      (benchmark) => benchmark.id === selectedBenchmarkId\n    );\n    const userProfileRefIds = inUseProfileRefIds(\n      data.profiles.edges,\n      selectedBenchmark\n    );\n    validProfiles = selectedBenchmark.profiles.map((profile) => ({\n      ...profile,\n      disabled: userProfileRefIds.includes(profile.refId),\n    }));\n  }\n\n  const setBenchmark = ({ id, osMajorVersion }) => {\n    if (selectedBenchmark?.osMajorVersion !== osMajorVersion) {\n      change('systems', []);\n    }\n\n    change('benchmark', id);\n    change('osMajorVersion', osMajorVersion);\n  };\n\n  return (\n    <React.Fragment>\n      <TextContent>\n        <Text component={TextVariants.h1} className=\"pf-u-mb-md\">\n          Create SCAP policy\n        </Text>\n        <Text className=\"pf-u-mb-md\">\n          Select the operating system and policy type for this policy.\n        </Text>\n      </TextContent>\n      <Form>\n        <FormGroup label=\"Operating system\" isRequired fieldId=\"benchmark\">\n          {benchmarks &&\n            benchmarks\n              .sort((a, b) => a.refId.localeCompare(b.refId))\n              .map((benchmark) => {\n                const { id, osMajorVersion } = benchmark;\n                return (\n                  <Tile\n                    key={id}\n                    className=\"pf-u-mr-md\"\n                    title={`RHEL ${osMajorVersion}`}\n                    onClick={() => setBenchmark(benchmark)}\n                    isSelected={selectedBenchmarkId === id}\n                    isStacked\n                  />\n                );\n              })}\n        </FormGroup>\n        <FormGroup\n          isRequired\n          labelIcon={<PolicyTooltip />}\n          label=\"Policy type\"\n          fieldId=\"policy-type\"\n        >\n          <ProfileTypeSelect\n            profiles={selectedBenchmark && validProfiles}\n            onChange={(value) => {\n              change('selectedRuleRefIds', undefined);\n              change('profile', value);\n            }}\n            selectedProfile={selectedProfile}\n          />\n        </FormGroup>\n      </Form>\n    </React.Fragment>\n  );\n};\n\nCreateSCAPPolicy.propTypes = {\n  selectedBenchmarkId: propTypes.string,\n  change: reduxFormPropTypes.change,\n  selectedProfile: propTypes.object,\n};\n\nconst selector = formValueSelector('policyForm');\n\nexport default compose(\n  connect((state) => ({\n    selectedBenchmarkId: selector(state, 'benchmark'),\n    selectedProfile: selector(state, 'profile'),\n  })),\n  reduxForm({\n    form: 'policyForm',\n    destroyOnUnmount: false,\n    forceUnregisterOnUnmount: true,\n  })\n)(CreateSCAPPolicy);\n","import React, { useLayoutEffect } from 'react';\nimport {\n  propTypes as reduxFormPropTypes,\n  formValueSelector,\n  reduxForm,\n} from 'redux-form';\nimport EmptyTable from '@redhat-cloud-services/frontend-components/EmptyTable';\nimport Spinner from '@redhat-cloud-services/frontend-components/Spinner';\nimport {\n  Title,\n  Text,\n  TextContent,\n  TextVariants,\n  EmptyState,\n  EmptyStateBody,\n} from '@patternfly/react-core';\nimport gql from 'graphql-tag';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport propTypes from 'prop-types';\nimport { useQuery } from '@apollo/client';\nimport { StateViewWithError, StateViewPart } from 'PresentationalComponents';\nimport {\n  TabbedRules,\n  profilesWithRulesToSelection,\n  tabsDataToOsMinorMap,\n  extendProfilesByOsMinor,\n} from 'PresentationalComponents/TabbedRules';\nimport * as Columns from '@/PresentationalComponents/RulesTable/Columns';\n\nconst PROFILES_QUERY = gql`\n  query Profiles($filter: String!) {\n    profiles(search: $filter) {\n      edges {\n        node {\n          id\n          name\n          refId\n          osMinorVersion\n          osMajorVersion\n          policy {\n            id\n          }\n          policyType\n          benchmark {\n            id\n            refId\n            latestSupportedOsMinorVersions\n            osMajorVersion\n          }\n          ssgVersion\n          rules {\n            id\n            title\n            severity\n            rationale\n            refId\n            description\n            remediationAvailable\n            identifier\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst BENCHMARKS_QUERY = gql`\n  query Benchmarks($filter: String!) {\n    benchmarks(search: $filter) {\n      nodes {\n        id\n        latestSupportedOsMinorVersions\n        profiles {\n          id\n          refId\n          osMajorVersion\n          ssgVersion\n        }\n      }\n    }\n  }\n`;\n\nconst getBenchmarkProfile = (benchmark, profileRefId) =>\n  benchmark.profiles.find(\n    (benchmarkProfile) => benchmarkProfile.refId === profileRefId\n  );\n\nconst getBenchmarkBySupportedOsMinor = (benchmarks, osMinorVersion) =>\n  benchmarks.find((benchmark) =>\n    benchmark.latestSupportedOsMinorVersions?.includes(osMinorVersion)\n  );\n\nexport const EditPolicyProfilesRules = ({\n  policy,\n  selectedRuleRefIds,\n  change,\n  osMajorVersion,\n  osMinorVersionCounts,\n}) => {\n  const columns = [Columns.Name, Columns.Severity, Columns.Ansible];\n  const osMinorVersions = osMinorVersionCounts\n    .map((i) => i.osMinorVersion)\n    .sort();\n  const benchmarkSearch =\n    `os_major_version = ${osMajorVersion} ` +\n    `and latest_supported_os_minor_version ^ \"${osMinorVersions.join(',')}\"`;\n\n  const {\n    data: benchmarksData,\n    error: benchmarksError,\n    loading: benchmarksLoading,\n  } = useQuery(BENCHMARKS_QUERY, {\n    variables: {\n      filter: benchmarkSearch,\n    },\n    skip: osMinorVersions.length === 0,\n  });\n\n  const benchmarks = benchmarksData?.benchmarks?.nodes;\n\n  let tabsData = osMinorVersionCounts.map(\n    ({ osMinorVersion, count: systemCount }) => {\n      osMinorVersion = `${osMinorVersion}`;\n      let profile;\n      if (benchmarks) {\n        const benchmark = getBenchmarkBySupportedOsMinor(\n          benchmarks,\n          osMinorVersion\n        );\n        if (benchmark) {\n          profile = getBenchmarkProfile(benchmark, policy.refId);\n          if (profile) {\n            profile = {\n              ...profile,\n              benchmark,\n            };\n          }\n        }\n      }\n\n      return {\n        profile,\n        systemCount,\n        newOsMinorVersion: osMinorVersion,\n      };\n    }\n  );\n  tabsData = tabsData.filter(({ profile }) => !!profile);\n\n  const profileToOsMinorMap = tabsDataToOsMinorMap(tabsData);\n  const profileIds = Object.keys(profileToOsMinorMap);\n  const filter = profileIds.map((i) => `id = ${i}`).join(' OR ');\n  const skipProfilesQuery = benchmarksLoading || filter.length === 0;\n  const {\n    data: profilesData,\n    error: profilesError,\n    loading: profilesLoading,\n  } = useQuery(PROFILES_QUERY, {\n    variables: {\n      filter,\n    },\n    skip: skipProfilesQuery,\n  });\n  const error = benchmarksError || profilesError;\n  const dataState = profileIds?.length > 0 ? profilesData : undefined;\n  const loadingState = profilesLoading || benchmarksLoading ? true : undefined;\n  const noRuleSets = !error && !loadingState && profileIds?.length === 0;\n  const profiles = skipProfilesQuery\n    ? []\n    : profilesData?.profiles.edges.map((p) => p.node);\n\n  const setSelectedRuleRefIds = (newSelection) => {\n    change('selectedRuleRefIds', newSelection);\n  };\n\n  useLayoutEffect(() => {\n    if (!loadingState) {\n      const profilesWithOs = extendProfilesByOsMinor(\n        profiles,\n        profileToOsMinorMap\n      );\n      const newSelection = profilesWithRulesToSelection(\n        profilesWithOs,\n        selectedRuleRefIds,\n        { only: true }\n      );\n      setSelectedRuleRefIds(newSelection);\n    }\n  }, [profiles, loadingState]);\n\n  return (\n    <React.Fragment>\n      <TextContent className=\"pf-u-pb-md\">\n        <Text component={TextVariants.h1}>Rules</Text>\n        <Text>\n          Customize your <b>{policy.name}</b> SCAP policy by including and\n          excluding rules.\n        </Text>\n        <Text>\n          Each release of RHEL is supported with a unique and specific version\n          of the SCAP Security Guide (SSG). You must customize each version of\n          SSG for each release of RHEL.\n        </Text>\n      </TextContent>\n\n      <StateViewWithError\n        stateValues={{\n          error,\n          data: dataState,\n          loading: loadingState,\n          noRuleSets,\n        }}\n      >\n        <StateViewPart stateKey=\"noRuleSets\">\n          <EmptyState>\n            <Title headingLevel=\"h1\" size=\"xl\">\n              No rules can be configured\n            </Title>\n            <EmptyStateBody>\n              The policy type selected does not exist for the systems and OS\n              versions selected in the previous steps.\n            </EmptyStateBody>\n          </EmptyState>\n        </StateViewPart>\n        <StateViewPart stateKey=\"loading\">\n          <EmptyTable>\n            <Spinner />\n          </EmptyTable>\n        </StateViewPart>\n        <StateViewPart stateKey=\"data\">\n          <TabbedRules\n            tabsData={tabsData}\n            selectedRuleRefIds={selectedRuleRefIds}\n            columns={columns}\n            remediationsEnabled={false}\n            selectedFilter\n            level={1}\n            setSelectedRuleRefIds={setSelectedRuleRefIds}\n            ouiaId=\"RHELVersions\"\n          />\n        </StateViewPart>\n      </StateViewWithError>\n    </React.Fragment>\n  );\n};\n\nEditPolicyProfilesRules.propTypes = {\n  policy: propTypes.object,\n  change: reduxFormPropTypes.change,\n  osMajorVersion: propTypes.string,\n  osMinorVersionCounts: propTypes.arrayOf(\n    propTypes.shape({\n      osMinorVersion: propTypes.number,\n      count: propTypes.number,\n    })\n  ),\n  selectedRuleRefIds: propTypes.array,\n};\n\nconst selector = formValueSelector('policyForm');\n\nexport default compose(\n  connect((state) => ({\n    policy: JSON.parse(selector(state, 'profile')),\n    osMajorVersion: selector(state, 'osMajorVersion'),\n    osMinorVersionCounts: selector(state, 'osMinorVersionCounts'),\n    selectedRuleRefIds: selector(state, 'selectedRuleRefIds'),\n  })),\n  reduxForm({\n    form: 'policyForm',\n    destroyOnUnmount: false,\n    forceUnregisterOnUnmount: true,\n  })\n)(EditPolicyProfilesRules);\n","import React from 'react';\nimport {\n  propTypes as reduxFormPropTypes,\n  reduxForm,\n  formValueSelector,\n} from 'redux-form';\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Text,\n  TextContent,\n  TextVariants,\n  WizardContextConsumer,\n} from '@patternfly/react-core';\nimport { InventoryTable } from 'SmartComponents';\nimport { GET_SYSTEMS_WITHOUT_FAILED_RULES } from '../SystemsTable/constants';\nimport { compose } from 'redux';\nimport propTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { countOsMinorVersions } from 'Store/Reducers/SystemStore';\nimport * as Columns from '../SystemsTable/Columns';\n\nconst EmptyState = ({ osMajorVersion }) => (\n  <React.Fragment>\n    <TextContent className=\"pf-u-mb-md\">\n      <Text>\n        You do not have any <b>RHEL {osMajorVersion}</b> systems connected to\n        Insights and enabled for Compliance.\n        <br />\n        Policies must be created with at least one system.\n      </Text>\n    </TextContent>\n    <TextContent className=\"pf-u-mb-md\">\n      <Text>\n        Choose a different operating system, or connect{' '}\n        <b>RHEL {osMajorVersion}</b> systems to Insights.\n      </Text>\n    </TextContent>\n    <WizardContextConsumer>\n      {({ goToStepById }) => (\n        <Button onClick={() => goToStepById(1)}>\n          Choose a different operating system\n        </Button>\n      )}\n    </WizardContextConsumer>\n  </React.Fragment>\n);\n\nEmptyState.propTypes = {\n  osMajorVersion: propTypes.string,\n};\n\nconst PrependComponent = ({ osMajorVersion }) => (\n  <React.Fragment>\n    <TextContent className=\"pf-u-mb-md\">\n      <Text>\n        Select which of your <b>RHEL {osMajorVersion}</b> systems should be\n        included in this policy.\n        <br />\n        Systems can be added or removed at any time.\n      </Text>\n    </TextContent>\n  </React.Fragment>\n);\n\nPrependComponent.propTypes = {\n  osMajorVersion: propTypes.string,\n};\n\nexport const EditPolicySystems = ({\n  change,\n  osMajorVersion,\n  selectedSystems,\n}) => {\n  const onSystemSelect = (newSelectedSystems) => {\n    change('systems', newSelectedSystems);\n    change('osMinorVersionCounts', countOsMinorVersions(newSelectedSystems));\n  };\n\n  return (\n    <React.Fragment>\n      <TextContent className=\"pf-u-mb-md\">\n        <Text component={TextVariants.h1}>Systems</Text>\n      </TextContent>\n      <Form>\n        <FormGroup>\n          <InventoryTable\n            showOsMinorVersionFilter={[osMajorVersion]}\n            prependComponent={\n              <PrependComponent osMajorVersion={osMajorVersion} />\n            }\n            emptyStateComponent={<EmptyState osMajorVersion={osMajorVersion} />}\n            columns={[\n              {\n                ...Columns.Name,\n                props: {\n                  width: 40,\n                },\n                sortBy: ['name'],\n              },\n              Columns.inventoryColumn('tags'),\n              {\n                ...Columns.OperatingSystem,\n                props: {},\n                sortBy: ['osMajorVersion', 'osMinorVersion'],\n              },\n            ]}\n            remediationsEnabled={false}\n            compact\n            showActions={false}\n            query={GET_SYSTEMS_WITHOUT_FAILED_RULES}\n            defaultFilter={\n              osMajorVersion && `os_major_version = ${osMajorVersion}`\n            }\n            enableExport={false}\n            preselectedSystems={selectedSystems}\n            onSelect={onSystemSelect}\n          />\n        </FormGroup>\n      </Form>\n    </React.Fragment>\n  );\n};\n\nEditPolicySystems.propTypes = {\n  osMajorVersion: propTypes.string,\n  selectedSystems: propTypes.array,\n  change: reduxFormPropTypes.change,\n};\n\nEditPolicySystems.defaultProps = {\n  selectedSystems: [],\n};\n\nconst selector = formValueSelector('policyForm');\nconst mapStateToProps = (state) => ({\n  osMajorVersion: selector(state, 'osMajorVersion'),\n  selectedSystems: selector(state, 'systems'),\n});\n\nexport default compose(\n  connect(mapStateToProps),\n  reduxForm({\n    form: 'policyForm',\n    destroyOnUnmount: false,\n    forceUnregisterOnUnmount: true,\n  })\n)(EditPolicySystems);\n","import React, { useEffect } from 'react';\nimport { compose } from 'redux';\nimport {\n  Field,\n  reduxForm,\n  formValueSelector,\n  propTypes as reduxFormPropTypes,\n} from 'redux-form';\nimport { connect } from 'react-redux';\nimport propTypes from 'prop-types';\nimport {\n  Form,\n  FormGroup,\n  Text,\n  TextContent,\n  TextVariants,\n} from '@patternfly/react-core';\nimport {\n  ReduxFormTextInput,\n  ReduxFormTextArea,\n} from 'PresentationalComponents/ReduxFormWrappers/ReduxFormWrappers';\nimport {\n  ProfileThresholdField,\n  PolicyBusinessObjectiveTooltip,\n} from 'PresentationalComponents';\n\nexport const EditPolicyDetails = ({ change, policy, refId }) => {\n  useEffect(() => {\n    if (policy && policy.refId !== refId) {\n      change('name', `${policy.name}`);\n      change('refId', `${policy.refId}`);\n      change('description', `${policy.description}`);\n    }\n  }, [policy]);\n\n  return (\n    <React.Fragment>\n      <TextContent>\n        <Text component={TextVariants.h1}>Details</Text>\n      </TextContent>\n      <br />\n      <Form id=\"editpolicydetails\">\n        <FormGroup label=\"Policy name\" isRequired fieldId=\"name\">\n          <Field\n            component={ReduxFormTextInput}\n            type=\"text\"\n            isRequired={true}\n            id=\"name\"\n            name=\"name\"\n            aria-describedby=\"name\"\n          />\n        </FormGroup>\n        <FormGroup label=\"Reference ID\" isRequired fieldId=\"refId\">\n          <Field\n            type=\"text\"\n            component={ReduxFormTextInput}\n            isDisabled\n            id=\"refId\"\n            name=\"refId\"\n            aria-describedby=\"refId\"\n          />\n        </FormGroup>\n        <FormGroup label=\"Description\" fieldId=\"description\">\n          <Field\n            type=\"text\"\n            component={ReduxFormTextArea}\n            id=\"description\"\n            name=\"description\"\n            aria-describedby=\"description\"\n          />\n        </FormGroup>\n        <FormGroup\n          label=\"Business objective\"\n          labelIcon={<PolicyBusinessObjectiveTooltip />}\n          fieldId=\"businessObjective\"\n        >\n          <Field\n            type=\"text\"\n            component={ReduxFormTextInput}\n            id=\"businessObjective\"\n            name=\"businessObjective\"\n            aria-describedby=\"businessObjective\"\n            defaultValue={policy.businessObjective}\n          />\n        </FormGroup>\n        <ProfileThresholdField previousThreshold={policy.complianceThreshold} />\n      </Form>\n    </React.Fragment>\n  );\n};\n\nconst selector = formValueSelector('policyForm');\n\nEditPolicyDetails.propTypes = {\n  policy: propTypes.object,\n  refId: propTypes.string,\n  change: reduxFormPropTypes.change,\n};\n\nconst mapStateToProps = (state) => {\n  const policy = JSON.parse(selector(state, 'profile'));\n  return {\n    policy,\n    refId: selector(state, 'refId'),\n    initialValues: {\n      name: `${policy.name}`,\n      refId: `${policy.refId}`,\n      description: `${policy.description}`,\n      benchmark: selector(state, 'benchmark'),\n      osMajorVersion: selector(state, 'osMajorVersion'),\n      profile: selector(state, 'profile'),\n    },\n  };\n};\n\nexport default compose(\n  connect(mapStateToProps),\n  reduxForm({\n    form: 'policyForm',\n    destroyOnUnmount: false,\n    forceUnregisterOnUnmount: true,\n  })\n)(EditPolicyDetails);\n","import React from 'react';\nimport {\n  Text,\n  TextVariants,\n  TextContent,\n  TextList,\n  TextListVariants,\n  TextListItem,\n  TextListItemVariants,\n} from '@patternfly/react-core';\nimport { formValueSelector } from 'redux-form';\nimport { connect } from 'react-redux';\nimport gql from 'graphql-tag';\nimport propTypes from 'prop-types';\nimport Spinner from '@redhat-cloud-services/frontend-components/Spinner';\nimport { useQuery } from '@apollo/client';\n\nconst REVIEW = gql`\n  query review($benchmarkId: String!) {\n    benchmark(id: $benchmarkId) {\n      id\n      osMajorVersion\n    }\n  }\n`;\n\nconst ReviewCreatedPolicy = ({\n  benchmarkId,\n  name,\n  businessObjective,\n  complianceThreshold,\n  parentProfileName,\n  osMinorVersionCounts,\n}) => {\n  const { data, error, loading } = useQuery(REVIEW, {\n    variables: { benchmarkId },\n  });\n\n  if (error) {\n    return error;\n  }\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  const {\n    benchmark: { osMajorVersion },\n  } = data;\n\n  return (\n    <TextContent>\n      <Text component={TextVariants.h1}>Review</Text>\n      <Text>Review your SCAP policy before finishing.</Text>\n      <Text component={TextVariants.h3} style={{ marginTop: 0 }}>\n        {name}\n      </Text>\n      <TextList component={TextListVariants.dl}>\n        <TextListItem component={TextListItemVariants.dt}>\n          Policy type\n        </TextListItem>\n        <TextListItem component={TextListItemVariants.dd}>\n          {parentProfileName}\n        </TextListItem>\n        <TextListItem component={TextListItemVariants.dt}>\n          Compliance threshold\n        </TextListItem>\n        <TextListItem component={TextListItemVariants.dd}>\n          {complianceThreshold}%\n        </TextListItem>\n        {businessObjective && (\n          <React.Fragment>\n            <TextListItem component={TextListItemVariants.dt}>\n              Business objective\n            </TextListItem>\n            <TextListItem component={TextListItemVariants.dd}>\n              {businessObjective}\n            </TextListItem>\n          </React.Fragment>\n        )}\n        <TextListItem component={TextListItemVariants.dt}>Systems</TextListItem>\n        <TextListItem component={TextListItemVariants.dd}>\n          <TextList component={TextListVariants.dl}>\n            {osMinorVersionCounts.map(({ osMinorVersion, count }) => (\n              <React.Fragment key={osMinorVersion}>\n                <TextListItem\n                  component={TextListItemVariants.dt}\n                  style={{ fontWeight: 'normal' }}\n                >\n                  RHEL {osMajorVersion}.{osMinorVersion}\n                </TextListItem>\n                <TextListItem component={TextListItemVariants.dd}>\n                  {count} {count > 1 ? 'systems' : 'system'}\n                </TextListItem>\n              </React.Fragment>\n            ))}\n          </TextList>\n        </TextListItem>\n      </TextList>\n    </TextContent>\n  );\n};\n\nReviewCreatedPolicy.propTypes = {\n  benchmarkId: propTypes.string,\n  refId: propTypes.string,\n  name: propTypes.string,\n  businessObjective: propTypes.string,\n  complianceThreshold: propTypes.number,\n  parentProfileName: propTypes.string,\n  osMinorVersionCounts: propTypes.arrayOf(\n    propTypes.shape({\n      osMinorVersion: propTypes.number,\n      count: propTypes.number,\n    })\n  ),\n};\n\nconst selector = formValueSelector('policyForm');\n\nexport default connect((state) => ({\n  benchmarkId: selector(state, 'benchmark'),\n  refId: selector(state, 'refId'),\n  name: selector(state, 'name'),\n  businessObjective: selector(state, 'businessObjective'),\n  osMinorVersionCounts: selector(state, 'osMinorVersionCounts'),\n  complianceThreshold:\n    parseFloat(selector(state, 'complianceThreshold')) || 100.0,\n  parentProfileName: JSON.parse(selector(state, 'profile')).name,\n  rulesCount: selector(state, 'selectedRuleRefIds').length,\n}))(ReviewCreatedPolicy);\n","import React, { useState, useEffect } from 'react';\nimport propTypes from 'prop-types';\nimport {\n  Title,\n  Button,\n  Bullseye,\n  EmptyState,\n  EmptyStateBody,\n  EmptyStateSecondaryActions,\n  EmptyStateVariant,\n  EmptyStateIcon,\n  List,\n  ListItem,\n} from '@patternfly/react-core';\nimport { ProgressBar } from 'PresentationalComponents';\nimport { Link } from 'react-router-dom';\nimport { WrenchIcon } from '@patternfly/react-icons';\nimport { reduxForm, formValueSelector } from 'redux-form';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withApollo } from '@apollo/client/react/hoc';\nimport { usePolicy } from 'Mutations';\nimport { dispatchNotification } from 'Utilities/Dispatcher';\n\nconst EmtpyStateWithErrors = ({ errors }) =>\n  errors && Array.isArray(errors) && errors.length > 0 ? (\n    <EmptyStateBody className=\"wizard-failed-errors\">\n      <List>\n        {errors.map((error) => (\n          <ListItem key={error}>{error}</ListItem>\n        ))}\n      </List>\n    </EmptyStateBody>\n  ) : null;\n\nEmtpyStateWithErrors.propTypes = {\n  errors: propTypes.array,\n};\n\nexport const FinishedCreatePolicy = ({\n  onWizardFinish,\n  cloneFromProfileId,\n  description,\n  name,\n  complianceThreshold,\n  businessObjective,\n  refId,\n  benchmarkId,\n  systems,\n  selectedRuleRefIds,\n}) => {\n  const [percent, setPercent] = useState(0);\n  const [message, setMessage] = useState('This usually takes a minute or two.');\n  const [errors, setErrors] = useState(null);\n  const [failed, setFailed] = useState(false);\n  const updatePolicy = usePolicy();\n\n  const onProgress = (progress) => {\n    setPercent(progress * 100);\n  };\n\n  useEffect(() => {\n    const newPolicy = {\n      cloneFromProfileId,\n      description,\n      name,\n      complianceThreshold,\n      businessObjective: { title: businessObjective },\n      refId,\n      benchmarkId,\n      hosts: systems,\n      selectedRuleRefIds,\n    };\n\n    updatePolicy(null, newPolicy, onProgress)\n      .then(({ id }) => {\n        setPercent(100);\n        setMessage();\n        dispatchNotification({\n          variant: 'success',\n          title: `Created policy \"${name}\"`,\n          autoDismiss: true,\n          description: (\n            <span>\n              From the <strong>SCAP Policies</strong> list, open{' '}\n              <Link to={`/scappolicies/${id}`}>{name}</Link>.\n            </span>\n          ),\n        });\n      })\n      .catch((error) => {\n        setMessage(error.networkError?.message);\n        setErrors(error.networkError?.result?.errors);\n        setFailed(true);\n        dispatchNotification({\n          variant: 'danger',\n          title: 'Error creating policy',\n          description: error.message,\n        });\n      });\n  }, []);\n\n  return (\n    <Bullseye>\n      <EmptyState variant={EmptyStateVariant.full}>\n        <EmptyStateIcon icon={WrenchIcon} />\n        <br />\n        <Title headingLevel=\"h1\" size=\"lg\">\n          Creating policy\n        </Title>\n        <EmptyStateBody>\n          <ProgressBar percent={percent} failed={failed} />\n        </EmptyStateBody>\n        <EmptyStateBody className={failed && 'wizard-failed-message'}>\n          {message}\n        </EmptyStateBody>\n        <EmtpyStateWithErrors error={errors} />\n        <EmptyStateSecondaryActions>\n          {(percent === 100 || failed) && (\n            <Button\n              variant={'primary'}\n              ouiaId=\"ReturnToAppButton\"\n              onClick={() => {\n                onWizardFinish();\n              }}\n            >\n              {failed ? 'Back' : 'Return to application'}\n            </Button>\n          )}\n        </EmptyStateSecondaryActions>\n      </EmptyState>\n    </Bullseye>\n  );\n};\n\nFinishedCreatePolicy.propTypes = {\n  benchmarkId: propTypes.string.isRequired,\n  businessObjective: propTypes.object,\n  cloneFromProfileId: propTypes.string.isRequired,\n  refId: propTypes.string.isRequired,\n  name: propTypes.string.isRequired,\n  description: propTypes.string,\n  systems: propTypes.array,\n  complianceThreshold: propTypes.number,\n  onWizardFinish: propTypes.func,\n  selectedRuleRefIds: propTypes.arrayOf(propTypes.string).isRequired,\n};\n\nexport const selector = formValueSelector('policyForm');\n\nexport default compose(\n  connect((state) => ({\n    benchmarkId: selector(state, 'benchmark'),\n    businessObjective: selector(state, 'businessObjective'),\n    cloneFromProfileId: JSON.parse(selector(state, 'profile')).id,\n    refId: selector(state, 'refId'),\n    name: selector(state, 'name'),\n    description: selector(state, 'description'),\n    complianceThreshold:\n      parseFloat(selector(state, 'complianceThreshold')) || 100.0,\n    systems: selector(state, 'systems'),\n    selectedRuleRefIds: selector(state, 'selectedRuleRefIds'),\n  })),\n  reduxForm({\n    form: 'policyForm',\n    destroyOnUnmount: true,\n    forceUnregisterOnUnmount: true,\n  }),\n  withApollo\n)(FinishedCreatePolicy);\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { formValueSelector } from 'redux-form';\nimport { connect } from 'react-redux';\nimport propTypes from 'prop-types';\nimport { Wizard } from '@patternfly/react-core';\nimport CreateSCAPPolicy from './CreateSCAPPolicy';\nimport { default as EditPolicyRules } from './EditPolicyProfilesRules';\nimport EditPolicySystems from './EditPolicySystems';\nimport EditPolicyDetails from './EditPolicyDetails';\nimport ReviewCreatedPolicy from './ReviewCreatedPolicy';\nimport FinishedCreatePolicy from './FinishedCreatePolicy';\nimport {\n  validateBenchmarkPage,\n  validateDetailsPage,\n  validateRulesPage,\n  validateSystemsPage,\n} from './validate';\n\nexport const CreatePolicy = ({\n  benchmark,\n  osMajorVersion,\n  complianceThreshold,\n  name,\n  profile,\n  refId,\n  selectedRuleRefIds,\n  systemIds,\n}) => {\n  const history = useHistory();\n  const [stepIdReached, setStepIdReached] = useState(1);\n\n  const resetAnchor = () => {\n    const { location } = history;\n    if (location.hash) {\n      history.push({ ...location, hash: '' });\n    }\n  };\n\n  const onNext = ({ id }) => {\n    setStepIdReached(stepIdReached < id ? id : stepIdReached);\n    resetAnchor();\n  };\n\n  const onClose = () => {\n    history.push('/scappolicies');\n  };\n\n  const steps = [\n    {\n      id: 1,\n      name: 'Create SCAP policy',\n      component: <CreateSCAPPolicy />,\n      enableNext: validateBenchmarkPage(benchmark, osMajorVersion, profile),\n    },\n    {\n      id: 2,\n      name: 'Details',\n      component: <EditPolicyDetails />,\n      canJumpTo: stepIdReached >= 2,\n      enableNext: validateDetailsPage(name, refId, complianceThreshold),\n    },\n    {\n      id: 3,\n      name: 'Systems',\n      component: <EditPolicySystems />,\n      canJumpTo: stepIdReached >= 3,\n      enableNext: validateSystemsPage(systemIds),\n    },\n    {\n      id: 4,\n      name: 'Rules',\n      component: <EditPolicyRules />,\n      canJumpTo: systemIds?.length > 0 && stepIdReached >= 4,\n      enableNext: validateRulesPage(selectedRuleRefIds),\n    },\n    {\n      id: 5,\n      name: 'Review',\n      component: <ReviewCreatedPolicy />,\n      nextButtonText: 'Finish',\n      canJumpTo:\n        validateRulesPage(selectedRuleRefIds) &&\n        systemIds?.length > 0 &&\n        stepIdReached >= 5,\n    },\n    {\n      id: 6,\n      name: 'Finished',\n      component: <FinishedCreatePolicy onWizardFinish={onClose} />,\n      isFinishedStep: true,\n      canJumpTo: systemIds?.length > 0 && stepIdReached >= 6,\n    },\n  ];\n\n  return (\n    <React.Fragment>\n      <Wizard\n        className=\"compliance\"\n        isOpen\n        onNext={onNext}\n        onGoToStep={resetAnchor}\n        onBack={resetAnchor}\n        onClose={onClose}\n        title=\"Create SCAP policy\"\n        description=\"Create a new policy for managing SCAP compliance\"\n        steps={steps}\n      />\n    </React.Fragment>\n  );\n};\n\nCreatePolicy.propTypes = {\n  benchmark: propTypes.string,\n  osMajorVersion: propTypes.string,\n  osMinorVersionCounts: propTypes.arrayOf(\n    propTypes.shape({\n      osMinorVersion: propTypes.number,\n      count: propTypes.number,\n    })\n  ),\n  complianceThreshold: propTypes.string,\n  businessObjective: propTypes.object,\n  dispatch: propTypes.func,\n  isOpen: propTypes.bool,\n  name: propTypes.string,\n  onWizardFinish: propTypes.func,\n  profile: propTypes.string,\n  refId: propTypes.string,\n  selectedRuleRefIds: propTypes.arrayOf(propTypes.string),\n  systemIds: propTypes.arrayOf(propTypes.string),\n};\n\nCreatePolicy.defaultProps = {\n  isOpen: false,\n};\n\nconst selector = formValueSelector('policyForm');\nexport default connect((state) => ({\n  benchmark: selector(state, 'benchmark'),\n  osMajorVersion: selector(state, 'osMajorVersion'),\n  osMinorVersionCounts: selector(state, 'osMinorVersionCounts'),\n  businessObjective: selector(state, 'businessObjective'),\n  complianceThreshold: selector(state, 'complianceThreshold') || '100.0',\n  name: selector(state, 'name'),\n  profile: selector(state, 'profile'),\n  refId: selector(state, 'refId'),\n  selectedRuleRefIds: selector(state, 'selectedRuleRefIds'),\n  systemIds: selector(state, 'systems'),\n}))(CreatePolicy);\n","import React, { useState } from 'react';\nimport propTypes from 'prop-types';\nimport { FormGroup, TextArea, TextInput } from '@patternfly/react-core';\nimport {\n  PolicyThresholdTooltip,\n  PolicyBusinessObjectiveTooltip,\n} from 'PresentationalComponents';\nimport { thresholdValid } from '../CreatePolicy/validate';\n\nexport const useThresholdValidate = () => {\n  const [validThreshold, setValidThreshold] = useState(true);\n  return [\n    validThreshold,\n    (threshold) => {\n      const valid = thresholdValid(threshold);\n      setValidThreshold(valid);\n      return valid;\n    },\n  ];\n};\n\nconst EditPolicyDetailsTab = ({ policy, setUpdatedPolicy }) => {\n  const [validThreshold, validateThreshold] = useThresholdValidate();\n\n  return (\n    <div className=\"pf-c-form\">\n      <FormGroup label=\"Policy description\" isRequired fieldId=\"description\">\n        <TextArea\n          style={{ width: 800, height: 110 }}\n          isRequired\n          type=\"text\"\n          id=\"description\"\n          name=\"description\"\n          aria-describedby=\"description\"\n          defaultValue={policy.description}\n          onChange={(value) => {\n            setUpdatedPolicy((policy) => ({\n              ...policy,\n              description: value,\n            }));\n          }}\n        />\n      </FormGroup>\n\n      <FormGroup\n        label=\"Business objective\"\n        labelIcon={<PolicyBusinessObjectiveTooltip />}\n        fieldId=\"business-objective\"\n      >\n        <TextInput\n          type=\"text\"\n          style={{ width: 300 }}\n          id=\"business-objective\"\n          name=\"business-objective\"\n          aria-describedby=\"business-objective\"\n          defaultValue={policy?.businessObjective?.title}\n          onChange={(value) => {\n            setUpdatedPolicy((policy) => ({\n              ...policy,\n              businessObjective: {\n                ...policy.businessObjective,\n                title: value,\n              },\n            }));\n          }}\n        />\n      </FormGroup>\n\n      <FormGroup\n        validated={validThreshold ? 'default' : 'error'}\n        label=\"Compliance threshold (%)\"\n        labelIcon={<PolicyThresholdTooltip />}\n        fieldId=\"policy-threshold\"\n        helperTextInvalid=\"Threshold has to be a number between 0 and 100\"\n        helperText=\"A value of 95% or higher is recommended\"\n      >\n        <TextInput\n          type=\"number\"\n          style={{ width: 150 }}\n          name=\"compliance-threshold\"\n          id=\"compliance-threshold\"\n          defaultValue={policy.complianceThreshold}\n          aria-describedby=\"policy-threshold\"\n          onChange={(value) => {\n            setUpdatedPolicy((policy) => ({\n              ...policy,\n              complianceThreshold: value,\n              complianceThresholdValid: validateThreshold(value),\n            }));\n          }}\n        />\n      </FormGroup>\n    </div>\n  );\n};\n\nEditPolicyDetailsTab.propTypes = {\n  policy: propTypes.shape({\n    description: propTypes.string,\n    businessObjective: propTypes.object,\n    complianceThreshold: propTypes.oneOfType([\n      propTypes.string,\n      propTypes.number,\n    ]),\n  }),\n  setUpdatedPolicy: propTypes.func,\n};\n\nexport default EditPolicyDetailsTab;\n","import React, { useLayoutEffect } from 'react';\nimport {\n  EmptyState,\n  EmptyStateBody,\n  Text,\n  TextContent,\n  Title,\n} from '@patternfly/react-core';\nimport gql from 'graphql-tag';\nimport propTypes from 'prop-types';\nimport { useQuery } from '@apollo/client';\nimport EmptyTable from '@redhat-cloud-services/frontend-components/EmptyTable';\nimport Spinner from '@redhat-cloud-services/frontend-components/Spinner';\nimport { StateViewWithError, StateViewPart } from 'PresentationalComponents';\nimport {\n  TabbedRules,\n  profilesWithRulesToSelection,\n  tabsDataToOsMinorMap,\n  extendProfilesByOsMinor,\n} from 'PresentationalComponents/TabbedRules';\nimport { sortingByProp } from 'Utilities/helpers';\nimport * as Columns from '@/PresentationalComponents/RulesTable/Columns';\n\nconst PROFILES_QUERY = gql`\n  query Profiles($filter: String!) {\n    profiles(search: $filter) {\n      edges {\n        node {\n          id\n          name\n          refId\n          osMinorVersion\n          osMajorVersion\n          policy {\n            id\n          }\n          policyType\n          benchmark {\n            id\n            refId\n            latestSupportedOsMinorVersions\n            osMajorVersion\n          }\n          ssgVersion\n          rules {\n            id\n            title\n            severity\n            rationale\n            refId\n            description\n            remediationAvailable\n            identifier\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst BENCHMARKS_QUERY = gql`\n  query Benchmarks($filter: String!) {\n    benchmarks(search: $filter) {\n      nodes {\n        id\n        latestSupportedOsMinorVersions\n        profiles {\n          id\n          refId\n          ssgVersion\n        }\n      }\n    }\n  }\n`;\n\nconst getBenchmarkBySupportedOsMinor = (benchmarks, osMinorVersion) =>\n  benchmarks.find((benchmark) =>\n    benchmark.latestSupportedOsMinorVersions?.includes(osMinorVersion)\n  );\n\nconst getBenchmarkProfile = (benchmark, profileRefId) =>\n  benchmark.profiles.find(\n    (benchmarkProfile) => benchmarkProfile.refId === profileRefId\n  );\n\nconst EditPolicyRulesTabEmptyState = () => (\n  <EmptyState>\n    <Title headingLevel=\"h5\" size=\"lg\">\n      No rules can be configured\n    </Title>\n    <EmptyStateBody>\n      This policy has no associated systems, and therefore no rules can be\n      configured.\n    </EmptyStateBody>\n    <EmptyStateBody>\n      Add at least one system to configure rules for this policy.\n    </EmptyStateBody>\n  </EmptyState>\n);\n\nexport const toTabsData = (policy, osMinorVersionCounts, benchmarks) =>\n  Object.values(osMinorVersionCounts)\n    .sort(sortingByProp('osMinorVersion', 'desc'))\n    .map(({ osMinorVersion, count: systemCount }) => {\n      osMinorVersion = `${osMinorVersion}`;\n      let profile = policy.policy.profiles.find(\n        (profile) => profile.osMinorVersion === osMinorVersion\n      );\n      let osMajorVersion = policy.osMajorVersion;\n\n      if (!profile && benchmarks) {\n        const benchmark = getBenchmarkBySupportedOsMinor(\n          benchmarks,\n          osMinorVersion\n        );\n        if (benchmark) {\n          const benchmarkProfile = getBenchmarkProfile(benchmark, policy.refId);\n          if (benchmarkProfile) {\n            profile = policy.policy.profiles.find(\n              (profile) =>\n                profile.parentProfileId === benchmarkProfile.id &&\n                profile.osMinorVersion === osMinorVersion\n            );\n\n            profile = {\n              ...benchmarkProfile,\n              benchmark,\n              osMajorVersion,\n              ...profile,\n            };\n          }\n        }\n      }\n\n      return {\n        profile,\n        systemCount,\n        newOsMinorVersion: osMinorVersion,\n      };\n    })\n    .filter(({ profile, newOsMinorVersion }) => !!profile && newOsMinorVersion);\n\nexport const EditPolicyRulesTab = ({\n  policy,\n  selectedRuleRefIds,\n  setSelectedRuleRefIds,\n  osMinorVersionCounts,\n  setNewRuleTabs,\n}) => {\n  const osMajorVersion = policy?.osMajorVersion;\n  const osMinorVersions = Object.keys(osMinorVersionCounts).sort();\n  const benchmarkSearch =\n    `os_major_version = ${osMajorVersion} ` +\n    `and latest_supported_os_minor_version ^ \"${osMinorVersions.join(',')}\"`;\n\n  const {\n    data: benchmarksData,\n    error: benchmarksError,\n    loading: benchmarksLoading,\n  } = useQuery(BENCHMARKS_QUERY, {\n    variables: {\n      filter: benchmarkSearch,\n    },\n    skip: osMinorVersions.length === 0,\n  });\n\n  const benchmarks = benchmarksData?.benchmarks?.nodes;\n\n  const tabsData = toTabsData(policy, osMinorVersionCounts, benchmarks);\n  const profileToOsMinorMap = tabsDataToOsMinorMap(tabsData);\n  const filter = Object.keys(profileToOsMinorMap)\n    .map((i) => `id = ${i}`)\n    .join(' OR ');\n  const {\n    data: profilesData,\n    error: profilesError,\n    loading: profilesLoading,\n  } = useQuery(PROFILES_QUERY, {\n    variables: {\n      filter,\n    },\n    skip: filter.length === 0,\n  });\n  const loadingState = profilesLoading || benchmarksLoading ? true : undefined;\n  const dataState =\n    !loadingState && tabsData?.length > 0 ? profilesData : undefined;\n\n  if (!loadingState) {\n    setNewRuleTabs(\n      !!tabsData.find((tab) =>\n        policy.policy.profiles.find(\n          (profile) => profile.osMinorVersion !== tab.newOsMinorVersion\n        )\n      )\n    );\n  }\n\n  useLayoutEffect(() => {\n    if (profilesData) {\n      const profiles = profilesData?.profiles.edges.map((p) => p.node) || [];\n      const profilesWithOs = extendProfilesByOsMinor(\n        profiles,\n        profileToOsMinorMap\n      );\n      setSelectedRuleRefIds((prevSelection) =>\n        profilesWithRulesToSelection(profilesWithOs, prevSelection)\n      );\n    }\n  }, [profilesData]);\n  const error = benchmarksError || profilesError;\n\n  return (\n    <StateViewWithError\n      stateValues={{\n        error,\n        data: !error && dataState,\n        loading: loadingState,\n        empty: !loadingState && !dataState && !error,\n      }}\n    >\n      <StateViewPart stateKey=\"loading\">\n        <EmptyTable>\n          <Spinner />\n        </EmptyTable>\n      </StateViewPart>\n      <StateViewPart stateKey=\"data\">\n        <TextContent>\n          <Text>\n            Different release versions of RHEL are associated with different\n            versions of the SCAP Security Guide (SSG), therefore each release\n            must be customized independently.\n          </Text>\n        </TextContent>\n        <TabbedRules\n          columns={[Columns.Name, Columns.Severity, Columns.Ansible]}\n          tabsData={tabsData}\n          selectedRuleRefIds={selectedRuleRefIds}\n          setSelectedRuleRefIds={setSelectedRuleRefIds}\n          remediationsEnabled={false}\n          selectedFilter\n          level={1}\n          ouiaId=\"RHELVersions\"\n        />\n      </StateViewPart>\n      <StateViewPart stateKey=\"empty\">\n        <EditPolicyRulesTabEmptyState />\n      </StateViewPart>\n    </StateViewWithError>\n  );\n};\n\nEditPolicyRulesTab.propTypes = {\n  setNewRuleTabs: propTypes.func,\n  policy: propTypes.object,\n  osMinorVersionCounts: propTypes.shape({\n    osMinorVersion: propTypes.shape({\n      osMinorVersion: propTypes.number,\n      count: propTypes.number,\n    }),\n  }),\n  selectedRuleRefIds: propTypes.array,\n  setSelectedRuleRefIds: propTypes.func,\n};\n\nexport default EditPolicyRulesTab;\n","import React from 'react';\nimport {\n  Alert,\n  AlertActionLink,\n  Text,\n  TextContent,\n} from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport { InventoryTable } from 'SmartComponents';\nimport { GET_SYSTEMS_WITHOUT_FAILED_RULES } from '../SystemsTable/constants';\nimport { useHistory } from 'react-router-dom';\nimport * as Columns from '../SystemsTable/Columns';\n\nconst EmptyState = ({ osMajorVersion }) => (\n  <React.Fragment>\n    <TextContent className=\"pf-u-mb-md\">\n      <Text>\n        You do not have any <b>RHEL {osMajorVersion}</b> systems connected to\n        Insights and enabled for Compliance.\n      </Text>\n    </TextContent>\n    <TextContent className=\"pf-u-mb-md\">\n      <Text>Connect RHEL {osMajorVersion} systems to Insights.</Text>\n    </TextContent>\n  </React.Fragment>\n);\n\nEmptyState.propTypes = {\n  osMajorVersion: propTypes.string,\n};\n\nconst PrependComponent = ({ osMajorVersion }) => (\n  <React.Fragment>\n    <TextContent className=\"pf-u-mb-md\">\n      <Text>\n        Select which of your <b>RHEL {osMajorVersion}</b> systems should be\n        included in this policy.\n      </Text>\n    </TextContent>\n  </React.Fragment>\n);\n\nPrependComponent.propTypes = {\n  osMajorVersion: propTypes.string,\n};\n\nconst EditPolicySystemsTab = ({\n  policy: { id: policyId, osMajorVersion },\n  newRuleTabs,\n  onSystemSelect,\n  selectedSystems,\n}) => {\n  const { push, location } = useHistory();\n\n  return (\n    <React.Fragment>\n      <InventoryTable\n        columns={[\n          Columns.Name,\n          Columns.inventoryColumn('tags'),\n          Columns.OperatingSystem,\n        ]}\n        showOsMinorVersionFilter={[osMajorVersion]}\n        prependComponent={<PrependComponent osMajorVersion={osMajorVersion} />}\n        emptyStateComponent={<EmptyState osMajorVersion={osMajorVersion} />}\n        compact\n        showActions={false}\n        query={GET_SYSTEMS_WITHOUT_FAILED_RULES}\n        defaultFilter={\n          osMajorVersion &&\n          `os_major_version = ${osMajorVersion} or policy_id = ${policyId}`\n        }\n        enableExport={false}\n        remediationsEnabled={false}\n        preselectedSystems={selectedSystems}\n        onSelect={onSystemSelect}\n      />\n      {newRuleTabs && (\n        <Alert\n          variant=\"info\"\n          isInline\n          title=\"You selected a system that has a release version previously not included in this policy.\"\n          actionLinks={\n            <AlertActionLink\n              onClick={() => push({ ...location, hash: '#rules' })}\n            >\n              Open rule editing\n            </AlertActionLink>\n          }\n        >\n          <p>\n            If you have edited any rules for this policy, you will need to do so\n            for this release version as well.\n          </p>\n        </Alert>\n      )}\n    </React.Fragment>\n  );\n};\n\nEditPolicySystemsTab.propTypes = {\n  policy: propTypes.object,\n  newRuleTabs: propTypes.bool,\n  onSystemSelect: propTypes.func,\n  selectedSystems: propTypes.array,\n};\n\nexport default EditPolicySystemsTab;\n","import React, { useState, useEffect } from 'react';\nimport propTypes from 'prop-types';\nimport { Form, Tab, TabTitleText } from '@patternfly/react-core';\nimport { RoutedTabs } from 'PresentationalComponents';\nimport EditPolicyDetailsTab from './EditPolicyDetailsTab';\nimport EditPolicyRulesTab from './EditPolicyRulesTab';\nimport EditPolicySystemsTab from './EditPolicySystemsTab';\nimport { mapCountOsMinorVersions } from 'Store/Reducers/SystemStore';\nimport { profilesWithRulesToSelection } from 'PresentationalComponents/TabbedRules';\n\nconst profilesToOsMinorMap = (profiles, hosts) =>\n  (profiles || []).reduce((acc, profile) => {\n    if (profile.osMinorVersion !== '') {\n      acc[profile.osMinorVersion] ||= {\n        osMinorVersion: profile.osMinorVersion,\n        count: 0,\n      };\n    }\n\n    return acc;\n  }, mapCountOsMinorVersions(hosts || []));\n\nexport const EditPolicyForm = ({\n  policy,\n  setUpdatedPolicy,\n  selectedRuleRefIds,\n  setSelectedRuleRefIds,\n  selectedSystems,\n  setSelectedSystems,\n}) => {\n  const policyProfiles = policy?.policy?.profiles || [];\n  const [osMinorVersionCounts, setOsMinorVersionCounts] = useState({});\n  const [newRuleTabs, setNewRuleTabs] = useState(false);\n\n  const handleSystemSelect = (selectedSystems) => {\n    setSelectedSystems(selectedSystems);\n\n    setOsMinorVersionCounts(\n      profilesToOsMinorMap(policyProfiles, selectedSystems)\n    );\n  };\n\n  const updateSelectedRuleRefIds = () => {\n    if (policy) {\n      // existing policy profiles and their rule sets\n      const profilesWithOsMinor = policyProfiles.filter(\n        ({ osMinorVersion }) => !!osMinorVersion\n      );\n      setSelectedRuleRefIds(profilesWithRulesToSelection(profilesWithOsMinor));\n    }\n  };\n\n  useEffect(() => {\n    if (policy) {\n      const complianceThresholdValid =\n        policy.complianceThreshold < 101 && policy.complianceThreshold > 0;\n      setUpdatedPolicy({\n        ...policy,\n        complianceThresholdValid,\n      });\n      updateSelectedRuleRefIds();\n      handleSystemSelect(policy.hosts);\n    }\n  }, [policy]);\n\n  return (\n    <Form>\n      <RoutedTabs ouiaId=\"EditPolicy\" defaultTab=\"details\">\n        <Tab\n          eventKey=\"details\"\n          ouiaId=\"Details\"\n          title={<TabTitleText>Details</TabTitleText>}\n        >\n          <EditPolicyDetailsTab\n            policy={policy}\n            setUpdatedPolicy={setUpdatedPolicy}\n          />\n        </Tab>\n\n        <Tab\n          eventKey=\"rules\"\n          ouiaId=\"Rules\"\n          title={<TabTitleText>Rules</TabTitleText>}\n        >\n          <EditPolicyRulesTab\n            policy={policy}\n            setNewRuleTabs={setNewRuleTabs}\n            setSelectedRuleRefIds={setSelectedRuleRefIds}\n            selectedRuleRefIds={selectedRuleRefIds}\n            osMinorVersionCounts={osMinorVersionCounts}\n          />\n        </Tab>\n\n        <Tab\n          eventKey=\"systems\"\n          ouiaId=\"Systems\"\n          title={<TabTitleText>Systems</TabTitleText>}\n        >\n          <EditPolicySystemsTab\n            policy={policy}\n            newRuleTabs={newRuleTabs}\n            selectedSystems={selectedSystems}\n            onSystemSelect={handleSystemSelect}\n          />\n        </Tab>\n      </RoutedTabs>\n    </Form>\n  );\n};\n\nEditPolicyForm.propTypes = {\n  policy: propTypes.object,\n  setUpdatedPolicy: propTypes.func,\n  selectedRuleRefIds: propTypes.arrayOf(propTypes.object),\n  setSelectedRuleRefIds: propTypes.func,\n  setSelectedSystems: propTypes.func,\n  selectedSystems: propTypes.array,\n};\n\nexport default EditPolicyForm;\n","import { useState } from 'react';\nimport { usePolicy } from 'Mutations';\nimport { useLinkToBackground, useAnchor } from 'Utilities/Router';\nimport { dispatchNotification } from 'Utilities/Dispatcher';\n\nexport const useLinkToPolicy = () => {\n  const anchor = useAnchor();\n  const linkToBackground = useLinkToBackground('/scappolicies');\n  return () => {\n    linkToBackground({ hash: anchor });\n  };\n};\n\nexport const useOnSave = (policy, updatedPolicyHostsAndRules) => {\n  const updatePolicy = usePolicy();\n  const linkToPolicy = useLinkToPolicy();\n  const [isSaving, setIsSaving] = useState(false);\n  const onSave = () => {\n    if (isSaving) {\n      return Promise.resolve({});\n    }\n\n    setIsSaving(true);\n    updatePolicy(policy, updatedPolicyHostsAndRules)\n      .then(() => {\n        setIsSaving(false);\n        dispatchNotification({\n          variant: 'success',\n          title: 'Policy updated',\n          autoDismiss: true,\n        });\n        linkToPolicy();\n      })\n      .catch((error) => {\n        setIsSaving(false);\n        dispatchNotification({\n          variant: 'danger',\n          title: 'Error updating policy',\n          description: error.message,\n        });\n        linkToPolicy();\n      });\n  };\n\n  return [isSaving, onSave];\n};\n","import React, { useState } from 'react';\nimport propTypes from 'prop-types';\nimport { useParams } from 'react-router-dom';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/client';\nimport { Button, Spinner } from '@patternfly/react-core';\nimport { useTitleEntity } from 'Utilities/hooks/useDocumentTitle';\nimport {\n  ComplianceModal,\n  StateViewWithError,\n  StateViewPart,\n} from 'PresentationalComponents';\nimport EditPolicyForm from './EditPolicyForm';\nimport { useOnSave, useLinkToPolicy } from './hooks';\n\nexport const MULTIVERSION_QUERY = gql`\n  query Profile($policyId: String!) {\n    profile(id: $policyId) {\n      id\n      name\n      refId\n      external\n      description\n      totalHostCount\n      compliantHostCount\n      complianceThreshold\n      majorOsVersion\n      osMajorVersion\n      lastScanned\n      policyType\n      policy {\n        id\n        name\n        refId\n        profiles {\n          id\n          ssgVersion\n          parentProfileId\n          name\n          refId\n          osMinorVersion\n          osMajorVersion\n          benchmark {\n            id\n            title\n            latestSupportedOsMinorVersions\n            osMajorVersion\n          }\n          rules {\n            title\n            severity\n            rationale\n            refId\n            description\n            remediationAvailable\n            identifier\n          }\n        }\n      }\n      businessObjective {\n        id\n        title\n      }\n      hosts {\n        id\n        osMinorVersion\n        osMajorVersion\n      }\n    }\n  }\n`;\n\nexport const EditPolicy = ({ route }) => {\n  const { policy_id: policyId } = useParams();\n  const { data, loading, error } = useQuery(MULTIVERSION_QUERY, {\n    variables: { policyId },\n  });\n  const policy = data?.profile;\n  const linkToPolicy = useLinkToPolicy();\n  const [updatedPolicy, setUpdatedPolicy] = useState(null);\n  const [selectedRuleRefIds, setSelectedRuleRefIds] = useState([]);\n  const [selectedSystems, setSelectedSystems] = useState([]);\n  const saveEnabled = updatedPolicy && !updatedPolicy.complianceThresholdValid;\n  const updatedPolicyHostsAndRules = {\n    ...updatedPolicy,\n    selectedRuleRefIds,\n    hosts: selectedSystems,\n  };\n  const [isSaving, onSave] = useOnSave(policy, updatedPolicyHostsAndRules);\n\n  const actions = [\n    <Button\n      isDisabled={saveEnabled}\n      key=\"save\"\n      ouiaId=\"EditPolicySaveButton\"\n      variant=\"primary\"\n      spinnerAriaValueText=\"Saving\"\n      isLoading={isSaving}\n      onClick={onSave}\n    >\n      Save\n    </Button>,\n    <Button\n      key=\"cancel\"\n      ouiaId=\"EditPolicyCancelButton\"\n      variant=\"link\"\n      onClick={() => linkToPolicy()}\n    >\n      Cancel\n    </Button>,\n  ];\n\n  useTitleEntity(route, policy?.name);\n\n  return (\n    <ComplianceModal\n      isOpen\n      position={'top'}\n      style={{ minHeight: '350px' }}\n      variant={'large'}\n      ouiaId=\"EditPolicyModal\"\n      title={`Edit ${policy ? policy.name : ''}`}\n      onClose={() => linkToPolicy()}\n      actions={actions}\n    >\n      <StateViewWithError stateValues={{ policy, loading, error }}>\n        <StateViewPart stateKey=\"loading\">\n          <Spinner />\n        </StateViewPart>\n        <StateViewPart stateKey=\"policy\">\n          <EditPolicyForm\n            {...{\n              policy,\n              updatedPolicy,\n              setUpdatedPolicy,\n              selectedRuleRefIds,\n              setSelectedRuleRefIds,\n              selectedSystems,\n              setSelectedSystems,\n            }}\n          />\n        </StateViewPart>\n      </StateViewWithError>\n    </ComplianceModal>\n  );\n};\n\nEditPolicy.propTypes = {\n  route: propTypes.object,\n};\n\nexport default EditPolicy;\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { Text, TextContent, TextVariants } from '@patternfly/react-core';\nimport DateFormat from '@redhat-cloud-services/frontend-components/DateFormat';\nimport Truncate from '@redhat-cloud-services/frontend-components/Truncate';\nimport {\n  UnsupportedSSGVersion,\n  ComplianceScore as complianceScore,\n} from 'PresentationalComponents';\nimport {\n  profilesRulesFailed,\n  complianceScoreData,\n  NEVER,\n} from 'Utilities/ruleHelpers';\n\nconst SystemLink = ({ id, children }) => (\n  <Link to={{ pathname: `/systems/${id}` }}>{children}</Link>\n);\n\nSystemLink.propTypes = {\n  id: propTypes.string,\n  children: propTypes.node,\n};\n\nexport const Name = ({\n  id,\n  name,\n  osMajorVersion,\n  osMinorVersion,\n  showOsInfo = false,\n  showLink = false,\n}) => {\n  const hasOsInfo = (osMajorVersion, osMinorVersion) =>\n    !!osMajorVersion && !!osMinorVersion && showOsInfo;\n\n  return (\n    <TextContent>\n      {showLink ? <SystemLink {...{ id }}>{name}</SystemLink> : name}\n\n      {hasOsInfo(osMajorVersion, osMinorVersion) && (\n        <Text component={TextVariants.small}>\n          RHEL {osMajorVersion}.{osMinorVersion}\n        </Text>\n      )}\n    </TextContent>\n  );\n};\n\nName.propTypes = {\n  id: propTypes.string,\n  name: propTypes.string,\n  osMajorVersion: propTypes.string,\n  osMinorVersion: propTypes.string,\n  showOsInfo: propTypes.bool,\n  showLink: propTypes.bool,\n};\n\nexport const profilesSsgVersions = (profiles) =>\n  profiles\n    .map((p) => p.ssgVersion)\n    .filter((version) => !!version)\n    .join(', ');\n\nexport const SSGVersion = ({ ssgVersion = 'Not available', supported }) =>\n  supported ? (\n    ssgVersion\n  ) : (\n    <UnsupportedSSGVersion messageVariant=\"singular\">\n      {ssgVersion}\n    </UnsupportedSSGVersion>\n  );\n\nSSGVersion.propTypes = {\n  supported: propTypes.bool,\n  ssgVersion: propTypes.string,\n};\n\nexport const SSGVersions = ({ testResultProfiles = [] }) =>\n  testResultProfiles.length !== 0\n    ? testResultProfiles.map((profile) => (\n        <SSGVersion key={`ssgversion-${profile.id}`} {...profile} />\n      ))\n    : 'Not available';\n\nSSGVersions.propTypes = {\n  testResultProfiles: propTypes.array,\n};\n\nexport const DetailsLink = ({ id, testResultProfiles = [] }) =>\n  testResultProfiles.length > 0 ? (\n    <SystemLink {...{ id }}>View Report</SystemLink>\n  ) : (\n    ''\n  );\n\nDetailsLink.propTypes = {\n  id: propTypes.string,\n  testResultProfiles: propTypes.array,\n};\n\nexport const Policies = ({ policies }) =>\n  (policies || []).length > 0 && (\n    <Truncate\n      inline\n      text={policies.map((p) => p.name).join(', ')}\n      length={215}\n    />\n  );\n\nPolicies.propTypes = {\n  policies: propTypes.array,\n};\n\nexport const FailedRules = ({ id, testResultProfiles }) => {\n  const rulesFailed = profilesRulesFailed(testResultProfiles).length;\n  return <SystemLink {...{ id }}>{rulesFailed}</SystemLink>;\n};\n\nFailedRules.propTypes = {\n  id: propTypes.string,\n  testResultProfiles: propTypes.array,\n};\n\nexport { complianceScoreData };\nexport const ComplianceScore = ({ testResultProfiles }) =>\n  complianceScore(complianceScoreData(testResultProfiles));\n\nComplianceScore.propTypes = {\n  testResultProfiles: propTypes.array,\n};\n\nexport const lastScanned = (profiles) => {\n  const dates = profiles.map((profile) => new Date(profile.lastScanned));\n  const last = new Date(\n    Math.max.apply(\n      null,\n      dates.filter((date) => isFinite(date))\n    )\n  );\n  const result = last instanceof Date && isFinite(last) ? last : NEVER;\n\n  return result;\n};\n\nexport const LastScanned = ({ testResultProfiles: profiles }) => {\n  const lastScannedDate = lastScanned(profiles || []);\n\n  return lastScannedDate instanceof Date ? (\n    <DateFormat date={Date.parse(lastScannedDate)} type=\"relative\" />\n  ) : (\n    lastScannedDate\n  );\n};\n\nLastScanned.propTypes = {\n  testResultProfiles: propTypes.array,\n};\n\nexport const operatingSystemString = ({ osMinorVersion, osMajorVersion }) =>\n  `RHEL ${osMajorVersion}.${osMinorVersion}`;\n\nexport const OperatingSystem = (system) => operatingSystemString(system);\n","import { nowrap } from '@patternfly/react-table';\nimport { complianceScoreString } from 'PresentationalComponents';\nimport { profilesRulesFailed } from 'Utilities/ruleHelpers';\nimport { renderComponent } from 'Utilities/helpers';\n\nimport {\n  Name as NameCell,\n  ComplianceScore as ComplianceScoreCell,\n  DetailsLink as DetailsLinkCell,\n  FailedRules as FailedRulesCell,\n  LastScanned as LastScannedCell,\n  Policies as PoliciesCell,\n  SSGVersions as SsgVersionCell,\n  complianceScoreData,\n  lastScanned,\n  operatingSystemString,\n  OperatingSystem as OperatingSystemCell,\n} from './Cells';\n\nconst disableSorting = { isStatic: true };\n\nexport const compileColumnRenderFunc = ({ cell, ...column }) => ({\n  ...column,\n  renderFunc: renderComponent(cell, column.props),\n});\n\nexport const customColumn = (column, props) =>\n  compileColumnRenderFunc({\n    ...column,\n    props: {\n      ...column.props,\n      ...props,\n    },\n  });\n\nexport const Name = compileColumnRenderFunc({\n  key: 'name',\n  title: 'Name',\n  props: {\n    width: 40,\n    ...disableSorting,\n  },\n  renderExport: (system) => `${system.name} (${operatingSystemString(system)})`,\n  cell: NameCell,\n});\n\nexport const customName = (props) => ({\n  ...Name,\n  props: {\n    ...Name.props,\n    ...props,\n  },\n  renderFunc: renderComponent(NameCell, props),\n});\n\nexport const SsgVersion = {\n  title: 'SSG version',\n  transforms: [nowrap],\n  exportKey: 'testResultProfiles',\n  props: disableSorting,\n  renderExport: (testResultProfiles) =>\n    testResultProfiles\n      .map(\n        ({ supported, ssgVersion }) => `${!supported ? '!' : ''}${ssgVersion}`\n      )\n      .join(', '),\n  renderFunc: renderComponent(SsgVersionCell),\n};\n\nexport const Policies = {\n  title: 'Policies',\n  transforms: [nowrap],\n  exportKey: 'policies',\n  renderExport: (policies) => policies.map(({ name }) => name).join(', '),\n  props: {\n    width: 40,\n    ...disableSorting,\n  },\n  renderFunc: renderComponent(PoliciesCell),\n};\n\nexport const DetailsLink = {\n  title: '',\n  export: false,\n  props: {\n    width: 20,\n    ...disableSorting,\n  },\n  renderFunc: renderComponent(DetailsLinkCell),\n};\n\nexport const FailedRules = {\n  title: 'Failed rules',\n  exportKey: 'testResultProfiles',\n  transforms: [nowrap],\n  props: {\n    width: 5,\n    ...disableSorting,\n  },\n  renderExport: (testResultProfiles) =>\n    profilesRulesFailed(testResultProfiles).length,\n  renderFunc: renderComponent(FailedRulesCell),\n};\n\nexport const ComplianceScore = {\n  title: 'Compliance score',\n  exportKey: 'testResultProfiles',\n  transforms: [nowrap],\n  props: {\n    width: 5,\n    ...disableSorting,\n  },\n  renderExport: (testResultProfiles) =>\n    complianceScoreString(complianceScoreData(testResultProfiles)).trim(),\n  renderFunc: renderComponent(ComplianceScoreCell),\n};\n\nexport const LastScanned = {\n  title: 'Last scanned',\n  transforms: [nowrap],\n  exportKey: 'testResultProfiles',\n  props: {\n    width: 10,\n    ...disableSorting,\n  },\n  renderExport: (testResultProfiles) => lastScanned(testResultProfiles),\n  renderFunc: renderComponent(LastScannedCell),\n};\n\nexport const OperatingSystem = compileColumnRenderFunc({\n  title: 'Operating system',\n  key: 'operatingSystem',\n  transforms: [nowrap],\n  props: disableSorting,\n  renderExport: (cell) => operatingSystemString(cell),\n  cell: OperatingSystemCell,\n});\n\nexport const inventoryColumn = (column, props) => ({\n  key: column,\n  props,\n});\n","import gql from 'graphql-tag';\nimport pickBy from 'lodash/pickBy';\nimport {\n  systemsPolicyFilterConfiguration,\n  systemsOsFilterConfiguration,\n  systemsOsMinorFilterConfiguration,\n} from '@/constants';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/Registry';\nimport { entitiesReducer } from 'Store/Reducers/SystemStore';\n\nexport const GET_SYSTEMS = gql`\n  query getSystems(\n    $filter: String!\n    $policyId: ID\n    $perPage: Int\n    $page: Int\n    $sortBy: [String!]\n    $tags: [String!]\n  ) {\n    systems(\n      search: $filter\n      limit: $perPage\n      offset: $page\n      sortBy: $sortBy\n      tags: $tags\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          name\n          osMajorVersion\n          osMinorVersion\n          culledTimestamp\n          staleWarningTimestamp\n          staleTimestamp\n          insightsId\n          lastScanned\n          testResultProfiles(policyId: $policyId) {\n            id\n            name\n            refId\n            lastScanned\n            compliant\n            external\n            score\n            supported\n            ssgVersion\n            majorOsVersion\n            rules {\n              refId\n              title\n              compliant\n              remediationAvailable\n            }\n          }\n          policies(policyId: $policyId) {\n            id\n            name\n          }\n          tags {\n            namespace\n            key\n            value\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_SYSTEMS_WITHOUT_FAILED_RULES = gql`\n  query getSystems(\n    $filter: String!\n    $policyId: ID\n    $perPage: Int\n    $page: Int\n    $sortBy: [String!]\n    $tags: [String!]\n  ) {\n    systems(\n      search: $filter\n      limit: $perPage\n      offset: $page\n      sortBy: $sortBy\n      tags: $tags\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          name\n          osMajorVersion\n          osMinorVersion\n          culledTimestamp\n          staleWarningTimestamp\n          staleTimestamp\n          insightsId\n          lastScanned\n          testResultProfiles(policyId: $policyId) {\n            id\n            name\n            lastScanned\n            external\n            compliant\n            score\n            supported\n            ssgVersion\n            policy {\n              id\n            }\n          }\n          policies(policyId: $policyId) {\n            id\n            name\n          }\n          tags {\n            namespace\n            key\n            value\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_MINIMAL_SYSTEMS = gql`\n  query getSystems(\n    $filter: String!\n    $perPage: Int\n    $page: Int\n    $sortBy: [String!]\n    $tags: [String!]\n  ) {\n    systems(\n      search: $filter\n      limit: $perPage\n      offset: $page\n      sortBy: $sortBy\n      tags: $tags\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          name\n          osMajorVersion\n          osMinorVersion\n          culledTimestamp\n          staleWarningTimestamp\n          staleTimestamp\n          insightsId\n          lastScanned\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_SYSTEMS_TAGS = gql`\n  query getSystems($filter: String!, $limit: Int) {\n    systems(search: $filter, limit: $limit) {\n      tags {\n        namespace\n        key\n        value\n      }\n    }\n  }\n`;\n\nexport const policyFilter = (policies, osFilter) => [\n  ...systemsPolicyFilterConfiguration(policies),\n  ...(osFilter ? systemsOsFilterConfiguration(policies) : []),\n];\n\nexport const osMinorVersionFilter = (...args) =>\n  systemsOsMinorFilterConfiguration(...args);\n\nexport const initFilterState = (filterConfig) =>\n  pickBy(filterConfig.initialDefaultState(), (value) => !!value);\n\nexport const defaultOnLoad =\n  (columns) =>\n  ({ INVENTORY_ACTION_TYPES, mergeWithEntities }) =>\n    getRegistry().register({\n      ...mergeWithEntities(entitiesReducer(INVENTORY_ACTION_TYPES, columns)),\n    });\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport Skeleton, {\n  SkeletonSize,\n} from '@redhat-cloud-services/frontend-components/Skeleton';\nimport { registryDecorator } from '@redhat-cloud-services/frontend-components-utilities/Registry';\nimport {\n  InventoryDetail,\n  DetailWrapper,\n} from '@redhat-cloud-services/frontend-components/Inventory';\n\n@registryDecorator()\nclass InventoryDetails extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <DetailWrapper\n        onLoad={({ mergeWithDetail }) =>\n          this.getRegistry().register({\n            ...mergeWithDetail(),\n          })\n        }\n      >\n        <InventoryDetail\n          fallback={<Skeleton size={SkeletonSize.md} />}\n          hideBack\n        />\n      </DetailWrapper>\n    );\n  }\n}\n\nInventoryDetails.propTypes = {\n  entity: propTypes.object,\n};\n\nconst ConnectedInventoryDetails = (props) => {\n  return <InventoryDetails {...props} />;\n};\n\nexport default ConnectedInventoryDetails;\n","import { camelCase, getProperty } from 'Utilities/helpers';\n\nconst CSV_FILE_PREFIX = 'compliance-export';\nconst CSV_DELIMITER = ',';\nconst ENCODINGS = {\n  csv: 'text/csv',\n  json: 'application/json',\n};\n\nconst filename = (format) =>\n  CSV_FILE_PREFIX + '-' + new Date().toISOString() + '.' + format;\n\nconst encoding = (format) => `data:${ENCODINGS[format]};charset=utf-8`;\n\nexport const linkAndDownload = (data, filename) => {\n  const link = document.createElement('a');\n  link.href = data;\n  link.download = filename;\n  link.click();\n};\n\nconst textForCell = (row, column) => {\n  const { exportKey, renderExport } = column;\n  let cell = exportKey ? getProperty(row, exportKey) : row;\n  if (renderExport) {\n    return renderExport(cell);\n  } else {\n    return cell;\n  }\n};\n\nexport const csvForItems = ({ items, columns }) => {\n  const header = columns.map((column) => column.title).join(CSV_DELIMITER);\n  const csvRows = [\n    header,\n    ...items.map((row) =>\n      columns\n        .map((column) => `\"${textForCell(row, column)}\"`)\n        .join(CSV_DELIMITER)\n    ),\n  ];\n\n  return encodeURI(`${encoding('csv')},${csvRows.join('\\n')}`);\n};\n\nexport const jsonForItems = ({ items, columns }) => {\n  const result = items.map((row) =>\n    columns.reduce((object, column) => {\n      const key = camelCase(column.title);\n      const value = textForCell(row, column);\n\n      object[key] = value;\n      return object;\n    }, {})\n  );\n\n  return encodeURI(`${encoding('json')},${JSON.stringify(result)}`);\n};\n\nconst useExport = ({ exporter, columns = [], isDisabled = false }) => {\n  const exportableColumns = columns.filter(\n    (column) =>\n      column.export !== false && (column.exportKey || column.renderExport)\n  );\n  const exportWithFormat = async (format) => {\n    const items = await exporter();\n    const formater = format === 'csv' ? csvForItems : jsonForItems;\n\n    if (items) {\n      return linkAndDownload(\n        formater({\n          items,\n          columns: exportableColumns,\n        }),\n        filename(format)\n      );\n    } else {\n      console.info('No items returned for export');\n      return;\n    }\n  };\n\n  return {\n    toolbarProps: {\n      exportConfig: {\n        isDisabled,\n        onSelect: (_, format) => exportWithFormat(format),\n      },\n    },\n  };\n};\n\nexport default useExport;\n","import { useEffect, useLayoutEffect, useState } from 'react';\nimport { useApolloClient } from '@apollo/client';\nimport { useDispatch } from 'react-redux';\nimport debounce from '@redhat-cloud-services/frontend-components-utilities/debounce';\nimport useCollection from 'Utilities/hooks/api/useCollection';\nimport { systemsWithRuleObjectsFailed } from 'Utilities/ruleHelpers';\nimport {\n  osMinorVersionFilter,\n  GET_MINIMAL_SYSTEMS,\n  GET_SYSTEMS_TAGS,\n} from './constants';\nimport useExport from 'Utilities/hooks/useTableTools/useExport';\nimport { useBulkSelect } from 'Utilities/hooks/useTableTools/useBulkSelect';\nimport { dispatchNotification } from 'Utilities/Dispatcher';\n\nconst groupByMajorVersion = (versions = [], showFilter = []) => {\n  const showVersion = (version) => {\n    if (showFilter.length > 0) {\n      return showFilter.map(String).includes(String(version));\n    } else {\n      return true;\n    }\n  };\n\n  return versions.reduce((acc, currentValue) => {\n    if (showVersion(currentValue.osMajorVersion)) {\n      acc[String(currentValue.osMajorVersion)] = [\n        ...new Set([\n          ...(acc[currentValue.osMajorVersion] || []),\n          currentValue.osMinorVersion,\n        ]),\n      ];\n    }\n\n    return acc;\n  }, []);\n};\n\nexport const useOsMinorVersionFilter = (showFilter) => {\n  const { data: supportedSsgs } = useCollection('supported_ssgs', {\n    type: 'supportedSsg',\n    skip: !showFilter,\n  });\n\n  return showFilter\n    ? osMinorVersionFilter(\n        groupByMajorVersion(supportedSsgs?.collection, showFilter)\n      )\n    : [];\n};\n\nexport const useSystemsFilter = (\n  filterString,\n  showOnlySystemsWithTestResults,\n  defaultFilter\n) => {\n  const combindedFilter = [\n    ...(showOnlySystemsWithTestResults ? ['has_test_results = true'] : []),\n    ...(filterString?.length > 0 ? [filterString] : []),\n  ].join(' and ');\n  const filter = defaultFilter\n    ? `(${defaultFilter})` +\n      (combindedFilter ? ` and (${combindedFilter})` : '')\n    : combindedFilter;\n\n  return filter;\n};\n\nconst renameInventoryAttributes = ({\n  culledTimestamp,\n  staleWarningTimestamp,\n  staleTimestamp,\n  insightsId,\n  lastScanned,\n  ...system\n}) => ({\n  ...system,\n  updated: lastScanned,\n  culled_timestamp: culledTimestamp,\n  stale_warning_timestamp: staleWarningTimestamp,\n  stale_timestamp: staleTimestamp,\n  insights_id: insightsId,\n});\n\nexport const useFetchSystems = ({\n  query,\n  onComplete,\n  variables = {},\n  onError,\n}) => {\n  const client = useApolloClient();\n\n  return (perPage, page, requestVariables = {}) =>\n    client\n      .query({\n        query,\n        fetchResults: true,\n        fetchPolicy: 'no-cache',\n        variables: {\n          perPage,\n          page,\n          ...variables,\n          ...requestVariables,\n        },\n      })\n      .then(({ data }) => {\n        const systems = data?.systems?.edges?.map((e) => e.node) || [];\n        const entities = systemsWithRuleObjectsFailed(systems).map(\n          renameInventoryAttributes\n        );\n        const result = {\n          entities,\n          meta: {\n            ...(requestVariables.tags && { tags: requestVariables.tags }),\n            totalCount: data?.systems?.totalCount || 0,\n          },\n        };\n\n        onComplete && onComplete(result);\n        return result;\n      })\n      .catch((error) => {\n        if (onError) {\n          onError(error);\n          return { entities: [], meta: { totalCount: 0 } };\n        } else {\n          throw error;\n        }\n      });\n};\n\nconst fetchBatched = (fetchFunction, total, filter, batchSize = 100) => {\n  const pages = Math.ceil(total / batchSize) || 1;\n  return Promise.all(\n    [...new Array(pages)].map((_, pageIdx) =>\n      fetchFunction(batchSize, pageIdx + 1, filter)\n    )\n  );\n};\n\nconst buildApiFilters = (filters = {}) => {\n  const { tagFilters, ...otherFilters } = filters;\n  const tagsApiFilter = tagFilters\n    ? {\n        tags: tagFilters.flatMap((tagFilter) =>\n          tagFilter.values.map(\n            (tag) =>\n              `${encodeURIComponent(tagFilter.key)}/${encodeURIComponent(\n                tag.tagKey\n              )}=${encodeURIComponent(tag.value)}`\n          )\n        ),\n      }\n    : {};\n\n  return {\n    ...otherFilters,\n    ...tagsApiFilter,\n  };\n};\n\nexport const useGetEntities = (fetchEntities, { selected, columns } = {}) => {\n  const appendDirection = (attributes, direction) =>\n    attributes.map((attribute) => `${attribute}:${direction}`);\n\n  const findColumnByKey = (key) =>\n    (columns || []).find((column) => column.key === key);\n\n  return async (\n    _ids,\n    { page = 1, per_page: perPage, orderBy, orderDirection, filters }\n  ) => {\n    const sortableColumn = findColumnByKey(orderBy);\n    const sortBy =\n      sortableColumn && sortableColumn.sortBy\n        ? appendDirection(sortableColumn.sortBy, orderDirection)\n        : undefined;\n    const filterForApi = buildApiFilters(filters);\n\n    const fetchedEntities = await fetchEntities(perPage, page, {\n      ...filterForApi,\n      sortBy,\n    });\n    const {\n      entities,\n      meta: { totalCount },\n    } = fetchedEntities || {};\n\n    return {\n      results: entities.map((entity) => ({\n        ...entity,\n        selected: (selected || []).map((id) => id).includes(entity.id),\n      })),\n      orderBy,\n      orderDirection,\n      total: totalCount,\n    };\n  };\n};\n\n// This hook is primarily meant to work around issues in the inventory\nexport const useInventoryUtilities = (\n  inventory,\n  selectedSystems,\n  activeFilters\n) => {\n  const dispatch = useDispatch();\n\n  // Resets the Inventory to a loading state\n  // and prevents previously shown columns and rows to appear\n  useLayoutEffect(() => {\n    dispatch({\n      type: 'INVENTORY_INIT',\n    });\n  }, []);\n\n  // Ensures rows are marked as selected\n  useEffect(() => {\n    dispatch({\n      type: 'SELECT_ENTITIES',\n      payload: {\n        selected: selectedSystems,\n      },\n    });\n  }, [selectedSystems]);\n\n  // Filters do not yet trigger the inventory to call getEntities\n  // and the page would not reset to page 1\n  const resetPage = () => {\n    Promise.resolve(\n      dispatch({\n        type: 'RESET_PAGE',\n      })\n    ).then(() => inventory?.current?.onRefreshData());\n  };\n\n  // The debounce is to not have filter updates collide or get out of order.\n  const debounceResetPage = debounce(resetPage, 50);\n\n  useEffect(() => {\n    debounceResetPage();\n  }, [activeFilters]);\n};\n\nconst toIdFilter = (ids) =>\n  ids?.length > 0 ? `id ^ (${ids.join(',')})` : undefined;\n\nexport const useSystemsExport = ({\n  columns,\n  selected,\n  total,\n  fetchArguments,\n}) => {\n  const selectionFilter = selected ? toIdFilter(selected) : undefined;\n  const fetchSystems = useFetchSystems({\n    query: fetchArguments.query,\n    variables: {\n      ...fetchArguments.variables,\n      ...(fetchArguments.tags && { tags: fetchArguments.tags }),\n      filter: selectionFilter\n        ? `${fetchArguments.variables.filter} and (${selectionFilter})`\n        : fetchArguments.variables.filter,\n    },\n    onError: () => {\n      dispatchNotification({\n        variant: 'danger',\n        title: 'Couldn’t download export',\n        description: 'Reinitiate this export to try again.',\n      });\n    },\n    onComplete: () => {\n      dispatchNotification({\n        variant: 'success',\n        title: 'Downloading export',\n      });\n    },\n  });\n\n  const selectedFilter = () =>\n    selected?.length > 0 ? toIdFilter(selected) : undefined;\n\n  const exporter = async () => {\n    dispatchNotification({\n      variant: 'info',\n      title: 'Preparing export',\n      description: 'Once complete, your download will start automatically.',\n    });\n    const fetchedItems = await fetchBatched(\n      fetchSystems,\n      total,\n      selectedFilter()\n    );\n\n    return fetchedItems.flatMap((result) => result.entities);\n  };\n\n  const {\n    toolbarProps: { exportConfig },\n  } = useExport({\n    exporter,\n    columns,\n    isDisabled: total === 0,\n  });\n\n  return exportConfig;\n};\n\nexport const useSystemBulkSelect = ({\n  total,\n  onSelect,\n  preselected,\n  fetchArguments,\n  currentPageIds,\n  systemsCache = [],\n}) => {\n  // This is meant as a compatibility layer and to be removed\n  const [selectedSystems, setSelectedSystems] = useState([]);\n  const fetchSystems = useFetchSystems({\n    ...fetchArguments,\n    query: GET_MINIMAL_SYSTEMS,\n    onError: (error) => {\n      dispatchNotification({\n        variant: 'danger',\n        title: 'Error selecting systems',\n        description: error.message,\n      });\n    },\n  });\n\n  const fetchFunc = async (fetchIds) => {\n    if (fetchIds.length === 0) {\n      return [];\n    }\n\n    const idFilter = toIdFilter(fetchIds);\n    const results = await fetchBatched(fetchSystems, fetchIds.length, {\n      ...(idFilter && { filter: idFilter }),\n    });\n\n    return results.flatMap((result) => result.entities);\n  };\n\n  const cachedOrFetch = async (selectedIds) => {\n    const cachedSystems = systemsCache.filter(({ id }) =>\n      selectedIds.includes(id)\n    );\n    const cachedIds = cachedSystems.map(({ id }) => id);\n    const fetchIds = selectedIds.filter((id) => !cachedIds.includes(id));\n    const fetchedSystems = await fetchFunc(fetchIds);\n\n    return [...cachedSystems, ...fetchedSystems];\n  };\n\n  const onSelectCallback = async (selectedIds) => {\n    const systems = await cachedOrFetch(selectedIds);\n    setSelectedSystems(systems);\n    onSelect && onSelect(systems);\n  };\n\n  const itemIdsInTable = async () => {\n    const results = await fetchBatched(fetchSystems, total);\n    return results.flatMap((result) => result.entities.map(({ id }) => id));\n  };\n\n  const bulkSelect = useBulkSelect({\n    total,\n    onSelect: onSelectCallback,\n    preselected,\n    itemIdsInTable,\n    itemIdsOnPage: () => currentPageIds,\n  });\n  return {\n    selectedSystems,\n    ...bulkSelect,\n  };\n};\n\nconst searchTagsByKey = (search, tags) =>\n  tags.filter((tagItem) => {\n    if (search || search === '') {\n      return tagItem?.key.indexOf(search) !== -1;\n    } else {\n      return true;\n    }\n  });\n\nconst useFetchTag = () => {\n  const apiClient = useApolloClient();\n\n  return async (page, per_page, search, fetchArguments) => {\n    const fetchedTags = await apiClient\n      .query({\n        query: GET_SYSTEMS_TAGS,\n        ...fetchArguments,\n      })\n      .then(\n        ({\n          data: {\n            systems: { tags },\n          },\n        }) =>\n          searchTagsByKey(search, tags).map((tag) => ({\n            tag,\n          }))\n      );\n\n    const start = per_page * page - per_page;\n    const end = start + per_page;\n\n    return {\n      total: fetchedTags.length,\n      results: fetchedTags.slice(start, end),\n    };\n  };\n};\n\nexport const useTags = (tagsEnabled, fetchArguments) => {\n  const [currentTags, setCurrentTags] = useState();\n  const fetchTags = useFetchTag();\n\n  const getTags = async (search, config) => {\n    const { page, perPage: per_page } = config.pagination || {\n      perPage: 10,\n      page: 1,\n    };\n    const { total, results: tagsList } = await fetchTags(\n      page,\n      per_page,\n      search,\n      fetchArguments\n    );\n\n    return {\n      page,\n      per_page,\n      total,\n      results: tagsList,\n    };\n  };\n\n  return tagsEnabled\n    ? {\n        props: {\n          hideFilters: {\n            name: true,\n            tags: false,\n            registeredWith: true,\n            stale: true,\n          },\n          showTags: true,\n        },\n        currentTags,\n        setCurrentTags,\n        getTags,\n      }\n    : {\n        props: {\n          hideFilters: {\n            name: true,\n            tags: true,\n            registeredWith: true,\n            stale: true,\n          },\n        },\n      };\n};\n","import React, { useMemo, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Spinner } from '@patternfly/react-core';\nimport { TableVariant } from '@patternfly/react-table';\n// eslint-disable-next-line max-len\nimport ComplianceRemediationButton from '@/PresentationalComponents/ComplianceRemediationButton';\nimport {\n  DEFAULT_SYSTEMS_FILTER_CONFIGURATION,\n  COMPLIANT_SYSTEMS_FILTER_CONFIGURATION,\n} from '@/constants';\nimport { ErrorPage, StateView, StateViewPart } from 'PresentationalComponents';\nimport useFilterConfig from 'Utilities/hooks/useTableTools/useFilterConfig';\nimport { InventoryTable as FECInventoryTable } from '@redhat-cloud-services/frontend-components/Inventory';\nimport { policyFilter, defaultOnLoad } from './constants';\nimport {\n  useFetchSystems,\n  useGetEntities,\n  useOsMinorVersionFilter,\n  useInventoryUtilities,\n  useSystemsExport,\n  useSystemsFilter,\n  useSystemBulkSelect,\n  useTags,\n} from './hooks';\nimport useFeature from 'Utilities/hooks/useFeature';\n\nexport const InventoryTable = ({\n  columns,\n  showAllSystems,\n  policyId,\n  query,\n  showActions,\n  enableExport,\n  compliantFilter,\n  policies,\n  showOnlySystemsWithTestResults,\n  showOsFilter,\n  error,\n  showComplianceSystemsInfo,\n  compact,\n  remediationsEnabled,\n  systemProps,\n  defaultFilter,\n  emptyStateComponent,\n  prependComponent,\n  showOsMinorVersionFilter,\n  preselectedSystems,\n  onSelect: onSelectProp,\n  noSystemsTable,\n}) => {\n  const tagsEnabled = useFeature('tags');\n  const inventory = useRef(null);\n  const [isEmpty, setIsEmpty] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [items, setItems] = useState([]);\n  const [total, setTotal] = useState(0);\n  const osMinorVersionFilter = useOsMinorVersionFilter(\n    showOsMinorVersionFilter\n  );\n  const {\n    toolbarProps: conditionalFilter,\n    filterString,\n    activeFilterValues,\n  } = useFilterConfig({\n    filters: {\n      filterConfig: [\n        ...DEFAULT_SYSTEMS_FILTER_CONFIGURATION,\n        ...(compliantFilter ? COMPLIANT_SYSTEMS_FILTER_CONFIGURATION : []),\n        ...(policies?.length > 0 ? policyFilter(policies, showOsFilter) : []),\n        ...osMinorVersionFilter,\n      ],\n    },\n  });\n  const systemsFilter = useSystemsFilter(\n    filterString(),\n    showOnlySystemsWithTestResults,\n    defaultFilter\n  );\n\n  const {\n    props: tagsProps,\n    currentTags,\n    setCurrentTags,\n    getTags,\n  } = useTags(tagsEnabled, {\n    variables: {\n      filter: systemsFilter,\n      ...(policyId && { policyId }),\n    },\n  });\n\n  const systemFetchArguments = {\n    query,\n    variables: {\n      tags: currentTags,\n      filter: systemsFilter,\n      ...(policyId && { policyId }),\n    },\n  };\n\n  const preselection = useMemo(\n    () => preselectedSystems.map(({ id }) => id),\n    [preselectedSystems]\n  );\n\n  const {\n    selectedIds,\n    selectedSystems,\n    tableProps: bulkSelectTableProps,\n    toolbarProps: bulkSelectToolBarProps,\n  } = useSystemBulkSelect({\n    total,\n    onSelect: onSelectProp,\n    preselected: preselection,\n    fetchArguments: systemFetchArguments,\n    currentPageIds: items.map(({ id }) => id),\n    systemsCache: items,\n  });\n\n  useInventoryUtilities(inventory, selectedIds, activeFilterValues);\n\n  const onComplete = (result) => {\n    setTotal(result.meta.totalCount);\n    setItems(result.entities);\n    setIsLoaded(true);\n    setCurrentTags && setCurrentTags(result.meta.tags);\n\n    if (\n      emptyStateComponent &&\n      result.meta.totalCount === 0 &&\n      activeFilterValues.length === 0 &&\n      result?.meta?.tags?.length === 0\n    ) {\n      setIsEmpty(true);\n    }\n  };\n\n  const fetchSystems = useFetchSystems({\n    ...systemFetchArguments,\n    onComplete,\n  });\n  const getEntities = useGetEntities(fetchSystems, {\n    selected: selectedIds,\n    columns,\n  });\n  const exportConfig = useSystemsExport({\n    columns,\n    filter: systemsFilter,\n    selected: selectedIds,\n    total,\n    fetchArguments: {\n      tags: currentTags,\n      ...systemFetchArguments,\n    },\n  });\n\n  const mergedColumns = (defaultColumns) =>\n    columns.map((column) => {\n      const isStringCol = typeof column === 'string';\n      const key = isStringCol ? column : column.key;\n      const defaultColumn = defaultColumns.find(\n        (defaultCol) => defaultCol.key === key\n      );\n      return {\n        ...defaultColumn,\n        ...(isStringCol ? { key: column } : column),\n        props: {\n          ...defaultColumn?.props,\n          ...column?.props,\n        },\n      };\n    });\n\n  return (\n    <StateView\n      stateValues={{\n        error,\n        noError: error === undefined && !isEmpty,\n        empty: isEmpty,\n      }}\n    >\n      <StateViewPart stateKey=\"error\">\n        {!!prependComponent && prependComponent}\n        <ErrorPage error={error} />\n      </StateViewPart>\n      <StateViewPart stateKey=\"empty\">{emptyStateComponent}</StateViewPart>\n      <StateViewPart stateKey=\"noError\">\n        {!!prependComponent && isLoaded && prependComponent}\n        {showComplianceSystemsInfo && (\n          <Alert\n            isInline\n            variant=\"info\"\n            ouiaId=\"SystemsListIsDifferentAlert\"\n            title={\n              'The list of systems in this view is different than those that appear in the Inventory. ' +\n              'Only systems currently associated with or reporting against compliance policies are displayed.'\n            }\n          />\n        )}\n        <FECInventoryTable\n          {...systemProps}\n          {...tagsProps}\n          disableDefaultColumns\n          columns={mergedColumns}\n          noSystemsTable={noSystemsTable}\n          ref={inventory}\n          getEntities={getEntities}\n          getTags={getTags}\n          onLoad={defaultOnLoad(columns)}\n          tableProps={{\n            ...bulkSelectTableProps,\n            isStickyHeader: true,\n          }}\n          fallback={<Spinner />}\n          variant={compact ? TableVariant.compact : ''}\n          {...bulkSelectToolBarProps}\n          {...(!showAllSystems && {\n            ...conditionalFilter,\n            ...(remediationsEnabled && {\n              dedicatedAction: (\n                <ComplianceRemediationButton\n                  allSystems={selectedSystems}\n                  selectedRules={[]}\n                />\n              ),\n            }),\n          })}\n          {...(enableExport && { exportConfig })}\n          {...(showActions && {\n            actions: [\n              {\n                title: 'View in inventory',\n                onClick: (_event, _index, { id }) => {\n                  const beta =\n                    window.location.pathname.split('/')[1] === 'beta';\n                  window.location.href = `${window.location.origin}${\n                    beta ? '/beta' : ''\n                  }/insights/inventory/${id}`;\n                },\n              },\n            ],\n          })}\n        />\n      </StateViewPart>\n    </StateView>\n  );\n};\n\nInventoryTable.propTypes = {\n  columns: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.shape({}), PropTypes.string])\n  ),\n  policies: PropTypes.arrayOf(PropTypes.shape({})),\n  showAllSystems: PropTypes.bool,\n  policyId: PropTypes.string,\n  query: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  showActions: PropTypes.bool,\n  enableExport: PropTypes.bool,\n  compliantFilter: PropTypes.bool,\n  showOnlySystemsWithTestResults: PropTypes.bool,\n  showOsFilter: PropTypes.bool,\n  showComplianceSystemsInfo: PropTypes.bool,\n  error: PropTypes.object,\n  compact: PropTypes.bool,\n  remediationsEnabled: PropTypes.bool,\n  defaultFilter: PropTypes.string,\n  systemProps: PropTypes.shape({\n    isFullView: PropTypes.bool,\n  }),\n  emptyStateComponent: PropTypes.node,\n  prependComponent: PropTypes.node,\n  showOsMinorVersionFilter: PropTypes.oneOfType([\n    PropTypes.bool,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  preselectedSystems: PropTypes.array,\n  onSelect: PropTypes.func,\n  noSystemsTable: PropTypes.node,\n};\n\nInventoryTable.defaultProps = {\n  policyId: '',\n  showActions: true,\n  enableExport: true,\n  compliantFilter: false,\n  showOnlySystemsWithTestResults: false,\n  showComplianceSystemsInfo: false,\n  compact: false,\n  remediationsEnabled: true,\n  preselectedSystems: [],\n};\n\nexport default InventoryTable;\n","class ApiClient {\n  DEFAULT_API_HEADERS = {\n    'Content-Type': 'application/vnd.api+json',\n    Accept: 'application/json',\n  };\n\n  constructor(options = {}) {\n    this.apiBase = options.apiBase || '/api';\n    this.path = options.path || '';\n    this.authenticate = options.authenticate || (() => Promise.resolve({}));\n    this.onUnauthorised = options.onUnauthorised || (() => Promise.resolve({}));\n    this.defaultHeaders = options.headers || this.DEFAULT_API_HEADERS;\n  }\n\n  async request(path, apiProps, method, options = {}) {\n    return await this.callAuthenticate()\n      .then(() => this.fetch(path, apiProps, method, options))\n      .then(this.checkForEmptyResponse)\n      .then((response) => this.checkForErrors(response, options))\n      .then((response) => response.json())\n      .catch(this.finalCatch);\n  }\n\n  finalCatch(promise) {\n    if (promise.errors === undefined) {\n      return Promise.reject({ title: 'Error parsing' });\n    } else {\n      return Promise.reject({ ...promise });\n    }\n  }\n\n  fetch(path, apiProps, method, options) {\n    let params = {\n      method: method || 'get',\n      headers: this.defaultHeaders,\n      credentials: 'include',\n    };\n    const fullPath = `${this.apiBase}${this.path ? this.path : ''}${\n      path ? path : ''\n    }`;\n    let url = new URL(fullPath, window.location.origin);\n    if (options.params) {\n      const params = Object.keys(options.params)\n        .map(\n          (key) =>\n            encodeURIComponent(key) +\n            '=' +\n            encodeURIComponent(options.params[key])\n        )\n        .join('&');\n      url.search = new URLSearchParams(params);\n    }\n\n    if (apiProps) {\n      params.body = JSON.stringify(apiProps);\n    }\n\n    return fetch(url, params);\n  }\n\n  checkForEmptyResponse(response) {\n    return response.status === 204 ? { json: () => ({}) } : response;\n  }\n\n  checkForErrors(response, options = {}) {\n    if (response.status === 404 && options.ignore404) {\n      return { json: () => ({}) };\n    }\n\n    if (response.status === 401) {\n      return this.onUnauthorised();\n    }\n\n    const responseCloneJson = response.clone\n      ? response.clone().json()\n      : response;\n\n    if (response.status === 422) {\n      return responseCloneJson.then((json) =>\n        Promise.reject({ ...json, title: 'Validation error' })\n      );\n    }\n\n    if (response.status >= 400 && response.status <= 600) {\n      return responseCloneJson.then((json) => Promise.reject(json.errors[0]));\n    }\n\n    return response;\n  }\n\n  callAuthenticate() {\n    return Promise.resolve(this.authenticate() || true);\n  }\n\n  create(path, apiProps) {\n    return this.request(path, apiProps, 'post');\n  }\n\n  update(path, apiProps) {\n    return this.request(path, apiProps, 'put');\n  }\n\n  get(path, options = {}) {\n    return this.request(path, null, 'get', options);\n  }\n\n  destroy(path) {\n    return this.request(path, null, 'delete');\n  }\n}\n\nexport default ApiClient;\n","import ApiClient from './utils/ApiClient';\n\nconst useApi = (options) => {\n  const apiClient = new ApiClient({\n    ...options,\n  });\n\n  return apiClient;\n};\n\nexport default useApi;\n","import { useEffect, useState } from 'react';\nimport { COMPLIANCE_API_ROOT } from '@/constants';\nimport normalize from 'json-api-normalizer';\nimport useApi from './useApi';\n\nconst includePropAndDelete = (entity, prop) => {\n  const attributes = entity[prop];\n  let newEntity = entity;\n  delete newEntity[prop];\n  return { ...newEntity, ...attributes };\n};\n\nconst includeAttributes = (entity) =>\n  entity && includePropAndDelete(entity, 'attributes');\n\nconst includeRelationship = (entity, normalizedJson) => {\n  let relationships = {};\n  Object.entries(entity?.relationships || []).forEach((item) => {\n    const [relationship, relationshipData] = item;\n    relationships[relationship] = relationshipData?.data\n      .map((entity) =>\n        includeAttributes(normalizedJson?.[entity.type]?.[entity.id])\n      )\n      .filter((v) => !!v);\n  });\n  delete entity.relationships;\n  return { ...entity, ...relationships };\n};\n\nconst normalizeData = (json, type) => {\n  const jsonNormalized = normalize(json);\n  return Object.values(jsonNormalized[type] || {})?.map((entity) =>\n    includeRelationship(includeAttributes(entity), jsonNormalized)\n  );\n};\n\nconst fetchCollection = async (\n  apiClient,\n  collection,\n  params = {},\n  options = {}\n) => {\n  const json = await apiClient.get(`/${collection}`, { params });\n  const normalized = await normalizeData(json, options?.type || collection);\n\n  return {\n    collection: normalized,\n    meta: json.meta,\n    total: json.meta.total,\n    json,\n  };\n};\n\nconst useCollection = (collection, options = {}, dependencies = []) => {\n  const [collectionState, setCollectionState] = useState({\n    data: undefined,\n    loading: false,\n    error: undefined,\n  });\n  const apiClient = useApi({\n    apiBase: COMPLIANCE_API_ROOT,\n  });\n  const params = {\n    ...(options?.params || {}),\n    include: options?.include || [],\n  };\n\n  useEffect(() => {\n    if (!options?.skip) {\n      setCollectionState({\n        data: undefined,\n        loading: true,\n        error: undefined,\n      });\n\n      fetchCollection(apiClient, collection, params, options).then((data) => {\n        setCollectionState({\n          data,\n          loading: false,\n          error: undefined,\n        });\n      });\n    }\n  }, [...dependencies, options?.skip]);\n\n  return collectionState;\n};\n\nexport default useCollection;\n","import { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport { sortingByProp } from 'Utilities/helpers';\n\nconst selectRows = (rows, selected) =>\n  rows.map((row) => ({\n    ...row,\n    selected: selected.includes(row.id),\n  }));\n\nexport const entitiesReducer = () =>\n  applyReducerHash({\n    ['INVENTORY_INIT']: () => ({\n      rows: [],\n      total: 0,\n    }),\n    ['RESET_PAGE']: (state) => ({\n      ...state,\n      page: 1,\n    }),\n    ['SELECT_ENTITIES']: (state, { payload: { selected } }) => ({\n      ...state,\n      rows: selectRows(state.rows, selected),\n    }),\n  });\n\nexport const mapCountOsMinorVersions = (systems) => {\n  if (!systems) {\n    return {};\n  }\n\n  return systems.reduce((acc, { osMinorVersion }) => {\n    if (osMinorVersion !== undefined && osMinorVersion !== null) {\n      (acc[osMinorVersion] = acc[osMinorVersion] || {\n        osMinorVersion,\n        count: 0,\n      }).count++;\n    }\n\n    return acc;\n  }, {});\n};\n\nexport const countOsMinorVersions = (systems) =>\n  Object.values(mapCountOsMinorVersions(systems)).sort(\n    sortingByProp('osMinorVersion', 'desc')\n  );\n"],"names":["QUERY","gql","ComplianceSystems","useQuery","data","error","loading","policies","profiles","edges","map","node","className","title","stateValues","stateKey","columns","Columns","showLink","showOsInfo","isStatic","query","GET_SYSTEMS","defaultFilter","systemProps","isFullView","showOsMinorVersionFilter","policy","majorOsVersion","showComplianceSystemsInfo","enableEditPolicy","remediationsEnabled","BENCHMARKS_AND_PROFILES","PolicyTooltip","Tooltip","position","content","CreateSCAPPolicy","change","selectedBenchmarkId","selectedProfile","fetchPolicy","Spinner","selectedBenchmark","validProfiles","benchmark","benchmarks","latestBenchmarks","find","id","userProfileRefIds","filter","profile","refId","disabled","includes","TextContent","Text","component","TextVariants","Form","FormGroup","label","isRequired","fieldId","sort","a","b","localeCompare","osMajorVersion","Tile","key","onClick","setBenchmark","isSelected","isStacked","labelIcon","onChange","value","undefined","propTypes","reduxFormPropTypes","selector","formValueSelector","compose","connect","state","reduxForm","form","destroyOnUnmount","forceUnregisterOnUnmount","PROFILES_QUERY","BENCHMARKS_QUERY","EditPolicyProfilesRules","selectedRuleRefIds","osMinorVersionCounts","osMinorVersions","i","osMinorVersion","benchmarkSearch","join","variables","skip","length","benchmarksData","benchmarksError","benchmarksLoading","nodes","tabsData","systemCount","count","latestSupportedOsMinorVersions","getBenchmarkBySupportedOsMinor","profileRefId","benchmarkProfile","getBenchmarkProfile","newOsMinorVersion","profileToOsMinorMap","tabsDataToOsMinorMap","profileIds","Object","keys","skipProfilesQuery","profilesData","profilesError","profilesLoading","dataState","loadingState","noRuleSets","p","setSelectedRuleRefIds","newSelection","useLayoutEffect","profilesWithOs","extendProfilesByOsMinor","profilesWithRulesToSelection","only","name","EmptyState","Title","headingLevel","size","EmptyStateBody","EmptyTable","TabbedRules","selectedFilter","level","ouiaId","JSON","parse","WizardContextConsumer","goToStepById","Button","PrependComponent","EditPolicySystems","selectedSystems","prependComponent","emptyStateComponent","props","width","sortBy","compact","showActions","GET_SYSTEMS_WITHOUT_FAILED_RULES","enableExport","preselectedSystems","onSelect","newSelectedSystems","countOsMinorVersions","defaultProps","EditPolicyDetails","useEffect","description","Field","ReduxFormTextInput","type","isDisabled","ReduxFormTextArea","defaultValue","businessObjective","previousThreshold","complianceThreshold","initialValues","REVIEW","ReviewCreatedPolicy","benchmarkId","parentProfileName","style","marginTop","TextList","TextListVariants","TextListItem","TextListItemVariants","fontWeight","parseFloat","rulesCount","EmtpyStateWithErrors","errors","Array","isArray","List","ListItem","FinishedCreatePolicy","onWizardFinish","cloneFromProfileId","systems","useState","percent","setPercent","message","setMessage","setErrors","failed","setFailed","updatePolicy","usePolicy","onProgress","progress","hosts","then","dispatchNotification","variant","autoDismiss","Link","to","catch","networkError","result","Bullseye","EmptyStateVariant","EmptyStateIcon","icon","WrenchIcon","EmptyStateSecondaryActions","withApollo","CreatePolicy","systemIds","history","useHistory","stepIdReached","setStepIdReached","resetAnchor","location","hash","push","onClose","steps","enableNext","validateBenchmarkPage","canJumpTo","validateDetailsPage","validateSystemsPage","validateRulesPage","nextButtonText","isFinishedStep","Wizard","isOpen","onNext","onGoToStep","onBack","dispatch","EditPolicyDetailsTab","setUpdatedPolicy","validThreshold","setValidThreshold","threshold","valid","thresholdValid","useThresholdValidate","validateThreshold","TextArea","height","TextInput","validated","helperTextInvalid","helperText","complianceThresholdValid","EditPolicyRulesTabEmptyState","EditPolicyRulesTab","setNewRuleTabs","values","sortingByProp","parentProfileId","toTabsData","tab","prevSelection","empty","EditPolicySystemsTab","policyId","newRuleTabs","onSystemSelect","Alert","isInline","actionLinks","AlertActionLink","EditPolicyForm","setSelectedSystems","policyProfiles","setOsMinorVersionCounts","handleSystemSelect","reduce","acc","mapCountOsMinorVersions","profilesWithOsMinor","updateSelectedRuleRefIds","defaultTab","Tab","eventKey","TabTitleText","useLinkToPolicy","anchor","useAnchor","linkToBackground","useLinkToBackground","MULTIVERSION_QUERY","EditPolicy","route","useParams","policy_id","linkToPolicy","updatedPolicy","saveEnabled","updatedPolicyHostsAndRules","isSaving","setIsSaving","Promise","resolve","useOnSave","onSave","actions","spinnerAriaValueText","isLoading","useTitleEntity","C","minHeight","SystemLink","children","pathname","Name","hasOsInfo","SSGVersion","ssgVersion","supported","messageVariant","SSGVersions","testResultProfiles","DetailsLink","Policies","Truncate","inline","text","FailedRules","rulesFailed","profilesRulesFailed","ComplianceScore","complianceScore","complianceScoreData","lastScanned","dates","Date","last","Math","max","apply","date","isFinite","NEVER","LastScanned","lastScannedDate","DateFormat","operatingSystemString","disableSorting","compileColumnRenderFunc","cell","column","renderFunc","renderComponent","renderExport","system","NameCell","customName","SsgVersion","transforms","nowrap","exportKey","SsgVersionCell","PoliciesCell","DetailsLinkCell","FailedRulesCell","complianceScoreString","trim","ComplianceScoreCell","LastScannedCell","OperatingSystem","inventoryColumn","GET_MINIMAL_SYSTEMS","GET_SYSTEMS_TAGS","policyFilter","osFilter","systemsPolicyFilterConfiguration","systemsOsFilterConfiguration","osMinorVersionFilter","systemsOsMinorFilterConfiguration","defaultOnLoad","INVENTORY_ACTION_TYPES","mergeWithEntities","getRegistry","register","entitiesReducer","InventoryDetails","registryDecorator","DetailWrapper","onLoad","mergeWithDetail","InventoryDetail","fallback","Skeleton","SkeletonSize","hideBack","React","entity","ENCODINGS","csv","json","filename","format","CSV_FILE_PREFIX","toISOString","encoding","linkAndDownload","link","document","createElement","href","download","click","textForCell","row","getProperty","csvForItems","items","csvRows","encodeURI","jsonForItems","object","camelCase","stringify","renameInventoryAttributes","culledTimestamp","staleWarningTimestamp","staleTimestamp","insightsId","updated","culled_timestamp","stale_warning_timestamp","stale_timestamp","insights_id","useFetchSystems","onComplete","onError","client","useApolloClient","perPage","page","requestVariables","fetchResults","e","entities","systemsWithRuleObjectsFailed","meta","tags","totalCount","fetchBatched","fetchFunction","total","batchSize","pages","ceil","all","_","pageIdx","buildApiFilters","filters","tagFilters","otherFilters","tagsApiFilter","flatMap","tagFilter","tag","encodeURIComponent","tagKey","toIdFilter","ids","searchTagsByKey","search","tagItem","indexOf","InventoryTable","showFilter","supportedSsgs","showAllSystems","compliantFilter","showOnlySystemsWithTestResults","showOsFilter","onSelectProp","noSystemsTable","tagsEnabled","useFeature","inventory","useRef","isEmpty","setIsEmpty","isLoaded","setIsLoaded","setItems","setTotal","useCollection","showVersion","version","String","currentValue","Set","groupByMajorVersion","collection","useFilterConfig","filterConfig","DEFAULT_SYSTEMS_FILTER_CONFIGURATION","COMPLIANT_SYSTEMS_FILTER_CONFIGURATION","conditionalFilter","toolbarProps","filterString","activeFilterValues","systemsFilter","combindedFilter","useSystemsFilter","fetchArguments","apiClient","currentTags","setCurrentTags","fetchTags","per_page","fetchedTags","end","start","results","slice","getTags","config","pagination","tagsList","hideFilters","registeredWith","stale","showTags","useTags","tagsProps","systemFetchArguments","preselected","currentPageIds","systemsCache","fetchSystems","fetchFunc","fetchIds","idFilter","cachedOrFetch","selectedIds","cachedSystems","cachedIds","fetchedSystems","onSelectCallback","itemIdsInTable","useBulkSelect","itemIdsOnPage","useSystemBulkSelect","useMemo","bulkSelectTableProps","tableProps","bulkSelectToolBarProps","activeFilters","useDispatch","payload","selected","debounceResetPage","debounce","current","onRefreshData","useInventoryUtilities","getEntities","fetchEntities","appendDirection","attributes","direction","attribute","findColumnByKey","_ids","orderBy","orderDirection","sortableColumn","filterForApi","fetchedEntities","useGetEntities","exportConfig","selectionFilter","exporter","fetchedItems","exportableColumns","export","exportWithFormat","formater","console","info","useExport","useSystemsExport","noError","disableDefaultColumns","defaultColumns","isStringCol","defaultColumn","defaultCol","ref","isStickyHeader","TableVariant","dedicatedAction","ComplianceRemediationButton","allSystems","selectedRules","_event","_index","beta","window","split","origin","PropTypes","ApiClient","options","Accept","this","apiBase","path","authenticate","onUnauthorised","defaultHeaders","headers","DEFAULT_API_HEADERS","apiProps","method","callAuthenticate","fetch","checkForEmptyResponse","response","checkForErrors","finalCatch","promise","reject","params","credentials","fullPath","url","URL","URLSearchParams","body","status","ignore404","responseCloneJson","clone","request","includeAttributes","prop","newEntity","includePropAndDelete","normalizeData","jsonNormalized","normalize","normalizedJson","relationships","entries","forEach","item","relationship","relationshipData","v","includeRelationship","fetchCollection","get","normalized","dependencies","collectionState","setCollectionState","useApi","COMPLIANCE_API_ROOT","include","selectRows","rows","applyReducerHash"],"sourceRoot":""}