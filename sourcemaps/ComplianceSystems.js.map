{"version":3,"sources":["webpack:///./src/SmartComponents/ErrorPage/ErrorPage.js","webpack:///./src/SmartComponents/ComplianceTabs/ComplianceTabs.js","webpack:///./node_modules/lodash/invert.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/lodash/_createInverter.js","webpack:///./node_modules/lodash/_baseInverter.js","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/keys.js","webpack:///./src/SmartComponents/ComplianceSystemsTable/ComplianceSystemsTable.js","webpack:///./src/SmartComponents/ComplianceSystems/ComplianceSystems.js"],"names":["ErrorPage","props","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","call","error","networkError","statusCode","window","insights","chrome","auth","logout","message","react__WEBPACK_IMPORTED_MODULE_5__","propTypes","prop_types__WEBPACK_IMPORTED_MODULE_6___default","a","object","__webpack_exports__","ComplianceTabs","state","tabPaths","0","_Routes__WEBPACK_IMPORTED_MODULE_8__","compliancePolicies","1","complianceSystems","redirect","_","tabIndex","_this","history","push","path","match","currentKey","Number","lodash_invert__WEBPACK_IMPORTED_MODULE_11___default","tabs","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_9__","title","key","eventKey","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_10__","activeKey","onSelect","aria-label","react__WEBPACK_IMPORTED_MODULE_7__","_redhat_cloud_services_frontend_components_utilities_files_RouterParams__WEBPACK_IMPORTED_MODULE_5___default","constant","__webpack_require__","createInverter","identity","nativeObjectToString","Object","prototype","toString","invert","result","value","module","exports","baseInverter","setter","toIteratee","iteratee","baseForOwn","accumulator","baseFor","keys","nativeKeys","overArg","QUERY","src_default","_templateObject","SmartComponents_ComplianceSystemsTable_ComplianceSystemsTable","RouterParams_default","react_default","react_apollo_browser_umd","query","_ref","data","loading","frontend_components","systems","allSystems","systemsCount","allProfiles","reduce","acc","curr","total_host_count","SystemsTable","items","columns","composed","width","Fragment"],"mappings":"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","file":"js/ComplianceSystems.js","sourcesContent":["import { Component } from 'react';\nimport propTypes from 'prop-types';\n\nclass ErrorPage extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const { error } = this.props;\n        if (error.networkError && error.networkError.statusCode === 401) {\n            window.insights.chrome.auth.logout();\n        }\n\n        return 'Oops! There was an error loading Compliance data. If you need to contact ' +\n            'Red Hat Support about this, this is the exact error: ' + ' ' + error.message;\n    }\n}\n\nErrorPage.propTypes = {\n    error: propTypes.object\n};\n\nexport default ErrorPage;\n","import routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport propTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { paths } from '../../Routes';\nimport { Tabs, Tab } from '@patternfly/react-core';\nimport invert from 'lodash/invert';\n\nclass ComplianceTabs extends Component {\n    state = {\n        tabPaths: {\n            0: paths.compliancePolicies,\n            1: paths.complianceSystems\n        }\n    };\n\n    redirect = (_, tabIndex) => {\n        const { tabPaths } = this.state;\n        this.props.history.push(tabPaths[tabIndex]);\n    }\n\n    render() {\n        const { match: { path } } = this.props;\n        const { tabPaths } = this.state;\n        let currentKey = Number(invert(tabPaths)[path]);\n\n        const tabs = [\n            <Tab title={'Policies'} key={0} eventKey={0}></Tab>,\n            <Tab title={'Systems'} key={1} eventKey={1}></Tab>\n        ];\n\n        return (\n            <Tabs activeKey={currentKey} onSelect={this.redirect} aria-label=\"Compliance Tabs\">\n                { tabs }\n            </Tabs>\n        );\n    }\n}\n\nComplianceTabs.propTypes = {\n    history: propTypes.object,\n    match: propTypes.object\n};\n\nexport default routerParams(ComplianceTabs);\n","var constant = require('./constant'),\n    createInverter = require('./_createInverter'),\n    identity = require('./identity');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Creates an object composed of the inverted keys and values of `object`.\n * If `object` contains duplicate values, subsequent values overwrite\n * property assignments of previous values.\n *\n * @static\n * @memberOf _\n * @since 0.7.0\n * @category Object\n * @param {Object} object The object to invert.\n * @returns {Object} Returns the new inverted object.\n * @example\n *\n * var object = { 'a': 1, 'b': 2, 'c': 1 };\n *\n * _.invert(object);\n * // => { '1': 'c', '2': 'b' }\n */\nvar invert = createInverter(function(result, value, key) {\n  if (value != null &&\n      typeof value.toString != 'function') {\n    value = nativeObjectToString.call(value);\n  }\n\n  result[value] = key;\n}, constant(identity));\n\nmodule.exports = invert;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var baseInverter = require('./_baseInverter');\n\n/**\n * Creates a function like `_.invertBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} toIteratee The function to resolve iteratees.\n * @returns {Function} Returns the new inverter function.\n */\nfunction createInverter(setter, toIteratee) {\n  return function(object, iteratee) {\n    return baseInverter(object, setter, toIteratee(iteratee), {});\n  };\n}\n\nmodule.exports = createInverter;\n","var baseForOwn = require('./_baseForOwn');\n\n/**\n * The base implementation of `_.invert` and `_.invertBy` which inverts\n * `object` with values transformed by `iteratee` and set by `setter`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform values.\n * @param {Object} accumulator The initial inverted object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseInverter(object, setter, iteratee, accumulator) {\n  baseForOwn(object, function(value, key, object) {\n    setter(accumulator, iteratee(value), key, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseInverter;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","import React from 'react';\nimport { EmptyTable, Spinner } from '@redhat-cloud-services/frontend-components';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport { Query } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport SystemsTable from '../SystemsTable/SystemsTable';\nimport ErrorPage from '../ErrorPage/ErrorPage';\n\nconst QUERY = gql`\n{\n    allSystems(perPage: 50, page: 1) {\n        id\n        name\n        profileNames\n        rulesPassed\n        rulesFailed\n        lastScanned\n        compliant\n    }\n    allProfiles {\n        totalHostCount\n    }\n}\n`;\n\nconst ComplianceSystemsTable = () => (\n    <Query query={QUERY}>\n        {({ data, error, loading }) => {\n            if (error) { return <ErrorPage error={error}/>; }\n\n            if (loading) { return <EmptyTable><Spinner/></EmptyTable>; }\n\n            const systems = data.allSystems;\n            const systemsCount = data.allProfiles.reduce((acc, curr) => acc + curr.total_host_count, 0);\n            const columns = [{\n                composed: ['facts.os_release', 'display_name'],\n                key: 'display_name',\n                title: 'Name',\n                props: {\n                    width: 40\n                }\n            }, {\n                key: 'facts.compliance.profiles',\n                title: 'Profiles',\n                props: {\n                    width: 40\n                }\n            }, {\n                key: 'facts.compliance.compliance_score',\n                title: 'Compliant',\n                props: {\n                    width: 10\n                }\n            }, {\n                key: 'facts.compliance.last_scanned',\n                title: 'Last Scanned',\n                props: {\n                    width: 10\n                }\n            }];\n\n            return <SystemsTable items={systems} columns={columns} systemsCount={systemsCount}/>;\n        }}\n    </Query>\n);\n\nexport default routerParams(ComplianceSystemsTable);\n","import React from 'react';\nimport ComplianceSystemsTable from '../ComplianceSystemsTable/ComplianceSystemsTable';\nimport ComplianceTabs from '../ComplianceTabs/ComplianceTabs';\nimport { PageHeader, PageHeaderTitle, Main } from '@redhat-cloud-services/frontend-components';\n\nconst ComplianceSystems = () => {\n    return (\n        <React.Fragment>\n            <PageHeader>\n                <PageHeaderTitle title=\"Compliance\" />\n                <ComplianceTabs/>\n            </PageHeader>\n            <Main>\n                <ComplianceSystemsTable />\n            </Main>\n        </React.Fragment>\n    );\n};\n\nexport default ComplianceSystems;\n"],"sourceRoot":""}