{"version":3,"file":"js/DeleteReport.a82ee73d06d1451022b9.js","mappings":"2RAUMA,EAAe,WAAM,IAAAC,EACnBC,GAAUC,EAAAA,EAAAA,cACVC,GAAWC,EAAAA,EAAAA,eACTC,GAAqB,QAA7BL,EAAeG,EAASG,aAAK,IAAAN,OAAA,EAAdA,EAAgBO,SAAvBF,GACFG,EAAU,WACdP,EAAQQ,KAAKN,EAASG,MAAMI,WAC9B,EAMAC,GAAuBC,EAAAA,EAAAA,GAAYC,EAAAA,GAAe,CAChDC,YAAa,YACXC,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,UACTC,MAAO,iBACPC,YACE,mFAVRlB,EAAQQ,KAAK,WAcb,EACAW,QAAS,SAACC,IACRN,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,SACTC,MAAO,wBACPC,YAAaE,EAAMC,WAGvBd,GACF,IArBKe,GAsBLC,EAAAA,EAAAA,GAAAb,EAAA,GAtBiB,GAuBnB,OACEc,IAAAA,cAACC,EAAAA,EAAe,CACdC,QAAM,EACNV,QAASW,EAAAA,aAAAA,MACTV,MAAM,iBACNW,iBAAiB,UACjBC,OAAO,oBACPtB,QAASA,EACTuB,QAAS,CACPN,IAAAA,cAACO,EAAAA,OAAM,CACLC,IAAI,UACJH,OAAO,qBACP,aAAW,SACXb,QAAQ,SACRiB,QAAS,kBACPX,EAAa,CACXY,UAAW,CACTC,MAAO,CACLC,UAAWhC,KAGf,GAEL,iBAGDoB,IAAAA,cAACO,EAAAA,OAAM,CACLC,IAAI,SACJH,OAAO,2BACPb,QAAQ,YACRiB,QAAS,kBAAM1B,GAAS,GACzB,YAKHiB,IAAAA,cAACa,EAAAA,YAAW,KAAC,wDAKnB,EAEAvC,EAAawC,UAAY,CACvB/B,QAAS+B,IAAAA,KACTC,YAAaD,IAAAA,KACbE,SAAUF,IAAAA,KACVG,SAAUH,IAAAA,QAGZxC,EAAa4C,aAAe,CAC1BF,SAAU,WAAO,EACjBjC,QAAS,WAAO,GAGlB,S","sources":["webpack:///./src/SmartComponents/DeleteReport/DeleteReport.js"],"sourcesContent":["import { Button, ModalVariant, TextContent } from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_REPORT } from 'Mutations';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { ComplianceModal } from 'PresentationalComponents';\nimport { dispatchAction } from 'Utilities/Dispatcher';\n\nconst DeleteReport = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const { id } = location.state?.profile;\n  const onClose = () => {\n    history.push(location.state.background);\n  };\n\n  const onDelete = () => {\n    history.push('/reports');\n  };\n\n  const [deleteReport] = useMutation(DELETE_REPORT, {\n    onCompleted: () => {\n      dispatchAction(\n        addNotification({\n          variant: 'success',\n          title: 'Report deleted',\n          description:\n            'Systems associated with this policy will upload reports on the next check-in.',\n        })\n      );\n      onDelete();\n    },\n    onError: (error) => {\n      dispatchAction(\n        addNotification({\n          variant: 'danger',\n          title: 'Error removing report',\n          description: error.message,\n        })\n      );\n      onClose();\n    },\n  });\n  return (\n    <ComplianceModal\n      isOpen\n      variant={ModalVariant.small}\n      title=\"Delete report?\"\n      titleIconVariant=\"warning\"\n      ouiaId=\"DeleteReportModal\"\n      onClose={onClose}\n      actions={[\n        <Button\n          key=\"destroy\"\n          ouiaId=\"DeleteReportButton\"\n          aria-label=\"delete\"\n          variant=\"danger\"\n          onClick={() =>\n            deleteReport({\n              variables: {\n                input: {\n                  profileId: id,\n                },\n              },\n            })\n          }\n        >\n          Delete report\n        </Button>,\n        <Button\n          key=\"cancel\"\n          ouiaId=\"DeleteReportCancelButton\"\n          variant=\"secondary\"\n          onClick={() => onClose()}\n        >\n          Cancel\n        </Button>,\n      ]}\n    >\n      <TextContent>\n        Deleting a report is permanent and cannot be undone.\n      </TextContent>\n    </ComplianceModal>\n  );\n};\n\nDeleteReport.propTypes = {\n  onClose: propTypes.func,\n  isModalOpen: propTypes.bool,\n  onDelete: propTypes.func,\n  policyId: propTypes.string,\n};\n\nDeleteReport.defaultProps = {\n  onDelete: () => {},\n  onClose: () => {},\n};\n\nexport default DeleteReport;\n"],"names":["DeleteReport","_location$state","history","useHistory","location","useLocation","id","state","profile","onClose","push","background","_useMutation","useMutation","DELETE_REPORT","onCompleted","dispatchAction","addNotification","variant","title","description","onError","error","message","deleteReport","_slicedToArray","React","ComplianceModal","isOpen","ModalVariant","titleIconVariant","ouiaId","actions","Button","key","onClick","variables","input","profileId","TextContent","propTypes","isModalOpen","onDelete","policyId","defaultProps"],"sourceRoot":""}