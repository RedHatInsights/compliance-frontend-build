{"version":3,"sources":["webpack:///./src/SmartComponents/ComplianceReports/ComplianceReports.js"],"names":["QUERY","gql","ComplianceReports","useQuery","data","error","loading","Fragment","title","className","gutter","pageHeader","policies","allProfiles","filter","profile","totalHostCount","beta","window","location","pathname","split","policyCards","length","map","policy","i","sm","md","lg","xl","key","style","paddingBottom","routerParams"],"mappings":"siBAiBA,IAAMA,EAAQC,IAAH,KAiBEC,EAAoB,WAAM,MACFC,YAASH,GAAlCI,EAD2B,EAC3BA,KAAMC,EADqB,EACrBA,MAAOC,EADc,EACdA,QAErB,GAAID,EAAS,OAAO,kBAAC,IAAD,CAAWA,MAAOA,IAEtC,GAAIC,EACA,OACI,kBAAC,IAAMC,SAAP,KACI,kBAAC,aAAD,KACI,kBAAC,kBAAD,CAAiBC,MAAM,gBAE3B,kBAAC,OAAD,KACI,yBAAKC,UAAU,mBACX,kBAAC,IAAD,CAAMC,OAAO,MACT,kBAAC,IAAD,UAQxB,IAIIC,EAJEC,EAAWR,EAAKS,YAAYC,QAAO,SAACC,GAAD,OAAaA,EAAQC,eAAiB,KACzEC,EAAkD,SAA3CC,OAAOC,SAASC,SAASC,MAAM,KAAK,GAE7CC,EAAc,GAsBlB,OApBIV,EAASW,QACTZ,EAAa,kBAAC,aAAD,CAAYF,UAAYQ,EAAO,mBAAqB,sBAC7D,kBAAC,kBAAD,CAAiBT,MAAM,wBACpBS,GAAQ,kBAAC,IAAD,OAGfK,EAAcV,EAASY,KACnB,SAACC,EAAQC,GAAT,OACI,kBAAC,IAAD,CAAUC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,IAAKL,GACzC,kBAAC,IAAD,CACIK,IAAKL,EACLD,OAAQA,UAKxBd,EAAa,kBAAC,aAAD,CAAYqB,MAAO,CAAEC,cAAe,KAAM,kBAAC,kBAAD,CAAiBzB,MAAM,gBAC9Ec,EAAc,kBAAC,IAAD,OAId,kBAAC,IAAMf,SAAP,KACMI,EACF,kBAAC,OAAD,KACI,yBAAKF,UAAU,mBACX,kBAAC,IAAD,CAAMC,OAAO,MACRY,OAQVY,cAAahC","file":"js/ComplianceReports.js","sourcesContent":["import React from 'react';\nimport {\n    ComplianceTabs,\n    LoadingComplianceCards,\n    CompliancePolicyCard,\n    CompliancePoliciesEmptyState,\n    ErrorPage\n} from 'PresentationalComponents';\nimport { PageHeader, PageHeaderTitle, Main } from '@redhat-cloud-services/frontend-components';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport {\n    Grid,\n    GridItem\n} from '@patternfly/react-core';\n\nconst QUERY = gql`\n{\n    allProfiles {\n        id\n        name\n        refId\n        description\n        totalHostCount\n        compliantHostCount\n        businessObjective {\n            id\n            title\n        }\n    }\n}\n`;\n\nexport const ComplianceReports = () => {\n    const { data, error, loading } = useQuery(QUERY);\n\n    if (error) { return <ErrorPage error={error}/>; }\n\n    if (loading) {\n        return (\n            <React.Fragment>\n                <PageHeader>\n                    <PageHeaderTitle title=\"Compliance\" />\n                </PageHeader>\n                <Main>\n                    <div className=\"policies-donuts\">\n                        <Grid gutter='md'>\n                            <LoadingComplianceCards/>\n                        </Grid>\n                    </div>\n                </Main>\n            </React.Fragment>\n        );\n    }\n\n    const policies = data.allProfiles.filter((profile) => profile.totalHostCount > 0);\n    const beta = window.location.pathname.split('/')[1] === 'beta';\n\n    let policyCards = [];\n    let pageHeader;\n    if (policies.length) {\n        pageHeader = <PageHeader className={ beta ? 'beta-page-header' : 'stable-page-header' }>\n            <PageHeaderTitle title=\"Compliance reports\" />\n            { !beta && <ComplianceTabs/> }\n\n        </PageHeader>;\n        policyCards = policies.map(\n            (policy, i) =>\n                <GridItem sm={12} md={12} lg={6} xl={4} key={i}>\n                    <CompliancePolicyCard\n                        key={i}\n                        policy={policy}\n                    />\n                </GridItem>\n        );\n    } else {\n        pageHeader = <PageHeader style={{ paddingBottom: 22 }}><PageHeaderTitle title=\"Compliance\" /></PageHeader>;\n        policyCards = <CompliancePoliciesEmptyState />;\n    }\n\n    return (\n        <React.Fragment>\n            { pageHeader }\n            <Main>\n                <div className=\"policies-donuts\">\n                    <Grid gutter='md'>\n                        {policyCards}\n                    </Grid>\n                </div>\n            </Main>\n        </React.Fragment>\n    );\n};\n\nexport default routerParams(ComplianceReports);\n"],"sourceRoot":""}