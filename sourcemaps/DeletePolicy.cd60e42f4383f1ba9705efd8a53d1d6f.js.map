{"version":3,"file":"js/DeletePolicy.0d05e397d05cec75e196.js","mappings":"4RAUMA,EAAe,WACnB,OAA0CC,EAAAA,EAAAA,WAAS,GAAM,eAAlDC,EAAa,KAAEC,EAAgB,KAChCC,GAAWC,EAAAA,EAAAA,eACXC,GAAUC,EAAAA,EAAAA,cAChB,EAAqBH,EAASI,MAAMC,OAA5BC,EAAI,EAAJA,KAAMC,EAAE,EAAFA,GACRC,EAAU,WACdN,EAAQO,KAAK,gBACf,EAEA,GAAuBC,EAAAA,EAAAA,GAAYC,EAAAA,GAAgB,CACjDC,YAAa,YACXC,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,UACTC,MAAO,YAAF,OAAcV,EAAI,mCAG3BE,GACF,EACAS,QAAS,SAACC,IACRL,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,SACTC,MAAO,wBACPG,YAAaD,EAAME,WAGvBZ,GACF,IAnBKa,GAoBL,YApBiB,GAsBnB,OACE,kBAAC,EAAAC,EAAe,CACdP,QAASQ,EAAAA,aAAAA,MACTP,MAAM,iBACNQ,iBAAiB,UACjBC,OAAO,oBACPC,QAAM,EACNlB,QAASA,EACTmB,QAAS,CACP,kBAAC,EAAAC,OAAM,CACLC,IAAI,UACJJ,OAAO,qBACP,aAAW,SACXK,YAAahC,EACbiB,QAAQ,SACRgB,QAAS,kBAAMV,EAAa,CAAEW,UAAW,CAAEC,MAAO,CAAE1B,GAAAA,KAAS,GAAC,wCAIhE,kBAAC,EAAAqB,OAAM,CACLC,IAAI,SACJJ,OAAO,2BACPV,QAAQ,YACRgB,QAASvB,GAAQ,YAMrB,kBAAC,EAAA0B,KAAI,CAACC,UAAU,2BAAyB,uBACnB,2BAAI7B,GAAS,6CAGnC,kBAAC,EAAA8B,SAAQ,CACPC,MAAM,sEACN9B,GAAE,gCAA2BA,GAC7B+B,UAAWxC,EACXyC,SAAUxC,IAIlB,EAEAH,EAAa4C,UAAY,CACvBnC,OAAQmC,IAAAA,QAGV,S","sources":["webpack:///./src/SmartComponents/DeletePolicy/DeletePolicy.js"],"sourcesContent":["import { Button, Checkbox, ModalVariant, Text } from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_PROFILE } from 'Mutations';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { ComplianceModal } from 'PresentationalComponents';\nimport { dispatchAction } from 'Utilities/Dispatcher';\n\nconst DeletePolicy = () => {\n  const [deleteEnabled, setDeleteEnabled] = useState(false);\n  const location = useLocation();\n  const history = useHistory();\n  const { name, id } = location.state.policy;\n  const onClose = () => {\n    history.push('/scappolicies');\n  };\n\n  const [deletePolicy] = useMutation(DELETE_PROFILE, {\n    onCompleted: () => {\n      dispatchAction(\n        addNotification({\n          variant: 'success',\n          title: `Deleted \"${name}\" and its associated reports`,\n        })\n      );\n      onClose();\n    },\n    onError: (error) => {\n      dispatchAction(\n        addNotification({\n          variant: 'danger',\n          title: 'Error removing policy',\n          description: error.message,\n        })\n      );\n      onClose();\n    },\n  });\n\n  return (\n    <ComplianceModal\n      variant={ModalVariant.small}\n      title=\"Delete policy?\"\n      titleIconVariant=\"warning\"\n      ouiaId=\"DeletePolicyModal\"\n      isOpen\n      onClose={onClose}\n      actions={[\n        <Button\n          key=\"destroy\"\n          ouiaId=\"DeletePolicyButton\"\n          aria-label=\"delete\"\n          isDisabled={!deleteEnabled}\n          variant=\"danger\"\n          onClick={() => deletePolicy({ variables: { input: { id } } })}\n        >\n          Delete policy and associated reports\n        </Button>,\n        <Button\n          key=\"cancel\"\n          ouiaId=\"DeletePolicyCancelButton\"\n          variant=\"secondary\"\n          onClick={onClose}\n        >\n          Cancel\n        </Button>,\n      ]}\n    >\n      <Text className=\"policy-delete-body-text\">\n        Deleting the policy <b>{name}</b> will also delete its associated\n        reports.\n      </Text>\n      <Checkbox\n        label=\"I understand this will delete the policy and all associated reports\"\n        id={`deleting-policy-check-${id}`}\n        isChecked={deleteEnabled}\n        onChange={setDeleteEnabled}\n      />\n    </ComplianceModal>\n  );\n};\n\nDeletePolicy.propTypes = {\n  policy: propTypes.object,\n};\n\nexport default DeletePolicy;\n"],"names":["DeletePolicy","useState","deleteEnabled","setDeleteEnabled","location","useLocation","history","useHistory","state","policy","name","id","onClose","push","useMutation","DELETE_PROFILE","onCompleted","dispatchAction","addNotification","variant","title","onError","error","description","message","deletePolicy","C","ModalVariant","titleIconVariant","ouiaId","isOpen","actions","Button","key","isDisabled","onClick","variables","input","Text","className","Checkbox","label","isChecked","onChange","propTypes"],"sourceRoot":""}