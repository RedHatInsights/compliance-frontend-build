{"version":3,"file":"js/CompliancePolicies.00729fe795a9d47163c2.js","mappings":"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","sources":["webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Dark/DarkContext.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/PageHeader/PageHeader.js","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/PageHeader/PageHeaderTitle.js","webpack:///./src/SmartComponents/CompliancePolicies/CompliancePolicies.js"],"sourcesContent":["import React from 'react';\nvar DarkContext = React.createContext('light');\nexport default DarkContext;\n//# sourceMappingURL=DarkContext.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport classNames from 'classnames';\nimport { DarkContext } from '../Dark';\nimport '../PageHeader/page-header.css';\nvar PageHeader = function (_a) {\n    var className = _a.className, children = _a.children, props = __rest(_a, [\"className\", \"children\"]);\n    var pageHeaderClasses = classNames(className, 'pf-l-page-header', 'pf-c-page-header', 'pf-l-page__main-section', 'pf-c-page__main-section');\n    return (_jsx(DarkContext.Consumer, { children: function (theme) {\n            var _a, _b;\n            if (theme === void 0) { theme = 'light'; }\n            var themeClasses = classNames((_a = {}, _a[\"pf-m-\".concat(theme, \"-200\")] = theme === 'dark', _a), (_b = {}, _b[\"pf-m-light\"] = theme === 'light', _b));\n            return (_jsx(\"section\", __assign({}, props, { className: \"\".concat(pageHeaderClasses, \" \").concat(themeClasses), \"widget-type\": \"InsightsPageHeader\" }, { children: children })));\n        } }));\n};\nexport default PageHeader;\n//# sourceMappingURL=PageHeader.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport classNames from 'classnames';\nimport { Title } from '@patternfly/react-core';\nvar PageHeaderTitle = function (_a) {\n    var className = _a.className, title = _a.title;\n    var pageHeaderTitleClasses = classNames(className);\n    return (_jsx(Title, __assign({ headingLevel: \"h1\", size: \"2xl\", className: pageHeaderTitleClasses, \"widget-type\": \"InsightsPageHeaderTitle\" }, { children: title })));\n};\nexport default PageHeaderTitle;\n//# sourceMappingURL=PageHeaderTitle.js.map","import React, { useEffect } from 'react';\nimport gql from 'graphql-tag';\nimport { useLocation } from 'react-router-dom';\nimport { useQuery } from '@apollo/client';\nimport { Grid } from '@patternfly/react-core';\nimport PageHeader, {\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport ComplianceEmptyState from 'PresentationalComponents/ComplianceEmptyState';\nimport {\n  BackgroundLink,\n  ErrorPage,\n  LoadingPoliciesTable,\n  PoliciesTable,\n  StateView,\n  StateViewPart,\n  LinkButton,\n} from 'PresentationalComponents';\n\nconst QUERY = gql`\n  {\n    profiles(search: \"external = false and canonical = false\") {\n      edges {\n        node {\n          id\n          name\n          description\n          refId\n          complianceThreshold\n          totalHostCount\n          osMajorVersion\n          policyType\n          policy {\n            id\n            name\n          }\n          businessObjective {\n            id\n            title\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const CompliancePolicies = () => {\n  const location = useLocation();\n  const CreateLink = () => (\n    <BackgroundLink\n      to=\"/scappolicies/new\"\n      Component={LinkButton}\n      componentProps={{\n        variant: 'primary',\n        ouiaId: 'CreateNewPolicyButton',\n      }}\n    >\n      Create new policy\n    </BackgroundLink>\n  );\n\n  let { data, error, loading, refetch } = useQuery(QUERY);\n  useEffect(() => {\n    refetch();\n  }, [location, refetch]);\n  let policies;\n\n  if (data) {\n    error = undefined;\n    loading = undefined;\n    policies = data.profiles.edges.map((profile) => profile.node);\n  }\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"page-header\">\n        <PageHeaderTitle title=\"SCAP policies\" />\n      </PageHeader>\n      <section className=\"pf-c-page__main-section\">\n        <StateView stateValues={{ error, data, loading }}>\n          <StateViewPart stateKey=\"error\">\n            <ErrorPage error={error} />\n          </StateViewPart>\n          <StateViewPart stateKey=\"loading\">\n            <LoadingPoliciesTable />\n          </StateViewPart>\n          <StateViewPart stateKey=\"data\">\n            {policies && policies.length === 0 ? (\n              <Grid hasGutter>\n                <ComplianceEmptyState\n                  title=\"No policies\"\n                  mainButton={<CreateLink />}\n                />\n              </Grid>\n            ) : (\n              <PoliciesTable policies={policies} DedicatedAction={CreateLink} />\n            )}\n          </StateViewPart>\n        </StateView>\n      </section>\n    </React.Fragment>\n  );\n};\n\nexport default CompliancePolicies;\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","_a","className","children","props","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","pageHeaderClasses","theme","_b","themeClasses","concat","title","pageHeaderTitleClasses","Title","headingLevel","size","QUERY","gql","_templateObject","_taggedTemplateLiteral","CompliancePolicies","policies","location","useLocation","CreateLink","React","BackgroundLink","to","Component","LinkButton","componentProps","variant","ouiaId","_useQuery","useQuery","data","error","loading","refetch","useEffect","undefined","profiles","edges","map","profile","node","PageHeader","PageHeaderTitle","StateView","stateValues","StateViewPart","stateKey","ErrorPage","LoadingPoliciesTable","Grid","hasGutter","ComplianceEmptyState","mainButton","PoliciesTable","DedicatedAction"],"sourceRoot":""}