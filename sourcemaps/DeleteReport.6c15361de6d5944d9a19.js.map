{"version":3,"sources":["webpack:///./src/SmartComponents/DeleteReport/DeleteReport.js"],"names":["DeleteReport","history","useHistory","location","useLocation","id","state","profile","onClose","push","background","useMutation","DELETE_REPORT","onCompleted","dispatchAction","addNotification","variant","title","onError","error","description","message","deleteReport","Modal","isOpen","ModalVariant","ouiaId","actions","Button","key","aria-label","onClick","variables","input","profileId","TextContent","propTypes","isModalOpen","onDelete","policyId","defaultProps"],"mappings":"+QAcMA,EAAe,WAAM,MACjBC,GAAUC,kBACVC,GAAWC,mBACTC,GAAR,UAAeF,EAASG,aAAxB,aAAe,EAAgBC,SAAvBF,GACFG,EAAU,WACZP,EAAQQ,KAAKN,EAASG,MAAMI,aAOhC,GAAuBC,iBAAYC,KAAe,CAC9CC,YAAa,YACTC,QAAeC,QAAgB,CAC3BC,QAAS,UACTC,MAAO,oBAPfhB,EAAQQ,KAAK,aAWbS,QAAS,SAACC,IACNL,QAAeC,QAAgB,CAC3BC,QAAS,SACTC,MAAO,wBACPG,YAAaD,EAAME,WAEvBb,OAdDc,GAAP,eAiBA,OACI,kBAAC,EAAAC,MAAD,CACIC,QAAM,EACNR,QAAUS,qBACVR,MAAM,gBACNS,OAAO,oBACPlB,QAAUA,EACVmB,QAAS,CACL,kBAAC,EAAAC,OAAD,CACIC,IAAI,UACJH,OAAO,qBACPI,aAAW,SACXd,QAAQ,SACRe,QAAS,kBAAMT,EAAa,CACxBU,UAAW,CACPC,MAAO,CACHC,UAAW7B,QAR3B,iBAcA,kBAAC,EAAAuB,OAAD,CAAQC,IAAI,SAASH,OAAO,2BAA2BV,QAAQ,YAAYe,QAAU,kBAAMvB,MAA3F,YAIJ,kBAAC,EAAA2B,YAAD,+DAOZnC,EAAaoC,UAAY,CACrB5B,QAAS4B,SACTC,YAAaD,SACbE,SAAUF,SACVG,SAAUH,YAGdpC,EAAawC,aAAe,CACxBF,SAAU,aACV9B,QAAS,cAGb","file":"js/DeleteReport.e87cba4f3966976fa1ac.js","sourcesContent":["import {\n    Button,\n    Modal,\n    ModalVariant,\n    TextContent\n} from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_REPORT } from 'Mutations';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { dispatchAction } from 'Utilities/Dispatcher';\n\nconst DeleteReport = () => {\n    const history = useHistory();\n    const location = useLocation();\n    const { id } = location.state?.profile;\n    const onClose = () => {\n        history.push(location.state.background);\n    };\n\n    const onDelete = () => {\n        history.push('/reports');\n    };\n\n    const [deleteReport] = useMutation(DELETE_REPORT, {\n        onCompleted: () => {\n            dispatchAction(addNotification({\n                variant: 'success',\n                title: `Removed report`\n            }));\n            onDelete();\n        },\n        onError: (error) => {\n            dispatchAction(addNotification({\n                variant: 'danger',\n                title: 'Error removing report',\n                description: error.message\n            }));\n            onClose();\n        }\n    });\n    return (\n        <Modal\n            isOpen\n            variant={ ModalVariant.small }\n            title='Delete report'\n            ouiaId=\"DeleteReportModal\"\n            onClose={ onClose }\n            actions={[\n                <Button\n                    key='destroy'\n                    ouiaId=\"DeleteReportButton\"\n                    aria-label=\"delete\"\n                    variant='danger'\n                    onClick={() => deleteReport({\n                        variables: {\n                            input: {\n                                profileId: id\n                            }\n                        }\n                    })}>\n                    Delete report\n                </Button>,\n                <Button key='cancel' ouiaId=\"DeleteReportCancelButton\" variant='secondary' onClick={ () => onClose() }>\n                    Cancel\n                </Button>\n            ]}>\n            <TextContent>\n                Deleting a report is permanent and cannot be undone.\n            </TextContent>\n        </Modal>\n    );\n};\n\nDeleteReport.propTypes = {\n    onClose: propTypes.func,\n    isModalOpen: propTypes.bool,\n    onDelete: propTypes.func,\n    policyId: propTypes.string\n};\n\nDeleteReport.defaultProps = {\n    onDelete: () => {},\n    onClose: () => {}\n};\n\nexport default DeleteReport;\n"],"sourceRoot":""}