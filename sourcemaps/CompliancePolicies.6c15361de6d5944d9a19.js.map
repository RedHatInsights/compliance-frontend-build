{"version":3,"sources":["webpack:///./src/SmartComponents/CompliancePolicies/CompliancePolicies.js"],"names":["QUERY","gql","CompliancePolicies","policies","location","useLocation","createLink","to","Button","variant","ouiaId","useQuery","data","error","loading","refetch","useEffect","undefined","profiles","edges","map","profile","node","className","title","stateValues","stateKey","length","Grid","hasGutter","mainButton"],"mappings":"uTAoBMA,GAAQC,QAAH,mxBAmCEC,EAAqB,WAC9B,IAMIC,EANEC,GAAWC,mBACXC,EAAa,kBAAC,KAAD,CAAgBC,GAAG,qBAClC,kBAAC,EAAAC,OAAD,CAAQC,QAAQ,UAAUC,OAAO,mBAAjC,sBAEJ,GAAwCC,cAASX,GAA3CY,EAAN,EAAMA,KAAMC,EAAZ,EAAYA,MAAOC,EAAnB,EAAmBA,QAASC,EAA5B,EAA4BA,QAS5B,OARAC,gBAAU,WAAQD,MAAc,CAACX,EAAUW,IAGvCH,IACAC,OAAQI,EAAWH,OAAUG,EAC7Bd,EAAWS,EAAKM,SAASC,MAAMC,KAAI,SAAAC,GAAO,OAAIA,EAAQC,SAGnD,kBAAC,aAAD,KACH,kBAAC,IAAD,CAAYC,UAAU,eAClB,kBAAC,IAAD,CAAiBC,MAAM,mBAE3B,kBAAC,IAAD,KACI,kBAAC,KAAD,CAAWC,YAAc,CAAEZ,QAAOD,OAAME,YACpC,kBAAC,KAAD,CAAeY,SAAS,SACpB,kBAAC,KAAD,CAAWb,MAAOA,KAEtB,kBAAC,KAAD,CAAea,SAAS,WACpB,kBAAC,KAAD,OAEJ,kBAAC,KAAD,CAAeA,SAAS,QAClBvB,GAAgC,IAApBA,EAASwB,OACnB,kBAAC,EAAAC,KAAD,CAAMC,WAAS,GAAC,kBAAC,IAAD,CAAsBL,MAAM,cACxCM,WAAaxB,KACjB,kBAAC,KAAD,CAAeH,SAAWA,SAQlD","file":"js/CompliancePolicies.79998cdb7e92278c9920.js","sourcesContent":["import React, { useEffect } from 'react';\nimport gql from 'graphql-tag';\nimport { useLocation } from 'react-router-dom';\nimport { useQuery } from '@apollo/client';\nimport {\n    Button,\n    Grid\n} from '@patternfly/react-core';\nimport PageHeader, { PageHeaderTitle } from '@redhat-cloud-services/frontend-components/PageHeader';\nimport Main from '@redhat-cloud-services/frontend-components/Main';\nimport ComplianceEmptyState from 'PresentationalComponents/ComplianceEmptyState';\nimport {\n    BackgroundLink,\n    ErrorPage,\n    LoadingPoliciesTable,\n    PoliciesTable,\n    StateView,\n    StateViewPart\n} from 'PresentationalComponents';\n\nconst QUERY = gql`\n{\n    profiles(search: \"external = false and canonical = false\") {\n        edges {\n            node {\n                id\n                name\n                description\n                refId\n                complianceThreshold\n                totalHostCount\n                majorOsVersion\n                policyType\n                policy {\n                    id\n                    name\n                }\n                benchmark {\n                    id\n                    title\n                    version\n                }\n                hosts {\n                    id\n                }\n                businessObjective {\n                    id\n                    title\n                }\n            }\n        }\n    }\n}\n`;\n\nexport const CompliancePolicies = () => {\n    const location = useLocation();\n    const createLink = <BackgroundLink to='/scappolicies/new'>\n        <Button variant='primary' ouiaId=\"NewPolicyButton\">Create new policy</Button>\n    </BackgroundLink>;\n    let { data, error, loading, refetch } = useQuery(QUERY);\n    useEffect(() => { refetch(); }, [location, refetch]);\n    let policies;\n\n    if (data) {\n        error = undefined; loading = undefined;\n        policies = data.profiles.edges.map(profile => profile.node);\n    }\n\n    return <React.Fragment>\n        <PageHeader className='page-header'>\n            <PageHeaderTitle title=\"SCAP policies\" />\n        </PageHeader>\n        <Main>\n            <StateView stateValues={ { error, data, loading } }>\n                <StateViewPart stateKey='error'>\n                    <ErrorPage error={error}/>\n                </StateViewPart>\n                <StateViewPart stateKey='loading'>\n                    <LoadingPoliciesTable />\n                </StateViewPart>\n                <StateViewPart stateKey='data'>\n                    { policies && policies.length === 0 ?\n                        <Grid hasGutter><ComplianceEmptyState title='No policies'\n                            mainButton={ createLink } /></Grid> :\n                        <PoliciesTable policies={ policies } />\n                    }\n                </StateViewPart>\n            </StateView>\n        </Main>\n    </React.Fragment>;\n};\n\nexport default CompliancePolicies;\n"],"sourceRoot":""}