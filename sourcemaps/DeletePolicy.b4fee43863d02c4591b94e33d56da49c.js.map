{"version":3,"file":"js/DeletePolicy.0e16cea910695cd97547.js","mappings":"2RAUMA,EAAe,WACnB,IAAAC,GAA0CC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlDI,EAAaF,EAAA,GAAEG,EAAgBH,EAAA,GAChCI,GAAWC,EAAAA,EAAAA,eACXC,GAAUC,EAAAA,EAAAA,cAChBC,EAAqBJ,EAASK,MAAMC,OAA5BC,EAAIH,EAAJG,KAAMC,EAAEJ,EAAFI,GACRC,EAAU,WACdP,EAAQQ,KAAK,gBACf,EAEAC,GAAuBC,EAAAA,EAAAA,GAAYC,EAAAA,GAAgB,CACjDC,YAAa,YACXC,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,UACTC,MAAO,YAAFC,OAAcZ,EAAI,mCAG3BE,GACF,EACAW,QAAS,SAACC,IACRN,EAAAA,EAAAA,IACEC,EAAAA,EAAAA,IAAgB,CACdC,QAAS,SACTC,MAAO,wBACPI,YAAaD,EAAME,WAGvBd,GACF,IAnBKe,GAoBL3B,EAAAA,EAAAA,GAAAc,EAAA,GApBiB,GAsBnB,OACEc,IAAAA,cAACC,EAAAA,EAAe,CACdT,QAASU,EAAAA,aAAAA,MACTT,MAAM,iBACNU,iBAAiB,UACjBC,OAAO,oBACPC,QAAM,EACNrB,QAASA,EACTsB,QAAS,CACPN,IAAAA,cAACO,EAAAA,OAAM,CACLC,IAAI,UACJJ,OAAO,qBACP,aAAW,SACXK,YAAapC,EACbmB,QAAQ,SACRkB,QAAS,kBAAMX,EAAa,CAAEY,UAAW,CAAEC,MAAO,CAAE7B,GAAAA,KAAS,GAC9D,wCAGDiB,IAAAA,cAACO,EAAAA,OAAM,CACLC,IAAI,SACJJ,OAAO,2BACPZ,QAAQ,YACRkB,QAAS1B,GACV,YAKHgB,IAAAA,cAACa,EAAAA,KAAI,CAACC,UAAU,2BAA0B,uBACpBd,IAAAA,cAAA,SAAIlB,GAAS,6CAGnCkB,IAAAA,cAACe,EAAAA,SAAQ,CACPC,MAAM,sEACNjC,GAAE,yBAAAW,OAA2BX,GAC7BkC,UAAW5C,EACX6C,SAAU5C,IAIlB,EAEAN,EAAamD,UAAY,CACvBtC,OAAQsC,IAAAA,QAGV,S","sources":["webpack:///./src/SmartComponents/DeletePolicy/DeletePolicy.js"],"sourcesContent":["import { Button, Checkbox, ModalVariant, Text } from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_PROFILE } from 'Mutations';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport { ComplianceModal } from 'PresentationalComponents';\nimport { dispatchAction } from 'Utilities/Dispatcher';\n\nconst DeletePolicy = () => {\n  const [deleteEnabled, setDeleteEnabled] = useState(false);\n  const location = useLocation();\n  const history = useHistory();\n  const { name, id } = location.state.policy;\n  const onClose = () => {\n    history.push('/scappolicies');\n  };\n\n  const [deletePolicy] = useMutation(DELETE_PROFILE, {\n    onCompleted: () => {\n      dispatchAction(\n        addNotification({\n          variant: 'success',\n          title: `Deleted \"${name}\" and its associated reports`,\n        })\n      );\n      onClose();\n    },\n    onError: (error) => {\n      dispatchAction(\n        addNotification({\n          variant: 'danger',\n          title: 'Error removing policy',\n          description: error.message,\n        })\n      );\n      onClose();\n    },\n  });\n\n  return (\n    <ComplianceModal\n      variant={ModalVariant.small}\n      title=\"Delete policy?\"\n      titleIconVariant=\"warning\"\n      ouiaId=\"DeletePolicyModal\"\n      isOpen\n      onClose={onClose}\n      actions={[\n        <Button\n          key=\"destroy\"\n          ouiaId=\"DeletePolicyButton\"\n          aria-label=\"delete\"\n          isDisabled={!deleteEnabled}\n          variant=\"danger\"\n          onClick={() => deletePolicy({ variables: { input: { id } } })}\n        >\n          Delete policy and associated reports\n        </Button>,\n        <Button\n          key=\"cancel\"\n          ouiaId=\"DeletePolicyCancelButton\"\n          variant=\"secondary\"\n          onClick={onClose}\n        >\n          Cancel\n        </Button>,\n      ]}\n    >\n      <Text className=\"policy-delete-body-text\">\n        Deleting the policy <b>{name}</b> will also delete its associated\n        reports.\n      </Text>\n      <Checkbox\n        label=\"I understand this will delete the policy and all associated reports\"\n        id={`deleting-policy-check-${id}`}\n        isChecked={deleteEnabled}\n        onChange={setDeleteEnabled}\n      />\n    </ComplianceModal>\n  );\n};\n\nDeletePolicy.propTypes = {\n  policy: propTypes.object,\n};\n\nexport default DeletePolicy;\n"],"names":["DeletePolicy","_useState","useState","_useState2","_slicedToArray","deleteEnabled","setDeleteEnabled","location","useLocation","history","useHistory","_location$state$polic","state","policy","name","id","onClose","push","_useMutation","useMutation","DELETE_PROFILE","onCompleted","dispatchAction","addNotification","variant","title","concat","onError","error","description","message","deletePolicy","React","ComplianceModal","ModalVariant","titleIconVariant","ouiaId","isOpen","actions","Button","key","isDisabled","onClick","variables","input","Text","className","Checkbox","label","isChecked","onChange","propTypes"],"sourceRoot":""}